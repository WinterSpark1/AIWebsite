var V0=Object.defineProperty;var Y0=(s,e,n)=>e in s?V0(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var An=(s,e,n)=>Y0(s,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(u){if(u.ep)return;u.ep=!0;const o=n(u);fetch(u.href,o)}})();function qs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var rf={exports:{}},hs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function X0(){if(Zy)return hs;Zy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,u,o){var c=null;if(o!==void 0&&(c=""+o),u.key!==void 0&&(c=""+u.key),"key"in u){o={};for(var d in u)d!=="key"&&(o[d]=u[d])}else o=u;return u=o.ref,{$$typeof:s,type:r,key:c,ref:u!==void 0?u:null,props:o}}return hs.Fragment=e,hs.jsx=n,hs.jsxs=n,hs}var Gy;function F0(){return Gy||(Gy=1,rf.exports=X0()),rf.exports}var ct=F0(),sf={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function Q0(){if(Vy)return ge;Vy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=b&&T[b]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,O={};function x(T,D,V){this.props=T,this.context=D,this.refs=O,this.updater=V||w}x.prototype.isReactComponent={},x.prototype.setState=function(T,D){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,D,"setState")},x.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function k(){}k.prototype=x.prototype;function z(T,D,V){this.props=T,this.context=D,this.refs=O,this.updater=V||w}var L=z.prototype=new k;L.constructor=z,E(L,x.prototype),L.isPureReactComponent=!0;var ae=Array.isArray,I={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function ce(T,D,V,Q,F,le){return V=le.ref,{$$typeof:s,type:T,key:D,ref:V!==void 0?V:null,props:le}}function te(T,D){return ce(T.type,D,void 0,void 0,void 0,T.props)}function re(T){return typeof T=="object"&&T!==null&&T.$$typeof===s}function ve(T){var D={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(V){return D[V]})}var We=/\/+/g;function gt(T,D){return typeof T=="object"&&T!==null&&T.key!=null?ve(""+T.key):D.toString(36)}function ft(){}function K(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ft,ft):(T.status="pending",T.then(function(D){T.status==="pending"&&(T.status="fulfilled",T.value=D)},function(D){T.status==="pending"&&(T.status="rejected",T.reason=D)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function G(T,D,V,Q,F){var le=typeof T;(le==="undefined"||le==="boolean")&&(T=null);var de=!1;if(T===null)de=!0;else switch(le){case"bigint":case"string":case"number":de=!0;break;case"object":switch(T.$$typeof){case s:case e:de=!0;break;case y:return de=T._init,G(de(T._payload),D,V,Q,F)}}if(de)return F=F(T),de=Q===""?"."+gt(T,0):Q,ae(F)?(V="",de!=null&&(V=de.replace(We,"$&/")+"/"),G(F,D,V,"",function(Ie){return Ie})):F!=null&&(re(F)&&(F=te(F,V+(F.key==null||T&&T.key===F.key?"":(""+F.key).replace(We,"$&/")+"/")+de)),D.push(F)),1;de=0;var Ze=Q===""?".":Q+":";if(ae(T))for(var xe=0;xe<T.length;xe++)Q=T[xe],le=Ze+gt(Q,xe),de+=G(Q,D,V,le,F);else if(xe=v(T),typeof xe=="function")for(T=xe.call(T),xe=0;!(Q=T.next()).done;)Q=Q.value,le=Ze+gt(Q,xe++),de+=G(Q,D,V,le,F);else if(le==="object"){if(typeof T.then=="function")return G(K(T),D,V,Q,F);throw D=String(T),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return de}function $(T,D,V){if(T==null)return T;var Q=[],F=0;return G(T,Q,"","",function(le){return D.call(V,le,F++)}),Q}function H(T){if(T._status===-1){var D=T._result;D=D(),D.then(function(V){(T._status===0||T._status===-1)&&(T._status=1,T._result=V)},function(V){(T._status===0||T._status===-1)&&(T._status=2,T._result=V)}),T._status===-1&&(T._status=0,T._result=D)}if(T._status===1)return T._result.default;throw T._result}var q=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function X(){}return ge.Children={map:$,forEach:function(T,D,V){$(T,function(){D.apply(this,arguments)},V)},count:function(T){var D=0;return $(T,function(){D++}),D},toArray:function(T){return $(T,function(D){return D})||[]},only:function(T){if(!re(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},ge.Component=x,ge.Fragment=n,ge.Profiler=u,ge.PureComponent=z,ge.StrictMode=r,ge.Suspense=m,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ge.act=function(){throw Error("act(...) is not supported in production builds of React.")},ge.cache=function(T){return function(){return T.apply(null,arguments)}},ge.cloneElement=function(T,D,V){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Q=E({},T.props),F=T.key,le=void 0;if(D!=null)for(de in D.ref!==void 0&&(le=void 0),D.key!==void 0&&(F=""+D.key),D)!W.call(D,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&D.ref===void 0||(Q[de]=D[de]);var de=arguments.length-2;if(de===1)Q.children=V;else if(1<de){for(var Ze=Array(de),xe=0;xe<de;xe++)Ze[xe]=arguments[xe+2];Q.children=Ze}return ce(T.type,F,void 0,void 0,le,Q)},ge.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:o,_context:T},T},ge.createElement=function(T,D,V){var Q,F={},le=null;if(D!=null)for(Q in D.key!==void 0&&(le=""+D.key),D)W.call(D,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(F[Q]=D[Q]);var de=arguments.length-2;if(de===1)F.children=V;else if(1<de){for(var Ze=Array(de),xe=0;xe<de;xe++)Ze[xe]=arguments[xe+2];F.children=Ze}if(T&&T.defaultProps)for(Q in de=T.defaultProps,de)F[Q]===void 0&&(F[Q]=de[Q]);return ce(T,le,void 0,void 0,null,F)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(T){return{$$typeof:d,render:T}},ge.isValidElement=re,ge.lazy=function(T){return{$$typeof:y,_payload:{_status:-1,_result:T},_init:H}},ge.memo=function(T,D){return{$$typeof:p,type:T,compare:D===void 0?null:D}},ge.startTransition=function(T){var D=I.T,V={};I.T=V;try{var Q=T(),F=I.S;F!==null&&F(V,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(X,q)}catch(le){q(le)}finally{I.T=D}},ge.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ge.use=function(T){return I.H.use(T)},ge.useActionState=function(T,D,V){return I.H.useActionState(T,D,V)},ge.useCallback=function(T,D){return I.H.useCallback(T,D)},ge.useContext=function(T){return I.H.useContext(T)},ge.useDebugValue=function(){},ge.useDeferredValue=function(T,D){return I.H.useDeferredValue(T,D)},ge.useEffect=function(T,D){return I.H.useEffect(T,D)},ge.useId=function(){return I.H.useId()},ge.useImperativeHandle=function(T,D,V){return I.H.useImperativeHandle(T,D,V)},ge.useInsertionEffect=function(T,D){return I.H.useInsertionEffect(T,D)},ge.useLayoutEffect=function(T,D){return I.H.useLayoutEffect(T,D)},ge.useMemo=function(T,D){return I.H.useMemo(T,D)},ge.useOptimistic=function(T,D){return I.H.useOptimistic(T,D)},ge.useReducer=function(T,D,V){return I.H.useReducer(T,D,V)},ge.useRef=function(T){return I.H.useRef(T)},ge.useState=function(T){return I.H.useState(T)},ge.useSyncExternalStore=function(T,D,V){return I.H.useSyncExternalStore(T,D,V)},ge.useTransition=function(){return I.H.useTransition()},ge.version="19.0.0",ge}var Yy;function Id(){return Yy||(Yy=1,sf.exports=Q0()),sf.exports}var Bd=Id(),uf={exports:{}},ms={},lf={exports:{}},of={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function K0(){return Xy||(Xy=1,function(s){function e($,H){var q=$.length;$.push(H);e:for(;0<q;){var X=q-1>>>1,T=$[X];if(0<u(T,H))$[X]=H,$[q]=T,q=X;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var H=$[0],q=$.pop();if(q!==H){$[0]=q;e:for(var X=0,T=$.length,D=T>>>1;X<D;){var V=2*(X+1)-1,Q=$[V],F=V+1,le=$[F];if(0>u(Q,q))F<T&&0>u(le,Q)?($[X]=le,$[F]=q,X=F):($[X]=Q,$[V]=q,X=V);else if(F<T&&0>u(le,q))$[X]=le,$[F]=q,X=F;else break e}}return H}function u($,H){var q=$.sortIndex-H.sortIndex;return q!==0?q:$.id-H.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],y=1,b=null,v=3,w=!1,E=!1,O=!1,x=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function L($){for(var H=n(p);H!==null;){if(H.callback===null)r(p);else if(H.startTime<=$)r(p),H.sortIndex=H.expirationTime,e(m,H);else break;H=n(p)}}function ae($){if(O=!1,L($),!E)if(n(m)!==null)E=!0,K();else{var H=n(p);H!==null&&G(ae,H.startTime-$)}}var I=!1,W=-1,ce=5,te=-1;function re(){return!(s.unstable_now()-te<ce)}function ve(){if(I){var $=s.unstable_now();te=$;var H=!0;try{e:{E=!1,O&&(O=!1,k(W),W=-1),w=!0;var q=v;try{t:{for(L($),b=n(m);b!==null&&!(b.expirationTime>$&&re());){var X=b.callback;if(typeof X=="function"){b.callback=null,v=b.priorityLevel;var T=X(b.expirationTime<=$);if($=s.unstable_now(),typeof T=="function"){b.callback=T,L($),H=!0;break t}b===n(m)&&r(m),L($)}else r(m);b=n(m)}if(b!==null)H=!0;else{var D=n(p);D!==null&&G(ae,D.startTime-$),H=!1}}break e}finally{b=null,v=q,w=!1}H=void 0}}finally{H?We():I=!1}}}var We;if(typeof z=="function")We=function(){z(ve)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,ft=gt.port2;gt.port1.onmessage=ve,We=function(){ft.postMessage(null)}}else We=function(){x(ve,0)};function K(){I||(I=!0,We())}function G($,H){W=x(function(){$(s.unstable_now())},H)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_continueExecution=function(){E||w||(E=!0,K())},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_getFirstCallbackNode=function(){return n(m)},s.unstable_next=function($){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var q=v;v=H;try{return $()}finally{v=q}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var q=v;v=$;try{return H()}finally{v=q}},s.unstable_scheduleCallback=function($,H,q){var X=s.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,$){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=q+T,$={id:y++,callback:H,priorityLevel:$,startTime:q,expirationTime:T,sortIndex:-1},q>X?($.sortIndex=q,e(p,$),n(m)===null&&$===n(p)&&(O?(k(W),W=-1):O=!0,G(ae,q-X))):($.sortIndex=T,e(m,$),E||w||(E=!0,K())),$},s.unstable_shouldYield=re,s.unstable_wrapCallback=function($){var H=v;return function(){var q=v;v=H;try{return $.apply(this,arguments)}finally{v=q}}}}(of)),of}var Fy;function J0(){return Fy||(Fy=1,lf.exports=K0()),lf.exports}var cf={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function W0(){if(Qy)return _t;Qy=1;var s=Id();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function o(m,p,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:m,containerInfo:p,implementation:y}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_t.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,y)},_t.flushSync=function(m){var p=c.T,y=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=y,r.d.f()}},_t.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},_t.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},_t.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:w}):y==="script"&&r.d.X(m,{crossOrigin:b,integrity:v,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_t.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},_t.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin);r.d.L(m,y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_t.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},_t.requestFormReset=function(m){r.d.r(m)},_t.unstable_batchedUpdates=function(m,p){return m(p)},_t.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},_t.useFormStatus=function(){return c.H.useHostTransitionStatus()},_t.version="19.0.0",_t}var Ky;function ew(){if(Ky)return cf.exports;Ky=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),cf.exports=W0(),cf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function tw(){if(Jy)return ms;Jy=1;var s=J0(),e=Id(),n=ew();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),ae=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function W(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Symbol.for("react.client.reference");function te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case m:return"Fragment";case d:return"Portal";case y:return"Profiler";case p:return"StrictMode";case O:return"Suspense";case x:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w:return(t.displayName||"Context")+".Provider";case v:return(t._context.displayName||"Context")+".Consumer";case E:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return a=t.displayName||null,a!==null?a:te(t.type)||"Memo";case z:a=t._payload,t=t._init;try{return te(t(a))}catch{}}return null}var re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=Object.assign,We,gt;function ft(t){if(We===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);We=a&&a[1]||"",gt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+t+gt}var K=!1;function G(t,a){if(!t||K)return"";K=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(M){var j=M}Reflect.construct(t,[],B)}else{try{B.call()}catch(M){j=M}t.call(B.prototype)}}else{try{throw Error()}catch(M){j=M}(B=t())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(M){if(M&&j&&typeof M.stack=="string")return[M.stack,j.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),g=h[0],_=h[1];if(g&&_){var S=g.split(`
`),R=_.split(`
`);for(f=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;f<R.length&&!R[f].includes("DetermineComponentFrameRoot");)f++;if(l===S.length||f===R.length)for(l=S.length-1,f=R.length-1;1<=l&&0<=f&&S[l]!==R[f];)f--;for(;1<=l&&0<=f;l--,f--)if(S[l]!==R[f]){if(l!==1||f!==1)do if(l--,f--,0>f||S[l]!==R[f]){var U=`
`+S[l].replace(" at new "," at ");return t.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",t.displayName)),U}while(1<=l&&0<=f);break}}}finally{K=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?ft(i):""}function $(t){switch(t.tag){case 26:case 27:case 5:return ft(t.type);case 16:return ft("Lazy");case 13:return ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return t=G(t.type,!1),t;case 11:return t=G(t.type.render,!1),t;case 1:return t=G(t.type,!0),t;default:return""}}function H(t){try{var a="";do a+=$(t),t=t.return;while(t);return a}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function q(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function X(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function T(t){if(q(t)!==t)throw Error(r(188))}function D(t){var a=t.alternate;if(!a){if(a=q(t),a===null)throw Error(r(188));return a!==t?null:t}for(var i=t,l=a;;){var f=i.return;if(f===null)break;var h=f.alternate;if(h===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===i)return T(f),t;if(h===l)return T(f),a;h=h.sibling}throw Error(r(188))}if(i.return!==l.return)i=f,l=h;else{for(var g=!1,_=f.child;_;){if(_===i){g=!0,i=f,l=h;break}if(_===l){g=!0,l=f,i=h;break}_=_.sibling}if(!g){for(_=h.child;_;){if(_===i){g=!0,i=h,l=f;break}if(_===l){g=!0,l=h,i=f;break}_=_.sibling}if(!g)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?t:a}function V(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=V(t),a!==null)return a;t=t.sibling}return null}var Q=Array.isArray,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},de=[],Ze=-1;function xe(t){return{current:t}}function Ie(t){0>Ze||(t.current=de[Ze],de[Ze]=null,Ze--)}function Le(t,a){Ze++,de[Ze]=t.current,t.current=a}var Xt=xe(null),yi=xe(null),tn=xe(null),Ks=xe(null);function Js(t,a){switch(Le(tn,a),Le(yi,t),Le(Xt,null),t=a.nodeType,t){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?vy(a):0;break;default:if(t=t===8?a.parentNode:a,a=t.tagName,t=t.namespaceURI)t=vy(t),a=_y(t,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Ie(Xt),Le(Xt,a)}function br(){Ie(Xt),Ie(yi),Ie(tn)}function Xl(t){t.memoizedState!==null&&Le(Ks,t);var a=Xt.current,i=_y(a,t.type);a!==i&&(Le(yi,t),Le(Xt,i))}function Ws(t){yi.current===t&&(Ie(Xt),Ie(yi)),Ks.current===t&&(Ie(Ks),ls._currentValue=le)}var Fl=Object.prototype.hasOwnProperty,Ql=s.unstable_scheduleCallback,Kl=s.unstable_cancelCallback,Tv=s.unstable_shouldYield,Ov=s.unstable_requestPaint,Sa=s.unstable_now,Av=s.unstable_getCurrentPriorityLevel,lh=s.unstable_ImmediatePriority,oh=s.unstable_UserBlockingPriority,eu=s.unstable_NormalPriority,Rv=s.unstable_LowPriority,ch=s.unstable_IdlePriority,xv=s.log,Nv=s.unstable_setDisableYieldValue,gi=null,Ut=null;function Cv(t){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(gi,t,void 0,(t.current.flags&128)===128)}catch{}}function an(t){if(typeof xv=="function"&&Nv(t),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(gi,t)}catch{}}var Pt=Math.clz32?Math.clz32:Lv,jv=Math.log,kv=Math.LN2;function Lv(t){return t>>>=0,t===0?32:31-(jv(t)/kv|0)|0}var tu=128,au=4194304;function zn(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function nu(t,a){var i=t.pendingLanes;if(i===0)return 0;var l=0,f=t.suspendedLanes,h=t.pingedLanes,g=t.warmLanes;t=t.finishedLanes!==0;var _=i&134217727;return _!==0?(i=_&~f,i!==0?l=zn(i):(h&=_,h!==0?l=zn(h):t||(g=_&~g,g!==0&&(l=zn(g))))):(_=i&~f,_!==0?l=zn(_):h!==0?l=zn(h):t||(g=i&~g,g!==0&&(l=zn(g)))),l===0?0:a!==0&&a!==l&&(a&f)===0&&(f=l&-l,g=a&-a,f>=g||f===32&&(g&4194176)!==0)?a:l}function bi(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function $v(t,a){switch(t){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fh(){var t=tu;return tu<<=1,(tu&4194176)===0&&(tu=128),t}function dh(){var t=au;return au<<=1,(au&62914560)===0&&(au=4194304),t}function Jl(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function vi(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Dv(t,a,i,l,f,h){var g=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var _=t.entanglements,S=t.expirationTimes,R=t.hiddenUpdates;for(i=g&~i;0<i;){var U=31-Pt(i),B=1<<U;_[U]=0,S[U]=-1;var j=R[U];if(j!==null)for(R[U]=null,U=0;U<j.length;U++){var M=j[U];M!==null&&(M.lane&=-536870913)}i&=~B}l!==0&&hh(t,l,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(g&~a))}function hh(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Pt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|i&4194218}function mh(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var l=31-Pt(i),f=1<<l;f&a|t[l]&a&&(t[l]|=a),i&=~f}}function ph(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yh(){var t=F.p;return t!==0?t:(t=window.event,t===void 0?32:Py(t.type))}function Mv(t,a){var i=F.p;try{return F.p=t,a()}finally{F.p=i}}var nn=Math.random().toString(36).slice(2),bt="__reactFiber$"+nn,jt="__reactProps$"+nn,vr="__reactContainer$"+nn,Wl="__reactEvents$"+nn,Uv="__reactListeners$"+nn,Pv="__reactHandles$"+nn,gh="__reactResources$"+nn,_i="__reactMarker$"+nn;function eo(t){delete t[bt],delete t[jt],delete t[Wl],delete t[Uv],delete t[Pv]}function In(t){var a=t[bt];if(a)return a;for(var i=t.parentNode;i;){if(a=i[vr]||i[bt]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(t=Sy(t);t!==null;){if(i=t[bt])return i;t=Sy(t)}return a}t=i,i=t.parentNode}return null}function _r(t){if(t=t[bt]||t[vr]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function wi(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function wr(t){var a=t[gh];return a||(a=t[gh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function rt(t){t[_i]=!0}var bh=new Set,vh={};function Bn(t,a){Er(t,a),Er(t+"Capture",a)}function Er(t,a){for(vh[t]=a,t=0;t<a.length;t++)bh.add(a[t])}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_h={},wh={};function Iv(t){return Fl.call(wh,t)?!0:Fl.call(_h,t)?!1:zv.test(t)?wh[t]=!0:(_h[t]=!0,!1)}function ru(t,a,i){if(Iv(a))if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+i)}}function iu(t,a,i){if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+i)}}function $a(t,a,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(a,i,""+l)}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eh(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Bv(t){var a=Eh(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),l=""+t[a];if(!t.hasOwnProperty(a)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var f=i.get,h=i.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(g){l=""+g,h.call(this,g)}}),Object.defineProperty(t,a,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function su(t){t._valueTracker||(t._valueTracker=Bv(t))}function Sh(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var i=a.getValue(),l="";return t&&(l=Eh(t)?t.checked?"true":"false":t.value),t=l,t!==i?(a.setValue(t),!0):!1}function uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Hv=/[\n"\\]/g;function Qt(t){return t.replace(Hv,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function to(t,a,i,l,f,h,g,_){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),a!=null?g==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Ft(a)):t.value!==""+Ft(a)&&(t.value=""+Ft(a)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),a!=null?ao(t,g,Ft(a)):i!=null?ao(t,g,Ft(i)):l!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Ft(_):t.removeAttribute("name")}function Th(t,a,i,l,f,h,g,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),a!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||a!=null))return;i=i!=null?""+Ft(i):"",a=a!=null?""+Ft(a):i,_||a===t.value||(t.value=a),t.defaultValue=a}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=_?t.checked:!!l,t.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g)}function ao(t,a,i){a==="number"&&uu(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Sr(t,a,i,l){if(t=t.options,a){a={};for(var f=0;f<i.length;f++)a["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=a.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&l&&(t[i].defaultSelected=!0)}else{for(i=""+Ft(i),a=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Oh(t,a,i){if(a!=null&&(a=""+Ft(a),a!==t.value&&(t.value=a),i==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=i!=null?""+Ft(i):""}function Ah(t,a,i,l){if(a==null){if(l!=null){if(i!=null)throw Error(r(92));if(Q(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),a=i}i=Ft(a),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l)}function Tr(t,a){if(a){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=a;return}}t.textContent=a}var qv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rh(t,a,i){var l=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,i):typeof i!="number"||i===0||qv.has(a)?a==="float"?t.cssFloat=i:t[a]=(""+i).trim():t[a]=i+"px"}function xh(t,a,i){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in a)l=a[f],a.hasOwnProperty(f)&&i[f]!==l&&Rh(t,f,l)}else for(var h in a)a.hasOwnProperty(h)&&Rh(t,h,a[h])}function no(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lu(t){return Gv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ro=null;function io(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Or=null,Ar=null;function Nh(t){var a=_r(t);if(a&&(t=a.stateNode)){var i=t[jt]||null;e:switch(t=a.stateNode,a.type){case"input":if(to(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Qt(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var l=i[a];if(l!==t&&l.form===t.form){var f=l[jt]||null;if(!f)throw Error(r(90));to(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<i.length;a++)l=i[a],l.form===t.form&&Sh(l)}break e;case"textarea":Oh(t,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&Sr(t,!!i.multiple,a,!1)}}}var so=!1;function Ch(t,a,i){if(so)return t(a,i);so=!0;try{var l=t(a);return l}finally{if(so=!1,(Or!==null||Ar!==null)&&(Gu(),Or&&(a=Or,t=Ar,Ar=Or=null,Nh(a),t)))for(a=0;a<t.length;a++)Nh(t[a])}}function Ei(t,a){var i=t.stateNode;if(i===null)return null;var l=i[jt]||null;if(l===null)return null;i=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(r(231,a,typeof i));return i}var uo=!1;if(La)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){uo=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{uo=!1}var rn=null,lo=null,ou=null;function jh(){if(ou)return ou;var t,a=lo,i=a.length,l,f="value"in rn?rn.value:rn.textContent,h=f.length;for(t=0;t<i&&a[t]===f[t];t++);var g=i-t;for(l=1;l<=g&&a[i-l]===f[h-l];l++);return ou=f.slice(t,1<l?1-l:void 0)}function cu(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function fu(){return!0}function kh(){return!1}function kt(t){function a(i,l,f,h,g){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(i=t[_],this[_]=i?i(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?fu:kh,this.isPropagationStopped=kh,this}return ve(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=fu)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=fu)},persist:function(){},isPersistent:fu}),a}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=kt(Hn),Ti=ve({},Hn,{view:0,detail:0}),Vv=kt(Ti),oo,co,Oi,hu=ve({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ho,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(oo=t.screenX-Oi.screenX,co=t.screenY-Oi.screenY):co=oo=0,Oi=t),oo)},movementY:function(t){return"movementY"in t?t.movementY:co}}),Lh=kt(hu),Yv=ve({},hu,{dataTransfer:0}),Xv=kt(Yv),Fv=ve({},Ti,{relatedTarget:0}),fo=kt(Fv),Qv=ve({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kv=kt(Qv),Jv=ve({},Hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wv=kt(Jv),e_=ve({},Hn,{data:0}),$h=kt(e_),t_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r_(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=n_[t])?!!a[t]:!1}function ho(){return r_}var i_=ve({},Ti,{key:function(t){if(t.key){var a=t_[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ho,charCode:function(t){return t.type==="keypress"?cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s_=kt(i_),u_=ve({},hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dh=kt(u_),l_=ve({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ho}),o_=kt(l_),c_=ve({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),f_=kt(c_),d_=ve({},hu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h_=kt(d_),m_=ve({},Hn,{newState:0,oldState:0}),p_=kt(m_),y_=[9,13,27,32],mo=La&&"CompositionEvent"in window,Ai=null;La&&"documentMode"in document&&(Ai=document.documentMode);var g_=La&&"TextEvent"in window&&!Ai,Mh=La&&(!mo||Ai&&8<Ai&&11>=Ai),Uh=" ",Ph=!1;function zh(t,a){switch(t){case"keyup":return y_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ih(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rr=!1;function b_(t,a){switch(t){case"compositionend":return Ih(a);case"keypress":return a.which!==32?null:(Ph=!0,Uh);case"textInput":return t=a.data,t===Uh&&Ph?null:t;default:return null}}function v_(t,a){if(Rr)return t==="compositionend"||!mo&&zh(t,a)?(t=jh(),ou=lo=rn=null,Rr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Mh&&a.locale!=="ko"?null:a.data;default:return null}}var __={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!__[t.type]:a==="textarea"}function Hh(t,a,i,l){Or?Ar?Ar.push(l):Ar=[l]:Or=l,a=Qu(a,"onChange"),0<a.length&&(i=new du("onChange","change",null,i,l),t.push({event:i,listeners:a}))}var Ri=null,xi=null;function w_(t){my(t,0)}function mu(t){var a=wi(t);if(Sh(a))return t}function qh(t,a){if(t==="change")return a}var Zh=!1;if(La){var po;if(La){var yo="oninput"in document;if(!yo){var Gh=document.createElement("div");Gh.setAttribute("oninput","return;"),yo=typeof Gh.oninput=="function"}po=yo}else po=!1;Zh=po&&(!document.documentMode||9<document.documentMode)}function Vh(){Ri&&(Ri.detachEvent("onpropertychange",Yh),xi=Ri=null)}function Yh(t){if(t.propertyName==="value"&&mu(xi)){var a=[];Hh(a,xi,t,io(t)),Ch(w_,a)}}function E_(t,a,i){t==="focusin"?(Vh(),Ri=a,xi=i,Ri.attachEvent("onpropertychange",Yh)):t==="focusout"&&Vh()}function S_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(xi)}function T_(t,a){if(t==="click")return mu(a)}function O_(t,a){if(t==="input"||t==="change")return mu(a)}function A_(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var zt=typeof Object.is=="function"?Object.is:A_;function Ni(t,a){if(zt(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),l=Object.keys(a);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!Fl.call(a,f)||!zt(t[f],a[f]))return!1}return!0}function Xh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fh(t,a){var i=Xh(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=a&&l>=a)return{node:i,offset:a-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Xh(i)}}function Qh(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Qh(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Kh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=uu(t.document);a instanceof t.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)t=a.contentWindow;else break;a=uu(t.document)}return a}function go(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}function R_(t,a){var i=Kh(a);a=t.focusedElem;var l=t.selectionRange;if(i!==a&&a&&a.ownerDocument&&Qh(a.ownerDocument.documentElement,a)){if(l!==null&&go(a)){if(t=l.start,i=l.end,i===void 0&&(i=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(i,a.value.length);else if(i=(t=a.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var f=a.textContent.length,h=Math.min(l.start,f);l=l.end===void 0?h:Math.min(l.end,f),!i.extend&&h>l&&(f=l,l=h,h=f),f=Fh(a,h);var g=Fh(a,l);f&&g&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==g.node||i.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(f.node,f.offset),i.removeAllRanges(),h>l?(i.addRange(t),i.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),i.addRange(t)))}}for(t=[],i=a;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)i=t[a],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var x_=La&&"documentMode"in document&&11>=document.documentMode,xr=null,bo=null,Ci=null,vo=!1;function Jh(t,a,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;vo||xr==null||xr!==uu(l)||(l=xr,"selectionStart"in l&&go(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ci&&Ni(Ci,l)||(Ci=l,l=Qu(bo,"onSelect"),0<l.length&&(a=new du("onSelect","select",null,a,i),t.push({event:a,listeners:l}),a.target=xr)))}function qn(t,a){var i={};return i[t.toLowerCase()]=a.toLowerCase(),i["Webkit"+t]="webkit"+a,i["Moz"+t]="moz"+a,i}var Nr={animationend:qn("Animation","AnimationEnd"),animationiteration:qn("Animation","AnimationIteration"),animationstart:qn("Animation","AnimationStart"),transitionrun:qn("Transition","TransitionRun"),transitionstart:qn("Transition","TransitionStart"),transitioncancel:qn("Transition","TransitionCancel"),transitionend:qn("Transition","TransitionEnd")},_o={},Wh={};La&&(Wh=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function Zn(t){if(_o[t])return _o[t];if(!Nr[t])return t;var a=Nr[t],i;for(i in a)if(a.hasOwnProperty(i)&&i in Wh)return _o[t]=a[i];return t}var em=Zn("animationend"),tm=Zn("animationiteration"),am=Zn("animationstart"),N_=Zn("transitionrun"),C_=Zn("transitionstart"),j_=Zn("transitioncancel"),nm=Zn("transitionend"),rm=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function la(t,a){rm.set(t,a),Bn(a,[t])}var Kt=[],Cr=0,wo=0;function pu(){for(var t=Cr,a=wo=Cr=0;a<t;){var i=Kt[a];Kt[a++]=null;var l=Kt[a];Kt[a++]=null;var f=Kt[a];Kt[a++]=null;var h=Kt[a];if(Kt[a++]=null,l!==null&&f!==null){var g=l.pending;g===null?f.next=f:(f.next=g.next,g.next=f),l.pending=f}h!==0&&sm(i,f,h)}}function yu(t,a,i,l){Kt[Cr++]=t,Kt[Cr++]=a,Kt[Cr++]=i,Kt[Cr++]=l,wo|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Eo(t,a,i,l){return yu(t,a,i,l),gu(t)}function sn(t,a){return yu(t,null,null,a),gu(t)}function sm(t,a,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var f=!1,h=t.return;h!==null;)h.childLanes|=i,l=h.alternate,l!==null&&(l.childLanes|=i),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;f&&a!==null&&t.tag===3&&(h=t.stateNode,f=31-Pt(i),h=h.hiddenUpdates,t=h[f],t===null?h[f]=[a]:t.push(a),a.lane=i|536870912)}function gu(t){if(50<ts)throw ts=0,xc=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var jr={},um=new WeakMap;function Jt(t,a){if(typeof t=="object"&&t!==null){var i=um.get(t);return i!==void 0?i:(a={value:t,source:a,stack:H(a)},um.set(t,a),a)}return{value:t,source:a,stack:H(a)}}var kr=[],Lr=0,bu=null,vu=0,Wt=[],ea=0,Gn=null,Da=1,Ma="";function Vn(t,a){kr[Lr++]=vu,kr[Lr++]=bu,bu=t,vu=a}function lm(t,a,i){Wt[ea++]=Da,Wt[ea++]=Ma,Wt[ea++]=Gn,Gn=t;var l=Da;t=Ma;var f=32-Pt(l)-1;l&=~(1<<f),i+=1;var h=32-Pt(a)+f;if(30<h){var g=f-f%5;h=(l&(1<<g)-1).toString(32),l>>=g,f-=g,Da=1<<32-Pt(a)+f|i<<f|l,Ma=h+t}else Da=1<<h|i<<f|l,Ma=t}function So(t){t.return!==null&&(Vn(t,1),lm(t,1,0))}function To(t){for(;t===bu;)bu=kr[--Lr],kr[Lr]=null,vu=kr[--Lr],kr[Lr]=null;for(;t===Gn;)Gn=Wt[--ea],Wt[ea]=null,Ma=Wt[--ea],Wt[ea]=null,Da=Wt[--ea],Wt[ea]=null}var St=null,dt=null,Ne=!1,oa=null,Ta=!1,Oo=Error(r(519));function Yn(t){var a=Error(r(418,""));throw Li(Jt(a,t)),Oo}function om(t){var a=t.stateNode,i=t.type,l=t.memoizedProps;switch(a[bt]=t,a[jt]=l,i){case"dialog":Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":case"embed":Oe("load",a);break;case"video":case"audio":for(i=0;i<ns.length;i++)Oe(ns[i],a);break;case"source":Oe("error",a);break;case"img":case"image":case"link":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"input":Oe("invalid",a),Th(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),su(a);break;case"select":Oe("invalid",a);break;case"textarea":Oe("invalid",a),Ah(a,l.value,l.defaultValue,l.children),su(a)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||l.suppressHydrationWarning===!0||by(a.textContent,i)?(l.popover!=null&&(Oe("beforetoggle",a),Oe("toggle",a)),l.onScroll!=null&&Oe("scroll",a),l.onScrollEnd!=null&&Oe("scrollend",a),l.onClick!=null&&(a.onclick=Ku),a=!0):a=!1,a||Yn(t)}function cm(t){for(St=t.return;St;)switch(St.tag){case 3:case 27:Ta=!0;return;case 5:case 13:Ta=!1;return;default:St=St.return}}function ji(t){if(t!==St)return!1;if(!Ne)return cm(t),Ne=!0,!1;var a=!1,i;if((i=t.tag!==3&&t.tag!==27)&&((i=t.tag===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Gc(t.type,t.memoizedProps)),i=!i),i&&(a=!0),a&&dt&&Yn(t),cm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(i=t.data,i==="/$"){if(a===0){dt=fa(t.nextSibling);break e}a--}else i!=="$"&&i!=="$!"&&i!=="$?"||a++;t=t.nextSibling}dt=null}}else dt=St?fa(t.stateNode.nextSibling):null;return!0}function ki(){dt=St=null,Ne=!1}function Li(t){oa===null?oa=[t]:oa.push(t)}var $i=Error(r(460)),fm=Error(r(474)),Ao={then:function(){}};function dm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _u(){}function hm(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(_u,_u),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,t===$i?Error(r(483)):t;default:if(typeof a.status=="string")a.then(_u,_u);else{if(t=Pe,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=l}},function(l){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,t===$i?Error(r(483)):t}throw Di=a,$i}}var Di=null;function mm(){if(Di===null)throw Error(r(459));var t=Di;return Di=null,t}var $r=null,Mi=0;function wu(t){var a=Mi;return Mi+=1,$r===null&&($r=[]),hm($r,t,a)}function Ui(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Eu(t,a){throw a.$$typeof===o?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function pm(t){var a=t._init;return a(t._payload)}function ym(t){function a(N,A){if(t){var C=N.deletions;C===null?(N.deletions=[A],N.flags|=16):C.push(A)}}function i(N,A){if(!t)return null;for(;A!==null;)a(N,A),A=A.sibling;return null}function l(N){for(var A=new Map;N!==null;)N.key!==null?A.set(N.key,N):A.set(N.index,N),N=N.sibling;return A}function f(N,A){return N=bn(N,A),N.index=0,N.sibling=null,N}function h(N,A,C){return N.index=C,t?(C=N.alternate,C!==null?(C=C.index,C<A?(N.flags|=33554434,A):C):(N.flags|=33554434,A)):(N.flags|=1048576,A)}function g(N){return t&&N.alternate===null&&(N.flags|=33554434),N}function _(N,A,C,P){return A===null||A.tag!==6?(A=_c(C,N.mode,P),A.return=N,A):(A=f(A,C),A.return=N,A)}function S(N,A,C,P){var ne=C.type;return ne===m?U(N,A,C.props.children,P,C.key):A!==null&&(A.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===z&&pm(ne)===A.type)?(A=f(A,C.props),Ui(A,C),A.return=N,A):(A=Iu(C.type,C.key,C.props,null,N.mode,P),Ui(A,C),A.return=N,A)}function R(N,A,C,P){return A===null||A.tag!==4||A.stateNode.containerInfo!==C.containerInfo||A.stateNode.implementation!==C.implementation?(A=wc(C,N.mode,P),A.return=N,A):(A=f(A,C.children||[]),A.return=N,A)}function U(N,A,C,P,ne){return A===null||A.tag!==7?(A=nr(C,N.mode,P,ne),A.return=N,A):(A=f(A,C),A.return=N,A)}function B(N,A,C){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=_c(""+A,N.mode,C),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case c:return C=Iu(A.type,A.key,A.props,null,N.mode,C),Ui(C,A),C.return=N,C;case d:return A=wc(A,N.mode,C),A.return=N,A;case z:var P=A._init;return A=P(A._payload),B(N,A,C)}if(Q(A)||W(A))return A=nr(A,N.mode,C,null),A.return=N,A;if(typeof A.then=="function")return B(N,wu(A),C);if(A.$$typeof===w)return B(N,Uu(N,A),C);Eu(N,A)}return null}function j(N,A,C,P){var ne=A!==null?A.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return ne!==null?null:_(N,A,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case c:return C.key===ne?S(N,A,C,P):null;case d:return C.key===ne?R(N,A,C,P):null;case z:return ne=C._init,C=ne(C._payload),j(N,A,C,P)}if(Q(C)||W(C))return ne!==null?null:U(N,A,C,P,null);if(typeof C.then=="function")return j(N,A,wu(C),P);if(C.$$typeof===w)return j(N,A,Uu(N,C),P);Eu(N,C)}return null}function M(N,A,C,P,ne){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return N=N.get(C)||null,_(A,N,""+P,ne);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case c:return N=N.get(P.key===null?C:P.key)||null,S(A,N,P,ne);case d:return N=N.get(P.key===null?C:P.key)||null,R(A,N,P,ne);case z:var Se=P._init;return P=Se(P._payload),M(N,A,C,P,ne)}if(Q(P)||W(P))return N=N.get(C)||null,U(A,N,P,ne,null);if(typeof P.then=="function")return M(N,A,C,wu(P),ne);if(P.$$typeof===w)return M(N,A,C,Uu(A,P),ne);Eu(A,P)}return null}function se(N,A,C,P){for(var ne=null,Se=null,oe=A,fe=A=0,ut=null;oe!==null&&fe<C.length;fe++){oe.index>fe?(ut=oe,oe=null):ut=oe.sibling;var Ce=j(N,oe,C[fe],P);if(Ce===null){oe===null&&(oe=ut);break}t&&oe&&Ce.alternate===null&&a(N,oe),A=h(Ce,A,fe),Se===null?ne=Ce:Se.sibling=Ce,Se=Ce,oe=ut}if(fe===C.length)return i(N,oe),Ne&&Vn(N,fe),ne;if(oe===null){for(;fe<C.length;fe++)oe=B(N,C[fe],P),oe!==null&&(A=h(oe,A,fe),Se===null?ne=oe:Se.sibling=oe,Se=oe);return Ne&&Vn(N,fe),ne}for(oe=l(oe);fe<C.length;fe++)ut=M(oe,N,fe,C[fe],P),ut!==null&&(t&&ut.alternate!==null&&oe.delete(ut.key===null?fe:ut.key),A=h(ut,A,fe),Se===null?ne=ut:Se.sibling=ut,Se=ut);return t&&oe.forEach(function(On){return a(N,On)}),Ne&&Vn(N,fe),ne}function me(N,A,C,P){if(C==null)throw Error(r(151));for(var ne=null,Se=null,oe=A,fe=A=0,ut=null,Ce=C.next();oe!==null&&!Ce.done;fe++,Ce=C.next()){oe.index>fe?(ut=oe,oe=null):ut=oe.sibling;var On=j(N,oe,Ce.value,P);if(On===null){oe===null&&(oe=ut);break}t&&oe&&On.alternate===null&&a(N,oe),A=h(On,A,fe),Se===null?ne=On:Se.sibling=On,Se=On,oe=ut}if(Ce.done)return i(N,oe),Ne&&Vn(N,fe),ne;if(oe===null){for(;!Ce.done;fe++,Ce=C.next())Ce=B(N,Ce.value,P),Ce!==null&&(A=h(Ce,A,fe),Se===null?ne=Ce:Se.sibling=Ce,Se=Ce);return Ne&&Vn(N,fe),ne}for(oe=l(oe);!Ce.done;fe++,Ce=C.next())Ce=M(oe,N,fe,Ce.value,P),Ce!==null&&(t&&Ce.alternate!==null&&oe.delete(Ce.key===null?fe:Ce.key),A=h(Ce,A,fe),Se===null?ne=Ce:Se.sibling=Ce,Se=Ce);return t&&oe.forEach(function(G0){return a(N,G0)}),Ne&&Vn(N,fe),ne}function Ye(N,A,C,P){if(typeof C=="object"&&C!==null&&C.type===m&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case c:e:{for(var ne=C.key;A!==null;){if(A.key===ne){if(ne=C.type,ne===m){if(A.tag===7){i(N,A.sibling),P=f(A,C.props.children),P.return=N,N=P;break e}}else if(A.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===z&&pm(ne)===A.type){i(N,A.sibling),P=f(A,C.props),Ui(P,C),P.return=N,N=P;break e}i(N,A);break}else a(N,A);A=A.sibling}C.type===m?(P=nr(C.props.children,N.mode,P,C.key),P.return=N,N=P):(P=Iu(C.type,C.key,C.props,null,N.mode,P),Ui(P,C),P.return=N,N=P)}return g(N);case d:e:{for(ne=C.key;A!==null;){if(A.key===ne)if(A.tag===4&&A.stateNode.containerInfo===C.containerInfo&&A.stateNode.implementation===C.implementation){i(N,A.sibling),P=f(A,C.children||[]),P.return=N,N=P;break e}else{i(N,A);break}else a(N,A);A=A.sibling}P=wc(C,N.mode,P),P.return=N,N=P}return g(N);case z:return ne=C._init,C=ne(C._payload),Ye(N,A,C,P)}if(Q(C))return se(N,A,C,P);if(W(C)){if(ne=W(C),typeof ne!="function")throw Error(r(150));return C=ne.call(C),me(N,A,C,P)}if(typeof C.then=="function")return Ye(N,A,wu(C),P);if(C.$$typeof===w)return Ye(N,A,Uu(N,C),P);Eu(N,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,A!==null&&A.tag===6?(i(N,A.sibling),P=f(A,C),P.return=N,N=P):(i(N,A),P=_c(C,N.mode,P),P.return=N,N=P),g(N)):i(N,A)}return function(N,A,C,P){try{Mi=0;var ne=Ye(N,A,C,P);return $r=null,ne}catch(oe){if(oe===$i)throw oe;var Se=ra(29,oe,null,N.mode);return Se.lanes=P,Se.return=N,Se}finally{}}}var Xn=ym(!0),gm=ym(!1),Dr=xe(null),Su=xe(0);function bm(t,a){t=Ya,Le(Su,t),Le(Dr,a),Ya=t|a.baseLanes}function Ro(){Le(Su,Ya),Le(Dr,Dr.current)}function xo(){Ya=Su.current,Ie(Dr),Ie(Su)}var ta=xe(null),Oa=null;function un(t){var a=t.alternate;Le(et,et.current&1),Le(ta,t),Oa===null&&(a===null||Dr.current!==null||a.memoizedState!==null)&&(Oa=t)}function vm(t){if(t.tag===22){if(Le(et,et.current),Le(ta,t),Oa===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(Oa=t)}}else ln()}function ln(){Le(et,et.current),Le(ta,ta.current)}function Ua(t){Ie(ta),Oa===t&&(Oa=null),Ie(et)}var et=xe(0);function Tu(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var k_=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},L_=s.unstable_scheduleCallback,$_=s.unstable_NormalPriority,tt={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function No(){return{controller:new k_,data:new Map,refCount:0}}function Pi(t){t.refCount--,t.refCount===0&&L_($_,function(){t.controller.abort()})}var zi=null,Co=0,Mr=0,Ur=null;function D_(t,a){if(zi===null){var i=zi=[];Co=0,Mr=Mc(),Ur={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Co++,a.then(_m,_m),a}function _m(){if(--Co===0&&zi!==null){Ur!==null&&(Ur.status="fulfilled");var t=zi;zi=null,Mr=0,Ur=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function M_(t,a){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var f=0;f<i.length;f++)(0,i[f])(a)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var wm=re.S;re.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&D_(t,a),wm!==null&&wm(t,a)};var Fn=xe(null);function jo(){var t=Fn.current;return t!==null?t:Pe.pooledCache}function Ou(t,a){a===null?Le(Fn,Fn.current):Le(Fn,a.pool)}function Em(){var t=jo();return t===null?null:{parent:tt._currentValue,pool:t}}var on=0,Ee=null,$e=null,Fe=null,Au=!1,Pr=!1,Qn=!1,Ru=0,Ii=0,zr=null,U_=0;function Xe(){throw Error(r(321))}function ko(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!zt(t[i],a[i]))return!1;return!0}function Lo(t,a,i,l,f,h){return on=h,Ee=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,re.H=t===null||t.memoizedState===null?Kn:cn,Qn=!1,h=i(l,f),Qn=!1,Pr&&(h=Tm(a,i,l,f)),Sm(t),h}function Sm(t){re.H=Aa;var a=$e!==null&&$e.next!==null;if(on=0,Fe=$e=Ee=null,Au=!1,Ii=0,zr=null,a)throw Error(r(300));t===null||it||(t=t.dependencies,t!==null&&Mu(t)&&(it=!0))}function Tm(t,a,i,l){Ee=t;var f=0;do{if(Pr&&(zr=null),Ii=0,Pr=!1,25<=f)throw Error(r(301));if(f+=1,Fe=$e=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}re.H=Jn,h=a(i,l)}while(Pr);return h}function P_(){var t=re.H,a=t.useState()[0];return a=typeof a.then=="function"?Bi(a):a,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(Ee.flags|=1024),a}function $o(){var t=Ru!==0;return Ru=0,t}function Do(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function Mo(t){if(Au){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Au=!1}on=0,Fe=$e=Ee=null,Pr=!1,Ii=Ru=0,zr=null}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ee.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Qe(){if($e===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var a=Fe===null?Ee.memoizedState:Fe.next;if(a!==null)Fe=a,$e=t;else{if(t===null)throw Ee.alternate===null?Error(r(467)):Error(r(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Fe===null?Ee.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}var xu;xu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Bi(t){var a=Ii;return Ii+=1,zr===null&&(zr=[]),t=hm(zr,t,a),a=Ee,(Fe===null?a.memoizedState:Fe.next)===null&&(a=a.alternate,re.H=a===null||a.memoizedState===null?Kn:cn),t}function Nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Bi(t);if(t.$$typeof===w)return vt(t)}throw Error(r(438,String(t)))}function Uo(t){var a=null,i=Ee.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var l=Ee.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=xu(),Ee.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),l=0;l<t;l++)i[l]=ae;return a.index++,i}function Pa(t,a){return typeof a=="function"?a(t):a}function Cu(t){var a=Qe();return Po(a,$e,t)}function Po(t,a,i){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var f=t.baseQueue,h=l.pending;if(h!==null){if(f!==null){var g=f.next;f.next=h.next,h.next=g}a.baseQueue=f=h,l.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{a=f.next;var _=g=null,S=null,R=a,U=!1;do{var B=R.lane&-536870913;if(B!==R.lane?(Ae&B)===B:(on&B)===B){var j=R.revertLane;if(j===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),B===Mr&&(U=!0);else if((on&j)===j){R=R.next,j===Mr&&(U=!0);continue}else B={lane:0,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(_=S=B,g=h):S=S.next=B,Ee.lanes|=j,vn|=j;B=R.action,Qn&&i(h,B),h=R.hasEagerState?R.eagerState:i(h,B)}else j={lane:B,revertLane:R.revertLane,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(_=S=j,g=h):S=S.next=j,Ee.lanes|=B,vn|=B;R=R.next}while(R!==null&&R!==a);if(S===null?g=h:S.next=_,!zt(h,t.memoizedState)&&(it=!0,U&&(i=Ur,i!==null)))throw i;t.memoizedState=h,t.baseState=g,t.baseQueue=S,l.lastRenderedState=h}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function zo(t){var a=Qe(),i=a.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=t;var l=i.dispatch,f=i.pending,h=a.memoizedState;if(f!==null){i.pending=null;var g=f=f.next;do h=t(h,g.action),g=g.next;while(g!==f);zt(h,a.memoizedState)||(it=!0),a.memoizedState=h,a.baseQueue===null&&(a.baseState=h),i.lastRenderedState=h}return[h,l]}function Om(t,a,i){var l=Ee,f=Qe(),h=Ne;if(h){if(i===void 0)throw Error(r(407));i=i()}else i=a();var g=!zt(($e||f).memoizedState,i);if(g&&(f.memoizedState=i,it=!0),f=f.queue,Ho(xm.bind(null,l,f,t),[t]),f.getSnapshot!==a||g||Fe!==null&&Fe.memoizedState.tag&1){if(l.flags|=2048,Ir(9,Rm.bind(null,l,f,i,a),{destroy:void 0},null),Pe===null)throw Error(r(349));h||(on&60)!==0||Am(l,a,i)}return i}function Am(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=Ee.updateQueue,a===null?(a=xu(),Ee.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function Rm(t,a,i,l){a.value=i,a.getSnapshot=l,Nm(a)&&Cm(t)}function xm(t,a,i){return i(function(){Nm(a)&&Cm(t)})}function Nm(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!zt(t,i)}catch{return!0}}function Cm(t){var a=sn(t,2);a!==null&&Tt(a,t,2)}function Io(t){var a=Lt();if(typeof t=="function"){var i=t;if(t=i(),Qn){an(!0);try{i()}finally{an(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:t},a}function jm(t,a,i,l){return t.baseState=i,Po(t,$e,typeof l=="function"?l:Pa)}function z_(t,a,i,l,f){if(Lu(t))throw Error(r(485));if(t=a.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){h.listeners.push(g)}};re.T!==null?i(!0):h.isTransition=!1,l(h),i=a.pending,i===null?(h.next=a.pending=h,km(a,h)):(h.next=i.next,a.pending=i.next=h)}}function km(t,a){var i=a.action,l=a.payload,f=t.state;if(a.isTransition){var h=re.T,g={};re.T=g;try{var _=i(f,l),S=re.S;S!==null&&S(g,_),Lm(t,a,_)}catch(R){Bo(t,a,R)}finally{re.T=h}}else try{h=i(f,l),Lm(t,a,h)}catch(R){Bo(t,a,R)}}function Lm(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){$m(t,a,l)},function(l){return Bo(t,a,l)}):$m(t,a,i)}function $m(t,a,i){a.status="fulfilled",a.value=i,Dm(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,km(t,i)))}function Bo(t,a,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=i,Dm(a),a=a.next;while(a!==l)}t.action=null}function Dm(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Mm(t,a){return a}function Um(t,a){if(Ne){var i=Pe.formState;if(i!==null){e:{var l=Ee;if(Ne){if(dt){t:{for(var f=dt,h=Ta;f.nodeType!==8;){if(!h){f=null;break t}if(f=fa(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){dt=fa(f.nextSibling),l=f.data==="F!";break e}}Yn(l)}l=!1}l&&(a=i[0])}}return i=Lt(),i.memoizedState=i.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mm,lastRenderedState:a},i.queue=l,i=tp.bind(null,Ee,l),l.dispatch=i,l=Io(!1),h=Yo.bind(null,Ee,!1,l.queue),l=Lt(),f={state:a,dispatch:null,action:t,pending:null},l.queue=f,i=z_.bind(null,Ee,f,h,i),f.dispatch=i,l.memoizedState=t,[a,i,!1]}function Pm(t){var a=Qe();return zm(a,$e,t)}function zm(t,a,i){a=Po(t,a,Mm)[0],t=Cu(Pa)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?Bi(a):a;var l=Qe(),f=l.queue,h=f.dispatch;return i!==l.memoizedState&&(Ee.flags|=2048,Ir(9,I_.bind(null,f,i),{destroy:void 0},null)),[a,h,t]}function I_(t,a){t.action=a}function Im(t){var a=Qe(),i=$e;if(i!==null)return zm(a,i,t);Qe(),a=a.memoizedState,i=Qe();var l=i.queue.dispatch;return i.memoizedState=t,[a,l,!1]}function Ir(t,a,i,l){return t={tag:t,create:a,inst:i,deps:l,next:null},a=Ee.updateQueue,a===null&&(a=xu(),Ee.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,a.lastEffect=t),t}function Bm(){return Qe().memoizedState}function ju(t,a,i,l){var f=Lt();Ee.flags|=t,f.memoizedState=Ir(1|a,i,{destroy:void 0},l===void 0?null:l)}function ku(t,a,i,l){var f=Qe();l=l===void 0?null:l;var h=f.memoizedState.inst;$e!==null&&l!==null&&ko(l,$e.memoizedState.deps)?f.memoizedState=Ir(a,i,h,l):(Ee.flags|=t,f.memoizedState=Ir(1|a,i,h,l))}function Hm(t,a){ju(8390656,8,t,a)}function Ho(t,a){ku(2048,8,t,a)}function qm(t,a){return ku(4,2,t,a)}function Zm(t,a){return ku(4,4,t,a)}function Gm(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Vm(t,a,i){i=i!=null?i.concat([t]):null,ku(4,4,Gm.bind(null,a,t),i)}function qo(){}function Ym(t,a){var i=Qe();a=a===void 0?null:a;var l=i.memoizedState;return a!==null&&ko(a,l[1])?l[0]:(i.memoizedState=[t,a],t)}function Xm(t,a){var i=Qe();a=a===void 0?null:a;var l=i.memoizedState;if(a!==null&&ko(a,l[1]))return l[0];if(l=t(),Qn){an(!0);try{t()}finally{an(!1)}}return i.memoizedState=[l,a],l}function Zo(t,a,i){return i===void 0||(on&1073741824)!==0?t.memoizedState=a:(t.memoizedState=i,t=Qp(),Ee.lanes|=t,vn|=t,i)}function Fm(t,a,i,l){return zt(i,a)?i:Dr.current!==null?(t=Zo(t,i,l),zt(t,a)||(it=!0),t):(on&42)===0?(it=!0,t.memoizedState=i):(t=Qp(),Ee.lanes|=t,vn|=t,a)}function Qm(t,a,i,l,f){var h=F.p;F.p=h!==0&&8>h?h:8;var g=re.T,_={};re.T=_,Yo(t,!1,a,i);try{var S=f(),R=re.S;if(R!==null&&R(_,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var U=M_(S,l);Hi(t,a,U,qt(t))}else Hi(t,a,l,qt(t))}catch(B){Hi(t,a,{then:function(){},status:"rejected",reason:B},qt())}finally{F.p=h,re.T=g}}function B_(){}function Go(t,a,i,l){if(t.tag!==5)throw Error(r(476));var f=Km(t).queue;Qm(t,f,a,le,i===null?B_:function(){return Jm(t),i(l)})}function Km(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:le},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Jm(t){var a=Km(t).next.queue;Hi(t,a,{},qt())}function Vo(){return vt(ls)}function Wm(){return Qe().memoizedState}function ep(){return Qe().memoizedState}function H_(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=qt();t=hn(i);var l=mn(a,t,i);l!==null&&(Tt(l,a,i),Gi(l,a,i)),a={cache:No()},t.payload=a;return}a=a.return}}function q_(t,a,i){var l=qt();i={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Lu(t)?ap(a,i):(i=Eo(t,a,i,l),i!==null&&(Tt(i,t,l),np(i,a,l)))}function tp(t,a,i){var l=qt();Hi(t,a,i,l)}function Hi(t,a,i,l){var f={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Lu(t))ap(a,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=a.lastRenderedReducer,h!==null))try{var g=a.lastRenderedState,_=h(g,i);if(f.hasEagerState=!0,f.eagerState=_,zt(_,g))return yu(t,a,f,0),Pe===null&&pu(),!1}catch{}finally{}if(i=Eo(t,a,f,l),i!==null)return Tt(i,t,l),np(i,a,l),!0}return!1}function Yo(t,a,i,l){if(l={lane:2,revertLane:Mc(),action:l,hasEagerState:!1,eagerState:null,next:null},Lu(t)){if(a)throw Error(r(479))}else a=Eo(t,i,l,2),a!==null&&Tt(a,t,2)}function Lu(t){var a=t.alternate;return t===Ee||a!==null&&a===Ee}function ap(t,a){Pr=Au=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function np(t,a,i){if((i&4194176)!==0){var l=a.lanes;l&=t.pendingLanes,i|=l,a.lanes=i,mh(t,i)}}var Aa={readContext:vt,use:Nu,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe};Aa.useCacheRefresh=Xe,Aa.useMemoCache=Xe,Aa.useHostTransitionStatus=Xe,Aa.useFormState=Xe,Aa.useActionState=Xe,Aa.useOptimistic=Xe;var Kn={readContext:vt,use:Nu,useCallback:function(t,a){return Lt().memoizedState=[t,a===void 0?null:a],t},useContext:vt,useEffect:Hm,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,ju(4194308,4,Gm.bind(null,a,t),i)},useLayoutEffect:function(t,a){return ju(4194308,4,t,a)},useInsertionEffect:function(t,a){ju(4,2,t,a)},useMemo:function(t,a){var i=Lt();a=a===void 0?null:a;var l=t();if(Qn){an(!0);try{t()}finally{an(!1)}}return i.memoizedState=[l,a],l},useReducer:function(t,a,i){var l=Lt();if(i!==void 0){var f=i(a);if(Qn){an(!0);try{i(a)}finally{an(!1)}}}else f=a;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=q_.bind(null,Ee,t),[l.memoizedState,t]},useRef:function(t){var a=Lt();return t={current:t},a.memoizedState=t},useState:function(t){t=Io(t);var a=t.queue,i=tp.bind(null,Ee,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:qo,useDeferredValue:function(t,a){var i=Lt();return Zo(i,t,a)},useTransition:function(){var t=Io(!1);return t=Qm.bind(null,Ee,t.queue,!0,!1),Lt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var l=Ee,f=Lt();if(Ne){if(i===void 0)throw Error(r(407));i=i()}else{if(i=a(),Pe===null)throw Error(r(349));(Ae&60)!==0||Am(l,a,i)}f.memoizedState=i;var h={value:i,getSnapshot:a};return f.queue=h,Hm(xm.bind(null,l,h,t),[t]),l.flags|=2048,Ir(9,Rm.bind(null,l,h,i,a),{destroy:void 0},null),i},useId:function(){var t=Lt(),a=Pe.identifierPrefix;if(Ne){var i=Ma,l=Da;i=(l&~(1<<32-Pt(l)-1)).toString(32)+i,a=":"+a+"R"+i,i=Ru++,0<i&&(a+="H"+i.toString(32)),a+=":"}else i=U_++,a=":"+a+"r"+i.toString(32)+":";return t.memoizedState=a},useCacheRefresh:function(){return Lt().memoizedState=H_.bind(null,Ee)}};Kn.useMemoCache=Uo,Kn.useHostTransitionStatus=Vo,Kn.useFormState=Um,Kn.useActionState=Um,Kn.useOptimistic=function(t){var a=Lt();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=Yo.bind(null,Ee,!0,i),i.dispatch=a,[t,a]};var cn={readContext:vt,use:Nu,useCallback:Ym,useContext:vt,useEffect:Ho,useImperativeHandle:Vm,useInsertionEffect:qm,useLayoutEffect:Zm,useMemo:Xm,useReducer:Cu,useRef:Bm,useState:function(){return Cu(Pa)},useDebugValue:qo,useDeferredValue:function(t,a){var i=Qe();return Fm(i,$e.memoizedState,t,a)},useTransition:function(){var t=Cu(Pa)[0],a=Qe().memoizedState;return[typeof t=="boolean"?t:Bi(t),a]},useSyncExternalStore:Om,useId:Wm};cn.useCacheRefresh=ep,cn.useMemoCache=Uo,cn.useHostTransitionStatus=Vo,cn.useFormState=Pm,cn.useActionState=Pm,cn.useOptimistic=function(t,a){var i=Qe();return jm(i,$e,t,a)};var Jn={readContext:vt,use:Nu,useCallback:Ym,useContext:vt,useEffect:Ho,useImperativeHandle:Vm,useInsertionEffect:qm,useLayoutEffect:Zm,useMemo:Xm,useReducer:zo,useRef:Bm,useState:function(){return zo(Pa)},useDebugValue:qo,useDeferredValue:function(t,a){var i=Qe();return $e===null?Zo(i,t,a):Fm(i,$e.memoizedState,t,a)},useTransition:function(){var t=zo(Pa)[0],a=Qe().memoizedState;return[typeof t=="boolean"?t:Bi(t),a]},useSyncExternalStore:Om,useId:Wm};Jn.useCacheRefresh=ep,Jn.useMemoCache=Uo,Jn.useHostTransitionStatus=Vo,Jn.useFormState=Im,Jn.useActionState=Im,Jn.useOptimistic=function(t,a){var i=Qe();return $e!==null?jm(i,$e,t,a):(i.baseState=t,[t,i.queue.dispatch])};function Xo(t,a,i,l){a=t.memoizedState,i=i(l,a),i=i==null?a:ve({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Fo={isMounted:function(t){return(t=t._reactInternals)?q(t)===t:!1},enqueueSetState:function(t,a,i){t=t._reactInternals;var l=qt(),f=hn(l);f.payload=a,i!=null&&(f.callback=i),a=mn(t,f,l),a!==null&&(Tt(a,t,l),Gi(a,t,l))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var l=qt(),f=hn(l);f.tag=1,f.payload=a,i!=null&&(f.callback=i),a=mn(t,f,l),a!==null&&(Tt(a,t,l),Gi(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=qt(),l=hn(i);l.tag=2,a!=null&&(l.callback=a),a=mn(t,l,i),a!==null&&(Tt(a,t,i),Gi(a,t,i))}};function rp(t,a,i,l,f,h,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,h,g):a.prototype&&a.prototype.isPureReactComponent?!Ni(i,l)||!Ni(f,h):!0}function ip(t,a,i,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,l),a.state!==t&&Fo.enqueueReplaceState(a,a.state,null)}function Wn(t,a){var i=a;if("ref"in a){i={};for(var l in a)l!=="ref"&&(i[l]=a[l])}if(t=t.defaultProps){i===a&&(i=ve({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}var $u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function sp(t){$u(t)}function up(t){console.error(t)}function lp(t){$u(t)}function Du(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function op(t,a,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qo(t,a,i){return i=hn(i),i.tag=3,i.payload={element:null},i.callback=function(){Du(t,a)},i}function cp(t){return t=hn(t),t.tag=3,t}function fp(t,a,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var h=l.value;t.payload=function(){return f(h)},t.callback=function(){op(a,i,l)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){op(a,i,l),typeof f!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function Z_(t,a,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=i.alternate,a!==null&&Zi(a,i,f,!0),i=ta.current,i!==null){switch(i.tag){case 13:return Oa===null?jc():i.alternate===null&&Ve===0&&(Ve=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===Ao?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([l]):a.add(l),Lc(t,l,f)),!1;case 22:return i.flags|=65536,l===Ao?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([l]):i.add(l)),Lc(t,l,f)),!1}throw Error(r(435,i.tag))}return Lc(t,l,f),jc(),!1}if(Ne)return a=ta.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,l!==Oo&&(t=Error(r(422),{cause:l}),Li(Jt(t,i)))):(l!==Oo&&(a=Error(r(423),{cause:l}),Li(Jt(a,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Jt(l,i),f=Qo(t.stateNode,l,f),fc(t,f),Ve!==4&&(Ve=2)),!1;var h=Error(r(520),{cause:l});if(h=Jt(h,i),Wi===null?Wi=[h]:Wi.push(h),Ve!==4&&(Ve=2),a===null)return!0;l=Jt(l,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=Qo(i.stateNode,l,t),fc(i,t),!1;case 1:if(a=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(_n===null||!_n.has(h))))return i.flags|=65536,f&=-f,i.lanes|=f,f=cp(f),fp(f,t,i,l),fc(i,f),!1}i=i.return}while(i!==null);return!1}var dp=Error(r(461)),it=!1;function ht(t,a,i,l){a.child=t===null?gm(a,null,i,l):Xn(a,t.child,i,l)}function hp(t,a,i,l,f){i=i.render;var h=a.ref;if("ref"in l){var g={};for(var _ in l)_!=="ref"&&(g[_]=l[_])}else g=l;return tr(a),l=Lo(t,a,i,g,h,f),_=$o(),t!==null&&!it?(Do(t,a,f),za(t,a,f)):(Ne&&_&&So(a),a.flags|=1,ht(t,a,l,f),a.child)}function mp(t,a,i,l,f){if(t===null){var h=i.type;return typeof h=="function"&&!vc(h)&&h.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=h,pp(t,a,h,l,f)):(t=Iu(i.type,null,l,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(h=t.child,!ic(t,f)){var g=h.memoizedProps;if(i=i.compare,i=i!==null?i:Ni,i(g,l)&&t.ref===a.ref)return za(t,a,f)}return a.flags|=1,t=bn(h,l),t.ref=a.ref,t.return=a,a.child=t}function pp(t,a,i,l,f){if(t!==null){var h=t.memoizedProps;if(Ni(h,l)&&t.ref===a.ref)if(it=!1,a.pendingProps=l=h,ic(t,f))(t.flags&131072)!==0&&(it=!0);else return a.lanes=t.lanes,za(t,a,f)}return Ko(t,a,i,l,f)}function yp(t,a,i){var l=a.pendingProps,f=l.children,h=(a.stateNode._pendingVisibility&2)!==0,g=t!==null?t.memoizedState:null;if(qi(t,a),l.mode==="hidden"||h){if((a.flags&128)!==0){if(l=g!==null?g.baseLanes|i:i,t!==null){for(f=a.child=t.child,h=0;f!==null;)h=h|f.lanes|f.childLanes,f=f.sibling;a.childLanes=h&~l}else a.childLanes=0,a.child=null;return gp(t,a,l,i)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ou(a,g!==null?g.cachePool:null),g!==null?bm(a,g):Ro(),vm(a);else return a.lanes=a.childLanes=536870912,gp(t,a,g!==null?g.baseLanes|i:i,i)}else g!==null?(Ou(a,g.cachePool),bm(a,g),ln(),a.memoizedState=null):(t!==null&&Ou(a,null),Ro(),ln());return ht(t,a,f,i),a.child}function gp(t,a,i,l){var f=jo();return f=f===null?null:{parent:tt._currentValue,pool:f},a.memoizedState={baseLanes:i,cachePool:f},t!==null&&Ou(a,null),Ro(),vm(a),t!==null&&Zi(t,a,l,!0),null}function qi(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=2097664);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(t===null||t.ref!==i)&&(a.flags|=2097664)}}function Ko(t,a,i,l,f){return tr(a),i=Lo(t,a,i,l,void 0,f),l=$o(),t!==null&&!it?(Do(t,a,f),za(t,a,f)):(Ne&&l&&So(a),a.flags|=1,ht(t,a,i,f),a.child)}function bp(t,a,i,l,f,h){return tr(a),a.updateQueue=null,i=Tm(a,l,i,f),Sm(t),l=$o(),t!==null&&!it?(Do(t,a,h),za(t,a,h)):(Ne&&l&&So(a),a.flags|=1,ht(t,a,i,h),a.child)}function vp(t,a,i,l,f){if(tr(a),a.stateNode===null){var h=jr,g=i.contextType;typeof g=="object"&&g!==null&&(h=vt(g)),h=new i(l,h),a.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Fo,a.stateNode=h,h._reactInternals=a,h=a.stateNode,h.props=l,h.state=a.memoizedState,h.refs={},oc(a),g=i.contextType,h.context=typeof g=="object"&&g!==null?vt(g):jr,h.state=a.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Xo(a,i,g,l),h.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(g=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),g!==h.state&&Fo.enqueueReplaceState(h,h.state,null),Yi(a,l,h,f),Vi(),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){h=a.stateNode;var _=a.memoizedProps,S=Wn(i,_);h.props=S;var R=h.context,U=i.contextType;g=jr,typeof U=="object"&&U!==null&&(g=vt(U));var B=i.getDerivedStateFromProps;U=typeof B=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,U||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||R!==g)&&ip(a,h,l,g),dn=!1;var j=a.memoizedState;h.state=j,Yi(a,l,h,f),Vi(),R=a.memoizedState,_||j!==R||dn?(typeof B=="function"&&(Xo(a,i,B,l),R=a.memoizedState),(S=dn||rp(a,i,S,l,j,R,g))?(U||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(a.flags|=4194308)):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=R),h.props=l,h.state=R,h.context=g,l=S):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{h=a.stateNode,cc(t,a),g=a.memoizedProps,U=Wn(i,g),h.props=U,B=a.pendingProps,j=h.context,R=i.contextType,S=jr,typeof R=="object"&&R!==null&&(S=vt(R)),_=i.getDerivedStateFromProps,(R=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==B||j!==S)&&ip(a,h,l,S),dn=!1,j=a.memoizedState,h.state=j,Yi(a,l,h,f),Vi();var M=a.memoizedState;g!==B||j!==M||dn||t!==null&&t.dependencies!==null&&Mu(t.dependencies)?(typeof _=="function"&&(Xo(a,i,_,l),M=a.memoizedState),(U=dn||rp(a,i,U,l,j,M,S)||t!==null&&t.dependencies!==null&&Mu(t.dependencies))?(R||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,M,S),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,M,S)),typeof h.componentDidUpdate=="function"&&(a.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===t.memoizedProps&&j===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&j===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=M),h.props=l,h.state=M,h.context=S,l=U):(typeof h.componentDidUpdate!="function"||g===t.memoizedProps&&j===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&j===t.memoizedState||(a.flags|=1024),l=!1)}return h=l,qi(t,a),l=(a.flags&128)!==0,h||l?(h=a.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:h.render(),a.flags|=1,t!==null&&l?(a.child=Xn(a,t.child,null,f),a.child=Xn(a,null,i,f)):ht(t,a,i,f),a.memoizedState=h.state,t=a.child):t=za(t,a,f),t}function _p(t,a,i,l){return ki(),a.flags|=256,ht(t,a,i,l),a.child}var Jo={dehydrated:null,treeContext:null,retryLane:0};function Wo(t){return{baseLanes:t,cachePool:Em()}}function ec(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=ia),t}function wp(t,a,i){var l=a.pendingProps,f=!1,h=(a.flags&128)!==0,g;if((g=h)||(g=t!==null&&t.memoizedState===null?!1:(et.current&2)!==0),g&&(f=!0,a.flags&=-129),g=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ne){if(f?un(a):ln(),Ne){var _=dt,S;if(S=_){e:{for(S=_,_=Ta;S.nodeType!==8;){if(!_){_=null;break e}if(S=fa(S.nextSibling),S===null){_=null;break e}}_=S}_!==null?(a.memoizedState={dehydrated:_,treeContext:Gn!==null?{id:Da,overflow:Ma}:null,retryLane:536870912},S=ra(18,null,null,0),S.stateNode=_,S.return=a,a.child=S,St=a,dt=null,S=!0):S=!1}S||Yn(a)}if(_=a.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return _.data==="$!"?a.lanes=16:a.lanes=536870912,null;Ua(a)}return _=l.children,l=l.fallback,f?(ln(),f=a.mode,_=ac({mode:"hidden",children:_},f),l=nr(l,f,i,null),_.return=a,l.return=a,_.sibling=l,a.child=_,f=a.child,f.memoizedState=Wo(i),f.childLanes=ec(t,g,i),a.memoizedState=Jo,l):(un(a),tc(a,_))}if(S=t.memoizedState,S!==null&&(_=S.dehydrated,_!==null)){if(h)a.flags&256?(un(a),a.flags&=-257,a=nc(t,a,i)):a.memoizedState!==null?(ln(),a.child=t.child,a.flags|=128,a=null):(ln(),f=l.fallback,_=a.mode,l=ac({mode:"visible",children:l.children},_),f=nr(f,_,i,null),f.flags|=2,l.return=a,f.return=a,l.sibling=f,a.child=l,Xn(a,t.child,null,i),l=a.child,l.memoizedState=Wo(i),l.childLanes=ec(t,g,i),a.memoizedState=Jo,a=f);else if(un(a),_.data==="$!"){if(g=_.nextSibling&&_.nextSibling.dataset,g)var R=g.dgst;g=R,l=Error(r(419)),l.stack="",l.digest=g,Li({value:l,source:null,stack:null}),a=nc(t,a,i)}else if(it||Zi(t,a,i,!1),g=(i&t.childLanes)!==0,it||g){if(g=Pe,g!==null){if(l=i&-i,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(g.suspendedLanes|i))!==0?0:l,l!==0&&l!==S.retryLane)throw S.retryLane=l,sn(t,l),Tt(g,t,l),dp}_.data==="$?"||jc(),a=nc(t,a,i)}else _.data==="$?"?(a.flags|=128,a.child=t.child,a=i0.bind(null,t),_._reactRetry=a,a=null):(t=S.treeContext,dt=fa(_.nextSibling),St=a,Ne=!0,oa=null,Ta=!1,t!==null&&(Wt[ea++]=Da,Wt[ea++]=Ma,Wt[ea++]=Gn,Da=t.id,Ma=t.overflow,Gn=a),a=tc(a,l.children),a.flags|=4096);return a}return f?(ln(),f=l.fallback,_=a.mode,S=t.child,R=S.sibling,l=bn(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&31457280,R!==null?f=bn(R,f):(f=nr(f,_,i,null),f.flags|=2),f.return=a,l.return=a,l.sibling=f,a.child=l,l=f,f=a.child,_=t.child.memoizedState,_===null?_=Wo(i):(S=_.cachePool,S!==null?(R=tt._currentValue,S=S.parent!==R?{parent:R,pool:R}:S):S=Em(),_={baseLanes:_.baseLanes|i,cachePool:S}),f.memoizedState=_,f.childLanes=ec(t,g,i),a.memoizedState=Jo,l):(un(a),i=t.child,t=i.sibling,i=bn(i,{mode:"visible",children:l.children}),i.return=a,i.sibling=null,t!==null&&(g=a.deletions,g===null?(a.deletions=[t],a.flags|=16):g.push(t)),a.child=i,a.memoizedState=null,i)}function tc(t,a){return a=ac({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function ac(t,a){return Yp(t,a,0,null)}function nc(t,a,i){return Xn(a,t.child,null,i),t=tc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Ep(t,a,i){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),uc(t.return,a,i)}function rc(t,a,i,l,f){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=i,h.tailMode=f)}function Sp(t,a,i){var l=a.pendingProps,f=l.revealOrder,h=l.tail;if(ht(t,a,l.children,i),l=et.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ep(t,i,a);else if(t.tag===19)Ep(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Le(et,l),f){case"forwards":for(i=a.child,f=null;i!==null;)t=i.alternate,t!==null&&Tu(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=a.child,a.child=null):(f=i.sibling,i.sibling=null),rc(a,!1,f,i,h);break;case"backwards":for(i=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Tu(t)===null){a.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}rc(a,!0,i,null,h);break;case"together":rc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function za(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),vn|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(Zi(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,i=bn(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=bn(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function ic(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Mu(t)))}function G_(t,a,i){switch(a.tag){case 3:Js(a,a.stateNode.containerInfo),fn(a,tt,t.memoizedState.cache),ki();break;case 27:case 5:Xl(a);break;case 4:Js(a,a.stateNode.containerInfo);break;case 10:fn(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(un(a),a.flags|=128,null):(i&a.child.childLanes)!==0?wp(t,a,i):(un(a),t=za(t,a,i),t!==null?t.sibling:null);un(a);break;case 19:var f=(t.flags&128)!==0;if(l=(i&a.childLanes)!==0,l||(Zi(t,a,i,!1),l=(i&a.childLanes)!==0),f){if(l)return Sp(t,a,i);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Le(et,et.current),l)break;return null;case 22:case 23:return a.lanes=0,yp(t,a,i);case 24:fn(a,tt,t.memoizedState.cache)}return za(t,a,i)}function Tp(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)it=!0;else{if(!ic(t,i)&&(a.flags&128)===0)return it=!1,G_(t,a,i);it=(t.flags&131072)!==0}else it=!1,Ne&&(a.flags&1048576)!==0&&lm(a,vu,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var l=a.elementType,f=l._init;if(l=f(l._payload),a.type=l,typeof l=="function")vc(l)?(t=Wn(l,t),a.tag=1,a=vp(null,a,l,t,i)):(a.tag=0,a=Ko(null,a,l,t,i));else{if(l!=null){if(f=l.$$typeof,f===E){a.tag=11,a=hp(null,a,l,t,i);break e}else if(f===k){a.tag=14,a=mp(null,a,l,t,i);break e}}throw a=te(l)||l,Error(r(306,a,""))}}return a;case 0:return Ko(t,a,a.type,a.pendingProps,i);case 1:return l=a.type,f=Wn(l,a.pendingProps),vp(t,a,l,f,i);case 3:e:{if(Js(a,a.stateNode.containerInfo),t===null)throw Error(r(387));var h=a.pendingProps;f=a.memoizedState,l=f.element,cc(t,a),Yi(a,h,null,i);var g=a.memoizedState;if(h=g.cache,fn(a,tt,h),h!==f.cache&&lc(a,[tt],i,!0),Vi(),h=g.element,f.isDehydrated)if(f={element:h,isDehydrated:!1,cache:g.cache},a.updateQueue.baseState=f,a.memoizedState=f,a.flags&256){a=_p(t,a,h,i);break e}else if(h!==l){l=Jt(Error(r(424)),a),Li(l),a=_p(t,a,h,i);break e}else for(dt=fa(a.stateNode.containerInfo.firstChild),St=a,Ne=!0,oa=null,Ta=!0,i=gm(a,null,h,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ki(),h===l){a=za(t,a,i);break e}ht(t,a,h,i)}a=a.child}return a;case 26:return qi(t,a),t===null?(i=Ry(a.type,null,a.pendingProps,null))?a.memoizedState=i:Ne||(i=a.type,t=a.pendingProps,l=Ju(tn.current).createElement(i),l[bt]=a,l[jt]=t,mt(l,i,t),rt(l),a.stateNode=l):a.memoizedState=Ry(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Xl(a),t===null&&Ne&&(l=a.stateNode=Ty(a.type,a.pendingProps,tn.current),St=a,Ta=!0,dt=fa(l.firstChild)),l=a.pendingProps.children,t!==null||Ne?ht(t,a,l,i):a.child=Xn(a,null,l,i),qi(t,a),a.child;case 5:return t===null&&Ne&&((f=l=dt)&&(l=w0(l,a.type,a.pendingProps,Ta),l!==null?(a.stateNode=l,St=a,dt=fa(l.firstChild),Ta=!1,f=!0):f=!1),f||Yn(a)),Xl(a),f=a.type,h=a.pendingProps,g=t!==null?t.memoizedProps:null,l=h.children,Gc(f,h)?l=null:g!==null&&Gc(f,g)&&(a.flags|=32),a.memoizedState!==null&&(f=Lo(t,a,P_,null,null,i),ls._currentValue=f),qi(t,a),ht(t,a,l,i),a.child;case 6:return t===null&&Ne&&((t=i=dt)&&(i=E0(i,a.pendingProps,Ta),i!==null?(a.stateNode=i,St=a,dt=null,t=!0):t=!1),t||Yn(a)),null;case 13:return wp(t,a,i);case 4:return Js(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Xn(a,null,l,i):ht(t,a,l,i),a.child;case 11:return hp(t,a,a.type,a.pendingProps,i);case 7:return ht(t,a,a.pendingProps,i),a.child;case 8:return ht(t,a,a.pendingProps.children,i),a.child;case 12:return ht(t,a,a.pendingProps.children,i),a.child;case 10:return l=a.pendingProps,fn(a,a.type,l.value),ht(t,a,l.children,i),a.child;case 9:return f=a.type._context,l=a.pendingProps.children,tr(a),f=vt(f),l=l(f),a.flags|=1,ht(t,a,l,i),a.child;case 14:return mp(t,a,a.type,a.pendingProps,i);case 15:return pp(t,a,a.type,a.pendingProps,i);case 19:return Sp(t,a,i);case 22:return yp(t,a,i);case 24:return tr(a),l=vt(tt),t===null?(f=jo(),f===null&&(f=Pe,h=No(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=i),f=h),a.memoizedState={parent:l,cache:f},oc(a),fn(a,tt,f)):((t.lanes&i)!==0&&(cc(t,a),Yi(a,null,null,i),Vi()),f=t.memoizedState,h=a.memoizedState,f.parent!==l?(f={parent:l,cache:l},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),fn(a,tt,l)):(l=h.cache,fn(a,tt,l),l!==f.cache&&lc(a,[tt],i,!0))),ht(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var sc=xe(null),er=null,Ia=null;function fn(t,a,i){Le(sc,a._currentValue),a._currentValue=i}function Ba(t){t._currentValue=sc.current,Ie(sc)}function uc(t,a,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===i)break;t=t.return}}function lc(t,a,i,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var g=f.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=f;for(var S=0;S<a.length;S++)if(_.context===a[S]){h.lanes|=i,_=h.alternate,_!==null&&(_.lanes|=i),uc(h.return,i,t),l||(g=null);break e}h=_.next}}else if(f.tag===18){if(g=f.return,g===null)throw Error(r(341));g.lanes|=i,h=g.alternate,h!==null&&(h.lanes|=i),uc(g,i,t),g=null}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}}function Zi(t,a,i,l){t=null;for(var f=a,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var g=f.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var _=f.type;zt(f.pendingProps.value,g.value)||(t!==null?t.push(_):t=[_])}}else if(f===Ks.current){if(g=f.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(ls):t=[ls])}f=f.return}t!==null&&lc(a,t,i,l),a.flags|=262144}function Mu(t){for(t=t.firstContext;t!==null;){if(!zt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function tr(t){er=t,Ia=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vt(t){return Op(er,t)}function Uu(t,a){return er===null&&tr(t),Op(t,a)}function Op(t,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},Ia===null){if(t===null)throw Error(r(308));Ia=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ia=Ia.next=a;return i}var dn=!1;function oc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cc(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function mn(t,a,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var f=l.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),l.pending=a,a=gu(t),sm(t,null,i),a}return yu(t,l,a,i),gu(t)}function Gi(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194176)!==0)){var l=a.lanes;l&=t.pendingLanes,i|=l,a.lanes=i,mh(t,i)}}function fc(t,a){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?f=h=g:h=h.next=g,i=i.next}while(i!==null);h===null?f=h=a:h=h.next=a}else f=h=a;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}var dc=!1;function Vi(){if(dc){var t=Ur;if(t!==null)throw t}}function Yi(t,a,i,l){dc=!1;var f=t.updateQueue;dn=!1;var h=f.firstBaseUpdate,g=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var S=_,R=S.next;S.next=null,g===null?h=R:g.next=R,g=S;var U=t.alternate;U!==null&&(U=U.updateQueue,_=U.lastBaseUpdate,_!==g&&(_===null?U.firstBaseUpdate=R:_.next=R,U.lastBaseUpdate=S))}if(h!==null){var B=f.baseState;g=0,U=R=S=null,_=h;do{var j=_.lane&-536870913,M=j!==_.lane;if(M?(Ae&j)===j:(l&j)===j){j!==0&&j===Mr&&(dc=!0),U!==null&&(U=U.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var se=t,me=_;j=a;var Ye=i;switch(me.tag){case 1:if(se=me.payload,typeof se=="function"){B=se.call(Ye,B,j);break e}B=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=me.payload,j=typeof se=="function"?se.call(Ye,B,j):se,j==null)break e;B=ve({},B,j);break e;case 2:dn=!0}}j=_.callback,j!==null&&(t.flags|=64,M&&(t.flags|=8192),M=f.callbacks,M===null?f.callbacks=[j]:M.push(j))}else M={lane:j,tag:_.tag,payload:_.payload,callback:_.callback,next:null},U===null?(R=U=M,S=B):U=U.next=M,g|=j;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;M=_,_=M.next,M.next=null,f.lastBaseUpdate=M,f.shared.pending=null}}while(!0);U===null&&(S=B),f.baseState=S,f.firstBaseUpdate=R,f.lastBaseUpdate=U,h===null&&(f.shared.lanes=0),vn|=g,t.lanes=g,t.memoizedState=B}}function Ap(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function Rp(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Ap(i[t],a)}function Xi(t,a){try{var i=a.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&t)===t){l=void 0;var h=i.create,g=i.inst;l=h(),g.destroy=l}i=i.next}while(i!==f)}}catch(_){Ue(a,a.return,_)}}function pn(t,a,i){try{var l=a.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var h=f.next;l=h;do{if((l.tag&t)===t){var g=l.inst,_=g.destroy;if(_!==void 0){g.destroy=void 0,f=a;var S=i;try{_()}catch(R){Ue(f,S,R)}}}l=l.next}while(l!==h)}}catch(R){Ue(a,a.return,R)}}function xp(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{Rp(a,i)}catch(l){Ue(t,t.return,l)}}}function Np(t,a,i){i.props=Wn(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){Ue(t,a,l)}}function ar(t,a){try{var i=t.ref;if(i!==null){var l=t.stateNode;switch(t.tag){case 26:case 27:case 5:var f=l;break;default:f=l}typeof i=="function"?t.refCleanup=i(f):i.current=f}}catch(h){Ue(t,a,h)}}function It(t,a){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){Ue(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Ue(t,a,f)}else i.current=null}function Cp(t){var a=t.type,i=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){Ue(t,t.return,f)}}function jp(t,a,i){try{var l=t.stateNode;y0(l,t.type,i,a),l[jt]=a}catch(f){Ue(t,t.return,f)}}function kp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function hc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mc(t,a,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?i.nodeType===8?i.parentNode.insertBefore(t,a):i.insertBefore(t,a):(i.nodeType===8?(a=i.parentNode,a.insertBefore(t,i)):(a=i,a.appendChild(t)),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=Ku));else if(l!==4&&l!==27&&(t=t.child,t!==null))for(mc(t,a,i),t=t.sibling;t!==null;)mc(t,a,i),t=t.sibling}function Pu(t,a,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?i.insertBefore(t,a):i.appendChild(t);else if(l!==4&&l!==27&&(t=t.child,t!==null))for(Pu(t,a,i),t=t.sibling;t!==null;)Pu(t,a,i),t=t.sibling}var Ha=!1,Ge=!1,pc=!1,Lp=typeof WeakSet=="function"?WeakSet:Set,st=null,$p=!1;function V_(t,a){if(t=t.containerInfo,qc=rl,t=Kh(t),go(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var g=0,_=-1,S=-1,R=0,U=0,B=t,j=null;t:for(;;){for(var M;B!==i||f!==0&&B.nodeType!==3||(_=g+f),B!==h||l!==0&&B.nodeType!==3||(S=g+l),B.nodeType===3&&(g+=B.nodeValue.length),(M=B.firstChild)!==null;)j=B,B=M;for(;;){if(B===t)break t;if(j===i&&++R===f&&(_=g),j===h&&++U===l&&(S=g),(M=B.nextSibling)!==null)break;B=j,j=B.parentNode}B=M}i=_===-1||S===-1?null:{start:_,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(Zc={focusedElem:t,selectionRange:i},rl=!1,st=a;st!==null;)if(a=st,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,st=t;else for(;st!==null;){switch(a=st,h=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,i=a,f=h.memoizedProps,h=h.memoizedState,l=i.stateNode;try{var se=Wn(i.type,f,i.elementType===i.type);t=l.getSnapshotBeforeUpdate(se,h),l.__reactInternalSnapshotBeforeUpdate=t}catch(me){Ue(i,i.return,me)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,i=t.nodeType,i===9)Xc(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,st=t;break}st=a.return}return se=$p,$p=!1,se}function Dp(t,a,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Za(t,i),l&4&&Xi(5,i);break;case 1:if(Za(t,i),l&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(_){Ue(i,i.return,_)}else{var f=Wn(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Ue(i,i.return,_)}}l&64&&xp(i),l&512&&ar(i,i.return);break;case 3:if(Za(t,i),l&64&&(l=i.updateQueue,l!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Rp(l,t)}catch(_){Ue(i,i.return,_)}}break;case 26:Za(t,i),l&512&&ar(i,i.return);break;case 27:case 5:Za(t,i),a===null&&l&4&&Cp(i),l&512&&ar(i,i.return);break;case 12:Za(t,i);break;case 13:Za(t,i),l&4&&Pp(t,i);break;case 22:if(f=i.memoizedState!==null||Ha,!f){a=a!==null&&a.memoizedState!==null||Ge;var h=Ha,g=Ge;Ha=f,(Ge=a)&&!g?yn(t,i,(i.subtreeFlags&8772)!==0):Za(t,i),Ha=h,Ge=g}l&512&&(i.memoizedProps.mode==="manual"?ar(i,i.return):It(i,i.return));break;default:Za(t,i)}}function Mp(t){var a=t.alternate;a!==null&&(t.alternate=null,Mp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&eo(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ke=null,Bt=!1;function qa(t,a,i){for(i=i.child;i!==null;)Up(t,a,i),i=i.sibling}function Up(t,a,i){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(gi,i)}catch{}switch(i.tag){case 26:Ge||It(i,a),qa(t,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ge||It(i,a);var l=Ke,f=Bt;for(Ke=i.stateNode,qa(t,a,i),i=i.stateNode,a=i.attributes;a.length;)i.removeAttributeNode(a[0]);eo(i),Ke=l,Bt=f;break;case 5:Ge||It(i,a);case 6:f=Ke;var h=Bt;if(Ke=null,qa(t,a,i),Ke=f,Bt=h,Ke!==null)if(Bt)try{t=Ke,l=i.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)}catch(g){Ue(i,a,g)}else try{Ke.removeChild(i.stateNode)}catch(g){Ue(i,a,g)}break;case 18:Ke!==null&&(Bt?(a=Ke,i=i.stateNode,a.nodeType===8?Yc(a.parentNode,i):a.nodeType===1&&Yc(a,i),ds(a)):Yc(Ke,i.stateNode));break;case 4:l=Ke,f=Bt,Ke=i.stateNode.containerInfo,Bt=!0,qa(t,a,i),Ke=l,Bt=f;break;case 0:case 11:case 14:case 15:Ge||pn(2,i,a),Ge||pn(4,i,a),qa(t,a,i);break;case 1:Ge||(It(i,a),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Np(i,a,l)),qa(t,a,i);break;case 21:qa(t,a,i);break;case 22:Ge||It(i,a),Ge=(l=Ge)||i.memoizedState!==null,qa(t,a,i),Ge=l;break;default:qa(t,a,i)}}function Pp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ds(t)}catch(i){Ue(a,a.return,i)}}function Y_(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Lp),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Lp),a;default:throw Error(r(435,t.tag))}}function yc(t,a){var i=Y_(t);a.forEach(function(l){var f=s0.bind(null,t,l);i.has(l)||(i.add(l),l.then(f,f))})}function aa(t,a){var i=a.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],h=t,g=a,_=g;e:for(;_!==null;){switch(_.tag){case 27:case 5:Ke=_.stateNode,Bt=!1;break e;case 3:Ke=_.stateNode.containerInfo,Bt=!0;break e;case 4:Ke=_.stateNode.containerInfo,Bt=!0;break e}_=_.return}if(Ke===null)throw Error(r(160));Up(h,g,f),Ke=null,Bt=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)zp(a,t),a=a.sibling}var ca=null;function zp(t,a){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:aa(a,t),na(t),l&4&&(pn(3,t,t.return),Xi(3,t),pn(5,t,t.return));break;case 1:aa(a,t),na(t),l&512&&(Ge||i===null||It(i,i.return)),l&64&&Ha&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=ca;if(aa(a,t),na(t),l&512&&(Ge||i===null||It(i,i.return)),l&4){var h=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){e:{l=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":h=f.getElementsByTagName("title")[0],(!h||h[_i]||h[bt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(l),f.head.insertBefore(h,f.querySelector("head > title"))),mt(h,l,i),h[bt]=t,rt(h),l=h;break e;case"link":var g=Cy("link","href",f).get(l+(i.href||""));if(g){for(var _=0;_<g.length;_++)if(h=g[_],h.getAttribute("href")===(i.href==null?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(_,1);break t}}h=f.createElement(l),mt(h,l,i),f.head.appendChild(h);break;case"meta":if(g=Cy("meta","content",f).get(l+(i.content||""))){for(_=0;_<g.length;_++)if(h=g[_],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(_,1);break t}}h=f.createElement(l),mt(h,l,i),f.head.appendChild(h);break;default:throw Error(r(468,l))}h[bt]=t,rt(h),l=h}t.stateNode=l}else jy(f,t.type,t.stateNode);else t.stateNode=Ny(f,l,t.memoizedProps);else h!==l?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,l===null?jy(f,t.type,t.stateNode):Ny(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&jp(t,t.memoizedProps,i.memoizedProps)}break;case 27:if(l&4&&t.alternate===null){f=t.stateNode,h=t.memoizedProps;try{for(var S=f.firstChild;S;){var R=S.nextSibling,U=S.nodeName;S[_i]||U==="HEAD"||U==="BODY"||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=R}for(var B=t.type,j=f.attributes;j.length;)f.removeAttributeNode(j[0]);mt(f,B,h),f[bt]=t,f[jt]=h}catch(se){Ue(t,t.return,se)}}case 5:if(aa(a,t),na(t),l&512&&(Ge||i===null||It(i,i.return)),t.flags&32){f=t.stateNode;try{Tr(f,"")}catch(se){Ue(t,t.return,se)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,jp(t,f,i!==null?i.memoizedProps:f)),l&1024&&(pc=!0);break;case 6:if(aa(a,t),na(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(se){Ue(t,t.return,se)}}break;case 3:if(tl=null,f=ca,ca=Wu(a.containerInfo),aa(a,t),ca=f,na(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{ds(a.containerInfo)}catch(se){Ue(t,t.return,se)}pc&&(pc=!1,Ip(t));break;case 4:l=ca,ca=Wu(t.stateNode.containerInfo),aa(a,t),na(t),ca=l;break;case 12:aa(a,t),na(t);break;case 13:aa(a,t),na(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Oc=Sa()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,yc(t,l)));break;case 22:if(l&512&&(Ge||i===null||It(i,i.return)),S=t.memoizedState!==null,R=i!==null&&i.memoizedState!==null,U=Ha,B=Ge,Ha=U||S,Ge=B||R,aa(a,t),Ge=B,Ha=U,na(t),a=t.stateNode,a._current=t,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,l&8192&&(a._visibility=S?a._visibility&-2:a._visibility|1,S&&(a=Ha||Ge,i===null||R||a||Br(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(i=null,a=t;;){if(a.tag===5||a.tag===26||a.tag===27){if(i===null){R=i=a;try{if(f=R.stateNode,S)h=f.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{g=R.stateNode,_=R.memoizedProps.style;var M=_!=null&&_.hasOwnProperty("display")?_.display:null;g.style.display=M==null||typeof M=="boolean"?"":(""+M).trim()}}catch(se){Ue(R,R.return,se)}}}else if(a.tag===6){if(i===null){R=a;try{R.stateNode.nodeValue=S?"":R.memoizedProps}catch(se){Ue(R,R.return,se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,yc(t,i))));break;case 19:aa(a,t),na(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,yc(t,l)));break;case 21:break;default:aa(a,t),na(t)}}function na(t){var a=t.flags;if(a&2){try{if(t.tag!==27){e:{for(var i=t.return;i!==null;){if(kp(i)){var l=i;break e}i=i.return}throw Error(r(160))}switch(l.tag){case 27:var f=l.stateNode,h=hc(t);Pu(t,h,f);break;case 5:var g=l.stateNode;l.flags&32&&(Tr(g,""),l.flags&=-33);var _=hc(t);Pu(t,_,g);break;case 3:case 4:var S=l.stateNode.containerInfo,R=hc(t);mc(t,R,S);break;default:throw Error(r(161))}}}catch(U){Ue(t,t.return,U)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Ip(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Ip(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Za(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Dp(t,a.alternate,a),a=a.sibling}function Br(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:pn(4,a,a.return),Br(a);break;case 1:It(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Np(a,a.return,i),Br(a);break;case 26:case 27:case 5:It(a,a.return),Br(a);break;case 22:It(a,a.return),a.memoizedState===null&&Br(a);break;default:Br(a)}t=t.sibling}}function yn(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,f=t,h=a,g=h.flags;switch(h.tag){case 0:case 11:case 15:yn(f,h,i),Xi(4,h);break;case 1:if(yn(f,h,i),l=h,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(R){Ue(l,l.return,R)}if(l=h,f=l.updateQueue,f!==null){var _=l.stateNode;try{var S=f.shared.hiddenCallbacks;if(S!==null)for(f.shared.hiddenCallbacks=null,f=0;f<S.length;f++)Ap(S[f],_)}catch(R){Ue(l,l.return,R)}}i&&g&64&&xp(h),ar(h,h.return);break;case 26:case 27:case 5:yn(f,h,i),i&&l===null&&g&4&&Cp(h),ar(h,h.return);break;case 12:yn(f,h,i);break;case 13:yn(f,h,i),i&&g&4&&Pp(f,h);break;case 22:h.memoizedState===null&&yn(f,h,i),ar(h,h.return);break;default:yn(f,h,i)}a=a.sibling}}function gc(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Pi(i))}function bc(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Pi(t))}function gn(t,a,i,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bp(t,a,i,l),a=a.sibling}function Bp(t,a,i,l){var f=a.flags;switch(a.tag){case 0:case 11:case 15:gn(t,a,i,l),f&2048&&Xi(9,a);break;case 3:gn(t,a,i,l),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Pi(t)));break;case 12:if(f&2048){gn(t,a,i,l),t=a.stateNode;try{var h=a.memoizedProps,g=h.id,_=h.onPostCommit;typeof _=="function"&&_(g,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){Ue(a,a.return,S)}}else gn(t,a,i,l);break;case 23:break;case 22:h=a.stateNode,a.memoizedState!==null?h._visibility&4?gn(t,a,i,l):Fi(t,a):h._visibility&4?gn(t,a,i,l):(h._visibility|=4,Hr(t,a,i,l,(a.subtreeFlags&10256)!==0)),f&2048&&gc(a.alternate,a);break;case 24:gn(t,a,i,l),f&2048&&bc(a.alternate,a);break;default:gn(t,a,i,l)}}function Hr(t,a,i,l,f){for(f=f&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var h=t,g=a,_=i,S=l,R=g.flags;switch(g.tag){case 0:case 11:case 15:Hr(h,g,_,S,f),Xi(8,g);break;case 23:break;case 22:var U=g.stateNode;g.memoizedState!==null?U._visibility&4?Hr(h,g,_,S,f):Fi(h,g):(U._visibility|=4,Hr(h,g,_,S,f)),f&&R&2048&&gc(g.alternate,g);break;case 24:Hr(h,g,_,S,f),f&&R&2048&&bc(g.alternate,g);break;default:Hr(h,g,_,S,f)}a=a.sibling}}function Fi(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,l=a,f=l.flags;switch(l.tag){case 22:Fi(i,l),f&2048&&gc(l.alternate,l);break;case 24:Fi(i,l),f&2048&&bc(l.alternate,l);break;default:Fi(i,l)}a=a.sibling}}var Qi=8192;function qr(t){if(t.subtreeFlags&Qi)for(t=t.child;t!==null;)Hp(t),t=t.sibling}function Hp(t){switch(t.tag){case 26:qr(t),t.flags&Qi&&t.memoizedState!==null&&D0(ca,t.memoizedState,t.memoizedProps);break;case 5:qr(t);break;case 3:case 4:var a=ca;ca=Wu(t.stateNode.containerInfo),qr(t),ca=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Qi,Qi=16777216,qr(t),Qi=a):qr(t));break;default:qr(t)}}function qp(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ki(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];st=l,Gp(l,t)}qp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zp(t),t=t.sibling}function Zp(t){switch(t.tag){case 0:case 11:case 15:Ki(t),t.flags&2048&&pn(9,t,t.return);break;case 3:Ki(t);break;case 12:Ki(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&4&&(t.return===null||t.return.tag!==13)?(a._visibility&=-5,zu(t)):Ki(t);break;default:Ki(t)}}function zu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];st=l,Gp(l,t)}qp(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:pn(8,a,a.return),zu(a);break;case 22:i=a.stateNode,i._visibility&4&&(i._visibility&=-5,zu(a));break;default:zu(a)}t=t.sibling}}function Gp(t,a){for(;st!==null;){var i=st;switch(i.tag){case 0:case 11:case 15:pn(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Pi(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,st=l;else e:for(i=t;st!==null;){l=st;var f=l.sibling,h=l.return;if(Mp(l),l===i){st=null;break e}if(f!==null){f.return=h,st=f;break e}st=h}}}function X_(t,a,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(t,a,i,l){return new X_(t,a,i,l)}function vc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bn(t,a){var i=t.alternate;return i===null?(i=ra(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&31457280,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Vp(t,a){t.flags&=31457282;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Iu(t,a,i,l,f,h){var g=0;if(l=t,typeof t=="function")vc(t)&&(g=1);else if(typeof t=="string")g=L0(t,i,Xt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case m:return nr(i.children,f,h,a);case p:g=8,f|=24;break;case y:return t=ra(12,i,a,f|2),t.elementType=y,t.lanes=h,t;case O:return t=ra(13,i,a,f),t.elementType=O,t.lanes=h,t;case x:return t=ra(19,i,a,f),t.elementType=x,t.lanes=h,t;case L:return Yp(i,f,h,a);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b:case w:g=10;break e;case v:g=9;break e;case E:g=11;break e;case k:g=14;break e;case z:g=16,l=null;break e}g=29,i=Error(r(130,t===null?"null":typeof t,"")),l=null}return a=ra(g,i,a,f),a.elementType=t,a.type=l,a.lanes=h,a}function nr(t,a,i,l){return t=ra(7,t,l,a),t.lanes=i,t}function Yp(t,a,i,l){t=ra(22,t,l,a),t.elementType=L,t.lanes=i;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var h=f._current;if(h===null)throw Error(r(456));if((f._pendingVisibility&2)===0){var g=sn(h,2);g!==null&&(f._pendingVisibility|=2,Tt(g,h,2))}},attach:function(){var h=f._current;if(h===null)throw Error(r(456));if((f._pendingVisibility&2)!==0){var g=sn(h,2);g!==null&&(f._pendingVisibility&=-3,Tt(g,h,2))}}};return t.stateNode=f,t}function _c(t,a,i){return t=ra(6,t,null,a),t.lanes=i,t}function wc(t,a,i){return a=ra(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function Ga(t){t.flags|=4}function Xp(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ky(a)){if(a=ta.current,a!==null&&((Ae&4194176)===Ae?Oa!==null:(Ae&62914560)!==Ae&&(Ae&536870912)===0||a!==Oa))throw Di=Ao,fm;t.flags|=8192}}function Bu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?dh():536870912,t.lanes|=a,Gr|=a)}function Ji(t,a){if(!Ne)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Be(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(a)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&31457280,l|=f.flags&31457280,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=i,a}function F_(t,a,i){var l=a.pendingProps;switch(To(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(a),null;case 1:return Be(a),null;case 3:return i=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ba(tt),br(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ji(a)?Ga(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,oa!==null&&(Nc(oa),oa=null))),Be(a),null;case 26:return i=a.memoizedState,t===null?(Ga(a),i!==null?(Be(a),Xp(a,i)):(Be(a),a.flags&=-16777217)):i?i!==t.memoizedState?(Ga(a),Be(a),Xp(a,i)):(Be(a),a.flags&=-16777217):(t.memoizedProps!==l&&Ga(a),Be(a),a.flags&=-16777217),null;case 27:Ws(a),i=tn.current;var f=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ga(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return Be(a),null}t=Xt.current,ji(a)?om(a):(t=Ty(f,l,i),a.stateNode=t,Ga(a))}return Be(a),null;case 5:if(Ws(a),i=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ga(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return Be(a),null}if(t=Xt.current,ji(a))om(a);else{switch(f=Ju(tn.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(i,{is:l.is}):f.createElement(i)}}t[bt]=a,t[jt]=l;e:for(f=a.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break e;for(;f.sibling===null;){if(f.return===null||f.return===a)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}a.stateNode=t;e:switch(mt(t,i,l),i){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ga(a)}}return Be(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&Ga(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(r(166));if(t=tn.current,ji(a)){if(t=a.stateNode,i=a.memoizedProps,l=null,f=St,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[bt]=a,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||by(t.nodeValue,i)),t||Yn(a)}else t=Ju(t).createTextNode(l),t[bt]=a,a.stateNode=t}return Be(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=ji(a),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[bt]=a}else ki(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Be(a),f=!1}else oa!==null&&(Nc(oa),oa=null),f=!0;if(!f)return a.flags&256?(Ua(a),a):(Ua(a),null)}if(Ua(a),(a.flags&128)!==0)return a.lanes=i,a;if(i=l!==null,t=t!==null&&t.memoizedState!==null,i){l=a.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==f&&(l.flags|=2048)}return i!==t&&i&&(a.child.flags|=8192),Bu(a,a.updateQueue),Be(a),null;case 4:return br(),t===null&&Ic(a.stateNode.containerInfo),Be(a),null;case 10:return Ba(a.type),Be(a),null;case 19:if(Ie(et),f=a.memoizedState,f===null)return Be(a),null;if(l=(a.flags&128)!==0,h=f.rendering,h===null)if(l)Ji(f,!1);else{if(Ve!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(h=Tu(t),h!==null){for(a.flags|=128,Ji(f,!1),t=h.updateQueue,a.updateQueue=t,Bu(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)Vp(i,t),i=i.sibling;return Le(et,et.current&1|2),a.child}t=t.sibling}f.tail!==null&&Sa()>Hu&&(a.flags|=128,l=!0,Ji(f,!1),a.lanes=4194304)}else{if(!l)if(t=Tu(h),t!==null){if(a.flags|=128,l=!0,t=t.updateQueue,a.updateQueue=t,Bu(a,t),Ji(f,!0),f.tail===null&&f.tailMode==="hidden"&&!h.alternate&&!Ne)return Be(a),null}else 2*Sa()-f.renderingStartTime>Hu&&i!==536870912&&(a.flags|=128,l=!0,Ji(f,!1),a.lanes=4194304);f.isBackwards?(h.sibling=a.child,a.child=h):(t=f.last,t!==null?t.sibling=h:a.child=h,f.last=h)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Sa(),a.sibling=null,t=et.current,Le(et,l?t&1|2:t&1),a):(Be(a),null);case 22:case 23:return Ua(a),xo(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(i&536870912)!==0&&(a.flags&128)===0&&(Be(a),a.subtreeFlags&6&&(a.flags|=8192)):Be(a),i=a.updateQueue,i!==null&&Bu(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==i&&(a.flags|=2048),t!==null&&Ie(Fn),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),Ba(tt),Be(a),null;case 25:return null}throw Error(r(156,a.tag))}function Q_(t,a){switch(To(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ba(tt),br(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Ws(a),null;case 13:if(Ua(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));ki()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Ie(et),null;case 4:return br(),null;case 10:return Ba(a.type),null;case 22:case 23:return Ua(a),xo(),t!==null&&Ie(Fn),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ba(tt),null;case 25:return null;default:return null}}function Fp(t,a){switch(To(a),a.tag){case 3:Ba(tt),br();break;case 26:case 27:case 5:Ws(a);break;case 4:br();break;case 13:Ua(a);break;case 19:Ie(et);break;case 10:Ba(a.type);break;case 22:case 23:Ua(a),xo(),t!==null&&Ie(Fn);break;case 24:Ba(tt)}}var K_={getCacheForType:function(t){var a=vt(tt),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i}},J_=typeof WeakMap=="function"?WeakMap:Map,He=0,Pe=null,Te=null,Ae=0,ze=0,Ht=null,Va=!1,Zr=!1,Ec=!1,Ya=0,Ve=0,vn=0,rr=0,Sc=0,ia=0,Gr=0,Wi=null,Ra=null,Tc=!1,Oc=0,Hu=1/0,qu=null,_n=null,Zu=!1,ir=null,es=0,Ac=0,Rc=null,ts=0,xc=null;function qt(){if((He&2)!==0&&Ae!==0)return Ae&-Ae;if(re.T!==null){var t=Mr;return t!==0?t:Mc()}return yh()}function Qp(){ia===0&&(ia=(Ae&536870912)===0||Ne?fh():536870912);var t=ta.current;return t!==null&&(t.flags|=32),ia}function Tt(t,a,i){(t===Pe&&ze===2||t.cancelPendingCommit!==null)&&(Vr(t,0),Xa(t,Ae,ia,!1)),vi(t,i),((He&2)===0||t!==Pe)&&(t===Pe&&((He&2)===0&&(rr|=i),Ve===4&&Xa(t,Ae,ia,!1)),xa(t))}function Kp(t,a,i){if((He&6)!==0)throw Error(r(327));var l=!i&&(a&60)===0&&(a&t.expiredLanes)===0||bi(t,a),f=l?t0(t,a):kc(t,a,!0),h=l;do{if(f===0){Zr&&!l&&Xa(t,a,0,!1);break}else if(f===6)Xa(t,a,0,!Va);else{if(i=t.current.alternate,h&&!W_(i)){f=kc(t,a,!1),h=!1;continue}if(f===2){if(h=a,t.errorRecoveryDisabledLanes&h)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){a=g;e:{var _=t;f=Wi;var S=_.current.memoizedState.isDehydrated;if(S&&(Vr(_,g).flags|=256),g=kc(_,g,!1),g!==2){if(Ec&&!S){_.errorRecoveryDisabledLanes|=h,rr|=h,f=4;break e}h=Ra,Ra=f,h!==null&&Nc(h)}f=g}if(h=!1,f!==2)continue}}if(f===1){Vr(t,0),Xa(t,a,0,!0);break}e:{switch(l=t,f){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){Xa(l,a,ia,!Va);break e}break;case 2:Ra=null;break;case 3:case 5:break;default:throw Error(r(329))}if(l.finishedWork=i,l.finishedLanes=a,(a&62914560)===a&&(h=Oc+300-Sa(),10<h)){if(Xa(l,a,ia,!Va),nu(l,0)!==0)break e;l.timeoutHandle=wy(Jp.bind(null,l,i,Ra,qu,Tc,a,ia,rr,Gr,Va,2,-0,0),h);break e}Jp(l,i,Ra,qu,Tc,a,ia,rr,Gr,Va,0,-0,0)}}break}while(!0);xa(t)}function Nc(t){Ra===null?Ra=t:Ra.push.apply(Ra,t)}function Jp(t,a,i,l,f,h,g,_,S,R,U,B,j){var M=a.subtreeFlags;if((M&8192||(M&16785408)===16785408)&&(us={stylesheets:null,count:0,unsuspend:$0},Hp(a),a=M0(),a!==null)){t.cancelPendingCommit=a(iy.bind(null,t,i,l,f,g,_,S,1,B,j)),Xa(t,h,g,!R);return}iy(t,i,l,f,g,_,S,U,B,j)}function W_(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],h=f.getSnapshot;f=f.value;try{if(!zt(h(),f))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xa(t,a,i,l){a&=~Sc,a&=~rr,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var f=a;0<f;){var h=31-Pt(f),g=1<<h;l[h]=-1,f&=~g}i!==0&&hh(t,i,a)}function Gu(){return(He&6)===0?(as(0),!1):!0}function Cc(){if(Te!==null){if(ze===0)var t=Te.return;else t=Te,Ia=er=null,Mo(t),$r=null,Mi=0,t=Te;for(;t!==null;)Fp(t.alternate,t),t=t.return;Te=null}}function Vr(t,a){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,b0(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Cc(),Pe=t,Te=i=bn(t.current,null),Ae=a,ze=0,Ht=null,Va=!1,Zr=bi(t,a),Ec=!1,Gr=ia=Sc=rr=vn=Ve=0,Ra=Wi=null,Tc=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var f=31-Pt(l),h=1<<f;a|=t[f],l&=~h}return Ya=a,pu(),i}function Wp(t,a){Ee=null,re.H=Aa,a===$i?(a=mm(),ze=3):a===fm?(a=mm(),ze=4):ze=a===dp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ht=a,Te===null&&(Ve=1,Du(t,Jt(a,t.current)))}function ey(){var t=re.H;return re.H=Aa,t===null?Aa:t}function ty(){var t=re.A;return re.A=K_,t}function jc(){Ve=4,Va||(Ae&4194176)!==Ae&&ta.current!==null||(Zr=!0),(vn&134217727)===0&&(rr&134217727)===0||Pe===null||Xa(Pe,Ae,ia,!1)}function kc(t,a,i){var l=He;He|=2;var f=ey(),h=ty();(Pe!==t||Ae!==a)&&(qu=null,Vr(t,a)),a=!1;var g=Ve;e:do try{if(ze!==0&&Te!==null){var _=Te,S=Ht;switch(ze){case 8:Cc(),g=6;break e;case 3:case 2:case 6:ta.current===null&&(a=!0);var R=ze;if(ze=0,Ht=null,Yr(t,_,S,R),i&&Zr){g=0;break e}break;default:R=ze,ze=0,Ht=null,Yr(t,_,S,R)}}e0(),g=Ve;break}catch(U){Wp(t,U)}while(!0);return a&&t.shellSuspendCounter++,Ia=er=null,He=l,re.H=f,re.A=h,Te===null&&(Pe=null,Ae=0,pu()),g}function e0(){for(;Te!==null;)ay(Te)}function t0(t,a){var i=He;He|=2;var l=ey(),f=ty();Pe!==t||Ae!==a?(qu=null,Hu=Sa()+500,Vr(t,a)):Zr=bi(t,a);e:do try{if(ze!==0&&Te!==null){a=Te;var h=Ht;t:switch(ze){case 1:ze=0,Ht=null,Yr(t,a,h,1);break;case 2:if(dm(h)){ze=0,Ht=null,ny(a);break}a=function(){ze===2&&Pe===t&&(ze=7),xa(t)},h.then(a,a);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:dm(h)?(ze=0,Ht=null,ny(a)):(ze=0,Ht=null,Yr(t,a,h,7));break;case 5:var g=null;switch(Te.tag){case 26:g=Te.memoizedState;case 5:case 27:var _=Te;if(!g||ky(g)){ze=0,Ht=null;var S=_.sibling;if(S!==null)Te=S;else{var R=_.return;R!==null?(Te=R,Vu(R)):Te=null}break t}}ze=0,Ht=null,Yr(t,a,h,5);break;case 6:ze=0,Ht=null,Yr(t,a,h,6);break;case 8:Cc(),Ve=6;break e;default:throw Error(r(462))}}a0();break}catch(U){Wp(t,U)}while(!0);return Ia=er=null,re.H=l,re.A=f,He=i,Te!==null?0:(Pe=null,Ae=0,pu(),Ve)}function a0(){for(;Te!==null&&!Tv();)ay(Te)}function ay(t){var a=Tp(t.alternate,t,Ya);t.memoizedProps=t.pendingProps,a===null?Vu(t):Te=a}function ny(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=bp(i,a,a.pendingProps,a.type,void 0,Ae);break;case 11:a=bp(i,a,a.pendingProps,a.type.render,a.ref,Ae);break;case 5:Mo(a);default:Fp(i,a),a=Te=Vp(a,Ya),a=Tp(i,a,Ya)}t.memoizedProps=t.pendingProps,a===null?Vu(t):Te=a}function Yr(t,a,i,l){Ia=er=null,Mo(a),$r=null,Mi=0;var f=a.return;try{if(Z_(t,f,a,i,Ae)){Ve=1,Du(t,Jt(i,t.current)),Te=null;return}}catch(h){if(f!==null)throw Te=f,h;Ve=1,Du(t,Jt(i,t.current)),Te=null;return}a.flags&32768?(Ne||l===1?t=!0:Zr||(Ae&536870912)!==0?t=!1:(Va=t=!0,(l===2||l===3||l===6)&&(l=ta.current,l!==null&&l.tag===13&&(l.flags|=16384))),ry(a,t)):Vu(a)}function Vu(t){var a=t;do{if((a.flags&32768)!==0){ry(a,Va);return}t=a.return;var i=F_(a.alternate,a,Ya);if(i!==null){Te=i;return}if(a=a.sibling,a!==null){Te=a;return}Te=a=t}while(a!==null);Ve===0&&(Ve=5)}function ry(t,a){do{var i=Q_(t.alternate,t);if(i!==null){i.flags&=32767,Te=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){Te=t;return}Te=t=i}while(t!==null);Ve=6,Te=null}function iy(t,a,i,l,f,h,g,_,S,R){var U=re.T,B=F.p;try{F.p=2,re.T=null,n0(t,a,i,l,B,f,h,g,_,S,R)}finally{re.T=U,F.p=B}}function n0(t,a,i,l,f,h,g,_){do Xr();while(ir!==null);if((He&6)!==0)throw Error(r(327));var S=t.finishedWork;if(l=t.finishedLanes,S===null)return null;if(t.finishedWork=null,t.finishedLanes=0,S===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var R=S.lanes|S.childLanes;if(R|=wo,Dv(t,l,R,h,g,_),t===Pe&&(Te=Pe=null,Ae=0),(S.subtreeFlags&10256)===0&&(S.flags&10256)===0||Zu||(Zu=!0,Ac=R,Rc=i,u0(eu,function(){return Xr(),null})),i=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||i?(i=re.T,re.T=null,h=F.p,F.p=2,g=He,He|=4,V_(t,S),zp(S,t),R_(Zc,t.containerInfo),rl=!!qc,Zc=qc=null,t.current=S,Dp(t,S.alternate,S),Ov(),He=g,F.p=h,re.T=i):t.current=S,Zu?(Zu=!1,ir=t,es=l):sy(t,R),R=t.pendingLanes,R===0&&(_n=null),Cv(S.stateNode),xa(t),a!==null)for(f=t.onRecoverableError,S=0;S<a.length;S++)R=a[S],f(R.value,{componentStack:R.stack});return(es&3)!==0&&Xr(),R=t.pendingLanes,(l&4194218)!==0&&(R&42)!==0?t===xc?ts++:(ts=0,xc=t):ts=0,as(0),null}function sy(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Pi(a)))}function Xr(){if(ir!==null){var t=ir,a=Ac;Ac=0;var i=ph(es),l=re.T,f=F.p;try{if(F.p=32>i?32:i,re.T=null,ir===null)var h=!1;else{i=Rc,Rc=null;var g=ir,_=es;if(ir=null,es=0,(He&6)!==0)throw Error(r(331));var S=He;if(He|=4,Zp(g.current),Bp(g,g.current,_,i),He=S,as(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(gi,g)}catch{}h=!0}return h}finally{F.p=f,re.T=l,sy(t,a)}}return!1}function uy(t,a,i){a=Jt(i,a),a=Qo(t.stateNode,a,2),t=mn(t,a,2),t!==null&&(vi(t,2),xa(t))}function Ue(t,a,i){if(t.tag===3)uy(t,t,i);else for(;a!==null;){if(a.tag===3){uy(a,t,i);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(_n===null||!_n.has(l))){t=Jt(i,t),i=cp(2),l=mn(a,i,2),l!==null&&(fp(i,l,a,t),vi(l,2),xa(l));break}}a=a.return}}function Lc(t,a,i){var l=t.pingCache;if(l===null){l=t.pingCache=new J_;var f=new Set;l.set(a,f)}else f=l.get(a),f===void 0&&(f=new Set,l.set(a,f));f.has(i)||(Ec=!0,f.add(i),t=r0.bind(null,t,a,i),a.then(t,t))}function r0(t,a,i){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,Pe===t&&(Ae&i)===i&&(Ve===4||Ve===3&&(Ae&62914560)===Ae&&300>Sa()-Oc?(He&2)===0&&Vr(t,0):Sc|=i,Gr===Ae&&(Gr=0)),xa(t)}function ly(t,a){a===0&&(a=dh()),t=sn(t,a),t!==null&&(vi(t,a),xa(t))}function i0(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),ly(t,i)}function s0(t,a){var i=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(a),ly(t,i)}function u0(t,a){return Ql(t,a)}var Yu=null,Fr=null,$c=!1,Xu=!1,Dc=!1,sr=0;function xa(t){t!==Fr&&t.next===null&&(Fr===null?Yu=Fr=t:Fr=Fr.next=t),Xu=!0,$c||($c=!0,o0(l0))}function as(t,a){if(!Dc&&Xu){Dc=!0;do for(var i=!1,l=Yu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var h=0;else{var g=l.suspendedLanes,_=l.pingedLanes;h=(1<<31-Pt(42|t)+1)-1,h&=f&~(g&~_),h=h&201326677?h&201326677|1:h?h|2:0}h!==0&&(i=!0,fy(l,h))}else h=Ae,h=nu(l,l===Pe?h:0),(h&3)===0||bi(l,h)||(i=!0,fy(l,h));l=l.next}while(i);Dc=!1}}function l0(){Xu=$c=!1;var t=0;sr!==0&&(g0()&&(t=sr),sr=0);for(var a=Sa(),i=null,l=Yu;l!==null;){var f=l.next,h=oy(l,a);h===0?(l.next=null,i===null?Yu=f:i.next=f,f===null&&(Fr=i)):(i=l,(t!==0||(h&3)!==0)&&(Xu=!0)),l=f}as(t)}function oy(t,a){for(var i=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var g=31-Pt(h),_=1<<g,S=f[g];S===-1?((_&i)===0||(_&l)!==0)&&(f[g]=$v(_,a)):S<=a&&(t.expiredLanes|=_),h&=~_}if(a=Pe,i=Ae,i=nu(t,t===a?i:0),l=t.callbackNode,i===0||t===a&&ze===2||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Kl(l),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||bi(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(l!==null&&Kl(l),ph(i)){case 2:case 8:i=oh;break;case 32:i=eu;break;case 268435456:i=ch;break;default:i=eu}return l=cy.bind(null,t),i=Ql(i,l),t.callbackPriority=a,t.callbackNode=i,a}return l!==null&&l!==null&&Kl(l),t.callbackPriority=2,t.callbackNode=null,2}function cy(t,a){var i=t.callbackNode;if(Xr()&&t.callbackNode!==i)return null;var l=Ae;return l=nu(t,t===Pe?l:0),l===0?null:(Kp(t,l,a),oy(t,Sa()),t.callbackNode!=null&&t.callbackNode===i?cy.bind(null,t):null)}function fy(t,a){if(Xr())return null;Kp(t,a,!0)}function o0(t){v0(function(){(He&6)!==0?Ql(lh,t):t()})}function Mc(){return sr===0&&(sr=fh()),sr}function dy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:lu(""+t)}function hy(t,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,t.id&&i.setAttribute("form",t.id),a.parentNode.insertBefore(i,a),t=new FormData(t),i.parentNode.removeChild(i),t}function c0(t,a,i,l,f){if(a==="submit"&&i&&i.stateNode===f){var h=dy((f[jt]||null).action),g=l.submitter;g&&(a=(a=g[jt]||null)?dy(a.formAction):g.getAttribute("formAction"),a!==null&&(h=a,g=null));var _=new du("action","action",null,l,f);t.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sr!==0){var S=g?hy(f,g):new FormData(f);Go(i,{pending:!0,data:S,method:f.method,action:h},null,S)}}else typeof h=="function"&&(_.preventDefault(),S=g?hy(f,g):new FormData(f),Go(i,{pending:!0,data:S,method:f.method,action:h},h,S))},currentTarget:f}]})}}for(var Uc=0;Uc<im.length;Uc++){var Pc=im[Uc],f0=Pc.toLowerCase(),d0=Pc[0].toUpperCase()+Pc.slice(1);la(f0,"on"+d0)}la(em,"onAnimationEnd"),la(tm,"onAnimationIteration"),la(am,"onAnimationStart"),la("dblclick","onDoubleClick"),la("focusin","onFocus"),la("focusout","onBlur"),la(N_,"onTransitionRun"),la(C_,"onTransitionStart"),la(j_,"onTransitionCancel"),la(nm,"onTransitionEnd"),Er("onMouseEnter",["mouseout","mouseover"]),Er("onMouseLeave",["mouseout","mouseover"]),Er("onPointerEnter",["pointerout","pointerover"]),Er("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ns));function my(t,a){a=(a&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],f=l.event;l=l.listeners;e:{var h=void 0;if(a)for(var g=l.length-1;0<=g;g--){var _=l[g],S=_.instance,R=_.currentTarget;if(_=_.listener,S!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=R;try{h(f)}catch(U){$u(U)}f.currentTarget=null,h=S}else for(g=0;g<l.length;g++){if(_=l[g],S=_.instance,R=_.currentTarget,_=_.listener,S!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=R;try{h(f)}catch(U){$u(U)}f.currentTarget=null,h=S}}}}function Oe(t,a){var i=a[Wl];i===void 0&&(i=a[Wl]=new Set);var l=t+"__bubble";i.has(l)||(py(a,t,2,!1),i.add(l))}function zc(t,a,i){var l=0;a&&(l|=4),py(i,t,l,a)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Ic(t){if(!t[Fu]){t[Fu]=!0,bh.forEach(function(i){i!=="selectionchange"&&(h0.has(i)||zc(i,!1,t),zc(i,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Fu]||(a[Fu]=!0,zc("selectionchange",!1,a))}}function py(t,a,i,l){switch(Py(a)){case 2:var f=z0;break;case 8:f=I0;break;default:f=Wc}i=f.bind(null,a,i,t),f=void 0,!uo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(a,i,{capture:!0,passive:f}):t.addEventListener(a,i,!0):f!==void 0?t.addEventListener(a,i,{passive:f}):t.addEventListener(a,i,!1)}function Bc(t,a,i,l,f){var h=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var _=l.stateNode.containerInfo;if(_===f||_.nodeType===8&&_.parentNode===f)break;if(g===4)for(g=l.return;g!==null;){var S=g.tag;if((S===3||S===4)&&(S=g.stateNode.containerInfo,S===f||S.nodeType===8&&S.parentNode===f))return;g=g.return}for(;_!==null;){if(g=In(_),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){l=h=g;continue e}_=_.parentNode}}l=l.return}Ch(function(){var R=h,U=io(i),B=[];e:{var j=rm.get(t);if(j!==void 0){var M=du,se=t;switch(t){case"keypress":if(cu(i)===0)break e;case"keydown":case"keyup":M=s_;break;case"focusin":se="focus",M=fo;break;case"focusout":se="blur",M=fo;break;case"beforeblur":case"afterblur":M=fo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=Xv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=o_;break;case em:case tm:case am:M=Kv;break;case nm:M=f_;break;case"scroll":case"scrollend":M=Vv;break;case"wheel":M=h_;break;case"copy":case"cut":case"paste":M=Wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Dh;break;case"toggle":case"beforetoggle":M=p_}var me=(a&4)!==0,Ye=!me&&(t==="scroll"||t==="scrollend"),N=me?j!==null?j+"Capture":null:j;me=[];for(var A=R,C;A!==null;){var P=A;if(C=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||C===null||N===null||(P=Ei(A,N),P!=null&&me.push(rs(A,P,C))),Ye)break;A=A.return}0<me.length&&(j=new M(j,se,null,i,U),B.push({event:j,listeners:me}))}}if((a&7)===0){e:{if(j=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",j&&i!==ro&&(se=i.relatedTarget||i.fromElement)&&(In(se)||se[vr]))break e;if((M||j)&&(j=U.window===U?U:(j=U.ownerDocument)?j.defaultView||j.parentWindow:window,M?(se=i.relatedTarget||i.toElement,M=R,se=se?In(se):null,se!==null&&(Ye=q(se),me=se.tag,se!==Ye||me!==5&&me!==27&&me!==6)&&(se=null)):(M=null,se=R),M!==se)){if(me=Lh,P="onMouseLeave",N="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(me=Dh,P="onPointerLeave",N="onPointerEnter",A="pointer"),Ye=M==null?j:wi(M),C=se==null?j:wi(se),j=new me(P,A+"leave",M,i,U),j.target=Ye,j.relatedTarget=C,P=null,In(U)===R&&(me=new me(N,A+"enter",se,i,U),me.target=C,me.relatedTarget=Ye,P=me),Ye=P,M&&se)t:{for(me=M,N=se,A=0,C=me;C;C=Qr(C))A++;for(C=0,P=N;P;P=Qr(P))C++;for(;0<A-C;)me=Qr(me),A--;for(;0<C-A;)N=Qr(N),C--;for(;A--;){if(me===N||N!==null&&me===N.alternate)break t;me=Qr(me),N=Qr(N)}me=null}else me=null;M!==null&&yy(B,j,M,me,!1),se!==null&&Ye!==null&&yy(B,Ye,se,me,!0)}}e:{if(j=R?wi(R):window,M=j.nodeName&&j.nodeName.toLowerCase(),M==="select"||M==="input"&&j.type==="file")var ne=qh;else if(Bh(j))if(Zh)ne=O_;else{ne=S_;var Se=E_}else M=j.nodeName,!M||M.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?R&&no(R.elementType)&&(ne=qh):ne=T_;if(ne&&(ne=ne(t,R))){Hh(B,ne,i,U);break e}Se&&Se(t,j,R),t==="focusout"&&R&&j.type==="number"&&R.memoizedProps.value!=null&&ao(j,"number",j.value)}switch(Se=R?wi(R):window,t){case"focusin":(Bh(Se)||Se.contentEditable==="true")&&(xr=Se,bo=R,Ci=null);break;case"focusout":Ci=bo=xr=null;break;case"mousedown":vo=!0;break;case"contextmenu":case"mouseup":case"dragend":vo=!1,Jh(B,i,U);break;case"selectionchange":if(x_)break;case"keydown":case"keyup":Jh(B,i,U)}var oe;if(mo)e:{switch(t){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else Rr?zh(t,i)&&(fe="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(fe="onCompositionStart");fe&&(Mh&&i.locale!=="ko"&&(Rr||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&Rr&&(oe=jh()):(rn=U,lo="value"in rn?rn.value:rn.textContent,Rr=!0)),Se=Qu(R,fe),0<Se.length&&(fe=new $h(fe,t,null,i,U),B.push({event:fe,listeners:Se}),oe?fe.data=oe:(oe=Ih(i),oe!==null&&(fe.data=oe)))),(oe=g_?b_(t,i):v_(t,i))&&(fe=Qu(R,"onBeforeInput"),0<fe.length&&(Se=new $h("onBeforeInput","beforeinput",null,i,U),B.push({event:Se,listeners:fe}),Se.data=oe)),c0(B,t,R,i,U)}my(B,a)})}function rs(t,a,i){return{instance:t,listener:a,currentTarget:i}}function Qu(t,a){for(var i=a+"Capture",l=[];t!==null;){var f=t,h=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Ei(t,i),f!=null&&l.unshift(rs(t,f,h)),f=Ei(t,a),f!=null&&l.push(rs(t,f,h))),t=t.return}return l}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function yy(t,a,i,l,f){for(var h=a._reactName,g=[];i!==null&&i!==l;){var _=i,S=_.alternate,R=_.stateNode;if(_=_.tag,S!==null&&S===l)break;_!==5&&_!==26&&_!==27||R===null||(S=R,f?(R=Ei(i,h),R!=null&&g.unshift(rs(i,R,S))):f||(R=Ei(i,h),R!=null&&g.push(rs(i,R,S)))),i=i.return}g.length!==0&&t.push({event:a,listeners:g})}var m0=/\r\n?/g,p0=/\u0000|\uFFFD/g;function gy(t){return(typeof t=="string"?t:""+t).replace(m0,`
`).replace(p0,"")}function by(t,a){return a=gy(a),gy(t)===a}function Ku(){}function De(t,a,i,l,f,h){switch(i){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Tr(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Tr(t,""+l);break;case"className":iu(t,"class",l);break;case"tabIndex":iu(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":iu(t,i,l);break;case"style":xh(t,l,h);break;case"data":if(a!=="object"){iu(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=lu(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(a!=="input"&&De(t,a,"name",f.name,f,null),De(t,a,"formEncType",f.formEncType,f,null),De(t,a,"formMethod",f.formMethod,f,null),De(t,a,"formTarget",f.formTarget,f,null)):(De(t,a,"encType",f.encType,f,null),De(t,a,"method",f.method,f,null),De(t,a,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=lu(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=lu(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),ru(t,"popover",l);break;case"xlinkActuate":$a(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$a(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$a(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$a(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$a(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$a(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$a(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$a(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$a(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ru(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Zv.get(i)||i,ru(t,i,l))}}function Hc(t,a,i,l,f,h){switch(i){case"style":xh(t,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=i}}break;case"children":typeof l=="string"?Tr(t,l):(typeof l=="number"||typeof l=="bigint")&&Tr(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),a=i.slice(2,f?i.length-7:void 0),h=t[jt]||null,h=h!=null?h[i]:null,typeof h=="function"&&t.removeEventListener(a,h,f),typeof l=="function")){typeof h!="function"&&h!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(a,l,f);break e}i in t?t[i]=l:l===!0?t.setAttribute(i,""):ru(t,i,l)}}}function mt(t,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,f=!1,h;for(h in i)if(i.hasOwnProperty(h)){var g=i[h];if(g!=null)switch(h){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:De(t,a,h,g,i,null)}}f&&De(t,a,"srcSet",i.srcSet,i,null),l&&De(t,a,"src",i.src,i,null);return;case"input":Oe("invalid",t);var _=h=g=f=null,S=null,R=null;for(l in i)if(i.hasOwnProperty(l)){var U=i[l];if(U!=null)switch(l){case"name":f=U;break;case"type":g=U;break;case"checked":S=U;break;case"defaultChecked":R=U;break;case"value":h=U;break;case"defaultValue":_=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(137,a));break;default:De(t,a,l,U,i,null)}}Th(t,h,_,S,R,g,f,!1),su(t);return;case"select":Oe("invalid",t),l=g=h=null;for(f in i)if(i.hasOwnProperty(f)&&(_=i[f],_!=null))switch(f){case"value":h=_;break;case"defaultValue":g=_;break;case"multiple":l=_;default:De(t,a,f,_,i,null)}a=h,i=g,t.multiple=!!l,a!=null?Sr(t,!!l,a,!1):i!=null&&Sr(t,!!l,i,!0);return;case"textarea":Oe("invalid",t),h=f=l=null;for(g in i)if(i.hasOwnProperty(g)&&(_=i[g],_!=null))switch(g){case"value":l=_;break;case"defaultValue":f=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:De(t,a,g,_,i,null)}Ah(t,l,f,h),su(t);return;case"option":for(S in i)if(i.hasOwnProperty(S)&&(l=i[S],l!=null))switch(S){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:De(t,a,S,l,i,null)}return;case"dialog":Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<ns.length;l++)Oe(ns[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in i)if(i.hasOwnProperty(R)&&(l=i[R],l!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:De(t,a,R,l,i,null)}return;default:if(no(a)){for(U in i)i.hasOwnProperty(U)&&(l=i[U],l!==void 0&&Hc(t,a,U,l,i,void 0));return}}for(_ in i)i.hasOwnProperty(_)&&(l=i[_],l!=null&&De(t,a,_,l,i,null))}function y0(t,a,i,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,g=null,_=null,S=null,R=null,U=null;for(M in i){var B=i[M];if(i.hasOwnProperty(M)&&B!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":S=B;default:l.hasOwnProperty(M)||De(t,a,M,null,l,B)}}for(var j in l){var M=l[j];if(B=i[j],l.hasOwnProperty(j)&&(M!=null||B!=null))switch(j){case"type":h=M;break;case"name":f=M;break;case"checked":R=M;break;case"defaultChecked":U=M;break;case"value":g=M;break;case"defaultValue":_=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,a));break;default:M!==B&&De(t,a,j,M,l,B)}}to(t,g,_,S,R,U,h,f);return;case"select":M=g=_=j=null;for(h in i)if(S=i[h],i.hasOwnProperty(h)&&S!=null)switch(h){case"value":break;case"multiple":M=S;default:l.hasOwnProperty(h)||De(t,a,h,null,l,S)}for(f in l)if(h=l[f],S=i[f],l.hasOwnProperty(f)&&(h!=null||S!=null))switch(f){case"value":j=h;break;case"defaultValue":_=h;break;case"multiple":g=h;default:h!==S&&De(t,a,f,h,l,S)}a=_,i=g,l=M,j!=null?Sr(t,!!i,j,!1):!!l!=!!i&&(a!=null?Sr(t,!!i,a,!0):Sr(t,!!i,i?[]:"",!1));return;case"textarea":M=j=null;for(_ in i)if(f=i[_],i.hasOwnProperty(_)&&f!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:De(t,a,_,null,l,f)}for(g in l)if(f=l[g],h=i[g],l.hasOwnProperty(g)&&(f!=null||h!=null))switch(g){case"value":j=f;break;case"defaultValue":M=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==h&&De(t,a,g,f,l,h)}Oh(t,j,M);return;case"option":for(var se in i)if(j=i[se],i.hasOwnProperty(se)&&j!=null&&!l.hasOwnProperty(se))switch(se){case"selected":t.selected=!1;break;default:De(t,a,se,null,l,j)}for(S in l)if(j=l[S],M=i[S],l.hasOwnProperty(S)&&j!==M&&(j!=null||M!=null))switch(S){case"selected":t.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:De(t,a,S,j,l,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in i)j=i[me],i.hasOwnProperty(me)&&j!=null&&!l.hasOwnProperty(me)&&De(t,a,me,null,l,j);for(R in l)if(j=l[R],M=i[R],l.hasOwnProperty(R)&&j!==M&&(j!=null||M!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,a));break;default:De(t,a,R,j,l,M)}return;default:if(no(a)){for(var Ye in i)j=i[Ye],i.hasOwnProperty(Ye)&&j!==void 0&&!l.hasOwnProperty(Ye)&&Hc(t,a,Ye,void 0,l,j);for(U in l)j=l[U],M=i[U],!l.hasOwnProperty(U)||j===M||j===void 0&&M===void 0||Hc(t,a,U,j,l,M);return}}for(var N in i)j=i[N],i.hasOwnProperty(N)&&j!=null&&!l.hasOwnProperty(N)&&De(t,a,N,null,l,j);for(B in l)j=l[B],M=i[B],!l.hasOwnProperty(B)||j===M||j==null&&M==null||De(t,a,B,j,l,M)}var qc=null,Zc=null;function Ju(t){return t.nodeType===9?t:t.ownerDocument}function vy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _y(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Gc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Vc=null;function g0(){var t=window.event;return t&&t.type==="popstate"?t===Vc?!1:(Vc=t,!0):(Vc=null,!1)}var wy=typeof setTimeout=="function"?setTimeout:void 0,b0=typeof clearTimeout=="function"?clearTimeout:void 0,Ey=typeof Promise=="function"?Promise:void 0,v0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ey<"u"?function(t){return Ey.resolve(null).then(t).catch(_0)}:wy;function _0(t){setTimeout(function(){throw t})}function Yc(t,a){var i=a,l=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(l===0){t.removeChild(f),ds(a);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=f}while(i);ds(a)}function Xc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Xc(i),eo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function w0(t,a,i,l){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_i])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=fa(t.nextSibling),t===null)break}return null}function E0(t,a,i){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=fa(t.nextSibling),t===null))return null;return t}function fa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}function Sy(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(a===0)return t;a--}else i==="/$"&&a++}t=t.previousSibling}return null}function Ty(t,a,i){switch(a=Ju(i),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}var sa=new Map,Oy=new Set;function Wu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Fa=F.d;F.d={f:S0,r:T0,D:O0,C:A0,L:R0,m:x0,X:C0,S:N0,M:j0};function S0(){var t=Fa.f(),a=Gu();return t||a}function T0(t){var a=_r(t);a!==null&&a.tag===5&&a.type==="form"?Jm(a):Fa.r(t)}var Kr=typeof document>"u"?null:document;function Ay(t,a,i){var l=Kr;if(l&&typeof a=="string"&&a){var f=Qt(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),Oy.has(f)||(Oy.add(f),t={rel:t,crossOrigin:i,href:a},l.querySelector(f)===null&&(a=l.createElement("link"),mt(a,"link",t),rt(a),l.head.appendChild(a)))}}function O0(t){Fa.D(t),Ay("dns-prefetch",t,null)}function A0(t,a){Fa.C(t,a),Ay("preconnect",t,a)}function R0(t,a,i){Fa.L(t,a,i);var l=Kr;if(l&&t&&a){var f='link[rel="preload"][as="'+Qt(a)+'"]';a==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Qt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Qt(i.imageSizes)+'"]')):f+='[href="'+Qt(t)+'"]';var h=f;switch(a){case"style":h=Jr(t);break;case"script":h=Wr(t)}sa.has(h)||(t=ve({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:t,as:a},i),sa.set(h,t),l.querySelector(f)!==null||a==="style"&&l.querySelector(is(h))||a==="script"&&l.querySelector(ss(h))||(a=l.createElement("link"),mt(a,"link",t),rt(a),l.head.appendChild(a)))}}function x0(t,a){Fa.m(t,a);var i=Kr;if(i&&t){var l=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Qt(l)+'"][href="'+Qt(t)+'"]',h=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Wr(t)}if(!sa.has(h)&&(t=ve({rel:"modulepreload",href:t},a),sa.set(h,t),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ss(h)))return}l=i.createElement("link"),mt(l,"link",t),rt(l),i.head.appendChild(l)}}}function N0(t,a,i){Fa.S(t,a,i);var l=Kr;if(l&&t){var f=wr(l).hoistableStyles,h=Jr(t);a=a||"default";var g=f.get(h);if(!g){var _={loading:0,preload:null};if(g=l.querySelector(is(h)))_.loading=5;else{t=ve({rel:"stylesheet",href:t,"data-precedence":a},i),(i=sa.get(h))&&Fc(t,i);var S=g=l.createElement("link");rt(S),mt(S,"link",t),S._p=new Promise(function(R,U){S.onload=R,S.onerror=U}),S.addEventListener("load",function(){_.loading|=1}),S.addEventListener("error",function(){_.loading|=2}),_.loading|=4,el(g,a,l)}g={type:"stylesheet",instance:g,count:1,state:_},f.set(h,g)}}}function C0(t,a){Fa.X(t,a);var i=Kr;if(i&&t){var l=wr(i).hoistableScripts,f=Wr(t),h=l.get(f);h||(h=i.querySelector(ss(f)),h||(t=ve({src:t,async:!0},a),(a=sa.get(f))&&Qc(t,a),h=i.createElement("script"),rt(h),mt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(f,h))}}function j0(t,a){Fa.M(t,a);var i=Kr;if(i&&t){var l=wr(i).hoistableScripts,f=Wr(t),h=l.get(f);h||(h=i.querySelector(ss(f)),h||(t=ve({src:t,async:!0,type:"module"},a),(a=sa.get(f))&&Qc(t,a),h=i.createElement("script"),rt(h),mt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(f,h))}}function Ry(t,a,i,l){var f=(f=tn.current)?Wu(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Jr(i.href),i=wr(f).hoistableStyles,l=i.get(a),l||(l={type:"style",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Jr(i.href);var h=wr(f).hoistableStyles,g=h.get(t);if(g||(f=f.ownerDocument||f,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,g),(h=f.querySelector(is(t)))&&!h._p&&(g.instance=h,g.state.loading=5),sa.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},sa.set(t,i),h||k0(f,t,i,g.state))),a&&l===null)throw Error(r(528,""));return g}if(a&&l!==null)throw Error(r(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Wr(i),i=wr(f).hoistableScripts,l=i.get(a),l||(l={type:"script",instance:null,count:0,state:null},i.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Jr(t){return'href="'+Qt(t)+'"'}function is(t){return'link[rel="stylesheet"]['+t+"]"}function xy(t){return ve({},t,{"data-precedence":t.precedence,precedence:null})}function k0(t,a,i,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),mt(a,"link",i),rt(a),t.head.appendChild(a))}function Wr(t){return'[src="'+Qt(t)+'"]'}function ss(t){return"script[async]"+t}function Ny(t,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+Qt(i.href)+'"]');if(l)return a.instance=l,rt(l),l;var f=ve({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),rt(l),mt(l,"style",f),el(l,i.precedence,t),a.instance=l;case"stylesheet":f=Jr(i.href);var h=t.querySelector(is(f));if(h)return a.state.loading|=4,a.instance=h,rt(h),h;l=xy(i),(f=sa.get(f))&&Fc(l,f),h=(t.ownerDocument||t).createElement("link"),rt(h);var g=h;return g._p=new Promise(function(_,S){g.onload=_,g.onerror=S}),mt(h,"link",l),a.state.loading|=4,el(h,i.precedence,t),a.instance=h;case"script":return h=Wr(i.src),(f=t.querySelector(ss(h)))?(a.instance=f,rt(f),f):(l=i,(f=sa.get(h))&&(l=ve({},i),Qc(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),rt(f),mt(f,"link",l),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,el(l,i.precedence,t));return a.instance}function el(t,a,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,h=f,g=0;g<l.length;g++){var _=l[g];if(_.dataset.precedence===a)h=_;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(t,a.firstChild))}function Fc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Qc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var tl=null;function Cy(t,a,i){if(tl===null){var l=new Map,f=tl=new Map;f.set(i,l)}else f=tl,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var h=i[f];if(!(h[_i]||h[bt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var g=h.getAttribute(a)||"";g=t+g;var _=l.get(g);_?_.push(h):l.set(g,[h])}}return l}function jy(t,a,i){t=t.ownerDocument||t,t.head.insertBefore(i,a==="title"?t.querySelector("head > title"):null)}function L0(t,a,i){if(i===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ky(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var us=null;function $0(){}function D0(t,a,i){if(us===null)throw Error(r(475));var l=us;if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Jr(i.href),h=t.querySelector(is(f));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=al.bind(l),t.then(l,l)),a.state.loading|=4,a.instance=h,rt(h);return}h=t.ownerDocument||t,i=xy(i),(f=sa.get(f))&&Fc(i,f),h=h.createElement("link"),rt(h);var g=h;g._p=new Promise(function(_,S){g.onload=_,g.onerror=S}),mt(h,"link",i),a.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=al.bind(l),t.addEventListener("load",a),t.addEventListener("error",a))}}function M0(){if(us===null)throw Error(r(475));var t=us;return t.stylesheets&&t.count===0&&Kc(t,t.stylesheets),0<t.count?function(a){var i=setTimeout(function(){if(t.stylesheets&&Kc(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(i)}}:null}function al(){if(this.count--,this.count===0){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var nl=null;function Kc(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,nl=new Map,a.forEach(U0,t),nl=null,al.call(t))}function U0(t,a){if(!(a.state.loading&4)){var i=nl.get(t);if(i)var l=i.get(null);else{i=new Map,nl.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var g=f[h];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),l=g)}l&&i.set(null,l)}f=a.instance,g=f.getAttribute("data-precedence"),h=i.get(g)||l,h===l&&i.set(null,f),i.set(g,f),this.count++,l=al.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var ls={$$typeof:w,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function P0(t,a,i,l,f,h,g,_){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.hiddenUpdates=Jl(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Ly(t,a,i,l,f,h,g,_,S,R,U,B){return t=new P0(t,a,i,g,_,S,R,B),a=1,h===!0&&(a|=24),h=ra(3,null,null,a),t.current=h,h.stateNode=t,a=No(),a.refCount++,t.pooledCache=a,a.refCount++,h.memoizedState={element:l,isDehydrated:i,cache:a},oc(h),t}function $y(t){return t?(t=jr,t):jr}function Dy(t,a,i,l,f,h){f=$y(f),l.context===null?l.context=f:l.pendingContext=f,l=hn(a),l.payload={element:i},h=h===void 0?null:h,h!==null&&(l.callback=h),i=mn(t,l,a),i!==null&&(Tt(i,t,a),Gi(i,t,a))}function My(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function Jc(t,a){My(t,a),(t=t.alternate)&&My(t,a)}function Uy(t){if(t.tag===13){var a=sn(t,67108864);a!==null&&Tt(a,t,67108864),Jc(t,67108864)}}var rl=!0;function z0(t,a,i,l){var f=re.T;re.T=null;var h=F.p;try{F.p=2,Wc(t,a,i,l)}finally{F.p=h,re.T=f}}function I0(t,a,i,l){var f=re.T;re.T=null;var h=F.p;try{F.p=8,Wc(t,a,i,l)}finally{F.p=h,re.T=f}}function Wc(t,a,i,l){if(rl){var f=ef(l);if(f===null)Bc(t,a,l,il,i),zy(t,l);else if(H0(f,t,a,i,l))l.stopPropagation();else if(zy(t,l),a&4&&-1<B0.indexOf(t)){for(;f!==null;){var h=_r(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=zn(h.pendingLanes);if(g!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;g;){var S=1<<31-Pt(g);_.entanglements[1]|=S,g&=~S}xa(h),(He&6)===0&&(Hu=Sa()+500,as(0))}}break;case 13:_=sn(h,2),_!==null&&Tt(_,h,2),Gu(),Jc(h,2)}if(h=ef(l),h===null&&Bc(t,a,l,il,i),h===f)break;f=h}f!==null&&l.stopPropagation()}else Bc(t,a,l,null,i)}}function ef(t){return t=io(t),tf(t)}var il=null;function tf(t){if(il=null,t=In(t),t!==null){var a=q(t);if(a===null)t=null;else{var i=a.tag;if(i===13){if(t=X(a),t!==null)return t;t=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return il=t,null}function Py(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Av()){case lh:return 2;case oh:return 8;case eu:case Rv:return 32;case ch:return 268435456;default:return 32}default:return 32}}var af=!1,wn=null,En=null,Sn=null,os=new Map,cs=new Map,Tn=[],B0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(t,a){switch(t){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":os.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(a.pointerId)}}function fs(t,a,i,l,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:a,domEventName:i,eventSystemFlags:l,nativeEvent:h,targetContainers:[f]},a!==null&&(a=_r(a),a!==null&&Uy(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function H0(t,a,i,l,f){switch(a){case"focusin":return wn=fs(wn,t,a,i,l,f),!0;case"dragenter":return En=fs(En,t,a,i,l,f),!0;case"mouseover":return Sn=fs(Sn,t,a,i,l,f),!0;case"pointerover":var h=f.pointerId;return os.set(h,fs(os.get(h)||null,t,a,i,l,f)),!0;case"gotpointercapture":return h=f.pointerId,cs.set(h,fs(cs.get(h)||null,t,a,i,l,f)),!0}return!1}function Iy(t){var a=In(t.target);if(a!==null){var i=q(a);if(i!==null){if(a=i.tag,a===13){if(a=X(i),a!==null){t.blockedOn=a,Mv(t.priority,function(){if(i.tag===13){var l=qt(),f=sn(i,l);f!==null&&Tt(f,i,l),Jc(i,l)}});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var i=ef(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);ro=l,i.target.dispatchEvent(l),ro=null}else return a=_r(i),a!==null&&Uy(a),t.blockedOn=i,!1;a.shift()}return!0}function By(t,a,i){sl(t)&&i.delete(a)}function q0(){af=!1,wn!==null&&sl(wn)&&(wn=null),En!==null&&sl(En)&&(En=null),Sn!==null&&sl(Sn)&&(Sn=null),os.forEach(By),cs.forEach(By)}function ul(t,a){t.blockedOn===a&&(t.blockedOn=null,af||(af=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,q0)))}var ll=null;function Hy(t){ll!==t&&(ll=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ll===t&&(ll=null);for(var a=0;a<t.length;a+=3){var i=t[a],l=t[a+1],f=t[a+2];if(typeof l!="function"){if(tf(l||i)===null)continue;break}var h=_r(i);h!==null&&(t.splice(a,3),a-=3,Go(h,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function ds(t){function a(S){return ul(S,t)}wn!==null&&ul(wn,t),En!==null&&ul(En,t),Sn!==null&&ul(Sn,t),os.forEach(a),cs.forEach(a);for(var i=0;i<Tn.length;i++){var l=Tn[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Tn.length&&(i=Tn[0],i.blockedOn===null);)Iy(i),i.blockedOn===null&&Tn.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],h=i[l+1],g=f[jt]||null;if(typeof h=="function")g||Hy(i);else if(g){var _=null;if(h&&h.hasAttribute("formAction")){if(f=h,g=h[jt]||null)_=g.formAction;else if(tf(f)!==null)continue}else _=g.action;typeof _=="function"?i[l+1]=_:(i.splice(l,3),l-=3),Hy(i)}}}function nf(t){this._internalRoot=t}ol.prototype.render=nf.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var i=a.current,l=qt();Dy(i,l,t,a,null,null)},ol.prototype.unmount=nf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;t.tag===0&&Xr(),Dy(t.current,2,null,t,null,null),Gu(),a[vr]=null}};function ol(t){this._internalRoot=t}ol.prototype.unstable_scheduleHydration=function(t){if(t){var a=yh();t={blockedOn:null,target:t,priority:a};for(var i=0;i<Tn.length&&a!==0&&a<Tn[i].priority;i++);Tn.splice(i,0,t),i===0&&Iy(t)}};var qy=e.version;if(qy!=="19.0.0")throw Error(r(527,qy,"19.0.0"));F.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=D(a),t=t!==null?V(t):null,t=t===null?null:t.stateNode,t};var Z0={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:re,findFiberByHostInstance:In,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{gi=cl.inject(Z0),Ut=cl}catch{}}return ms.createRoot=function(t,a){if(!u(t))throw Error(r(299));var i=!1,l="",f=sp,h=up,g=lp,_=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(_=a.unstable_transitionCallbacks)),a=Ly(t,1,!1,null,null,i,l,f,h,g,_,null),t[vr]=a.current,Ic(t.nodeType===8?t.parentNode:t),new nf(a)},ms.hydrateRoot=function(t,a,i){if(!u(t))throw Error(r(299));var l=!1,f="",h=sp,g=up,_=lp,S=null,R=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks),i.formState!==void 0&&(R=i.formState)),a=Ly(t,1,!0,a,i??null,l,f,h,g,_,S,R),a.context=$y(null),i=a.current,l=qt(),f=hn(l),f.callback=null,mn(i,f,l),a.current.lanes=l,vi(a,l),xa(a),t[vr]=a.current,Ic(t),new ol(a)},ms.version="19.0.0",ms}var Wy;function aw(){if(Wy)return uf.exports;Wy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),uf.exports=tw(),uf.exports}var nw=aw();function rw(s){if(typeof s>"u")return null;try{return JSON.parse(s)}catch{}let e="";const n=[];let r=!1,u=!1;for(let o of s){if(r)o==='"'&&!u?r=!1:o===`
`&&!u?o="\\n":o==="\\"?u=!u:u=!1;else if(o==='"')r=!0,u=!1;else if(o==="{")n.push("}");else if(o==="[")n.push("]");else if(o==="}"||o==="]")if(n&&n[n.length-1]===o)n.pop();else return null;e+=o}r&&(e+='"');for(let o=n.length-1;o>=0;o-=1)e+=n[o];try{return JSON.parse(e)}catch{return null}}var ff,eg;function iw(){return eg||(eg=1,ff=function(s,e){if(typeof s!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,s.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),ff}var sw=iw();const uw=qs(sw);var fl={exports:{}},tg;function lw(){if(tg)return fl.exports;tg=1;const s=/[\p{Lu}]/u,e=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,u=/[_.\- ]+/,o=new RegExp("^"+u.source),c=new RegExp(u.source+r.source,"gu"),d=new RegExp("\\d+"+r.source,"gu"),m=(v,w,E)=>{let O=!1,x=!1,k=!1;for(let z=0;z<v.length;z++){const L=v[z];O&&s.test(L)?(v=v.slice(0,z)+"-"+v.slice(z),O=!1,k=x,x=!0,z++):x&&k&&e.test(L)?(v=v.slice(0,z-1)+"-"+v.slice(z-1),k=x,x=!1,O=!0):(O=w(L)===L&&E(L)!==L,k=x,x=E(L)===L&&w(L)!==L)}return v},p=(v,w)=>(n.lastIndex=0,v.replace(n,E=>w(E))),y=(v,w)=>(c.lastIndex=0,d.lastIndex=0,v.replace(c,(E,O)=>w(O)).replace(d,E=>w(E))),b=(v,w)=>{if(!(typeof v=="string"||Array.isArray(v)))throw new TypeError("Expected the input to be `string | string[]`");if(w={pascalCase:!1,preserveConsecutiveUppercase:!1,...w},Array.isArray(v)?v=v.map(k=>k.trim()).filter(k=>k.length).join("-"):v=v.trim(),v.length===0)return"";const E=w.locale===!1?k=>k.toLowerCase():k=>k.toLocaleLowerCase(w.locale),O=w.locale===!1?k=>k.toUpperCase():k=>k.toLocaleUpperCase(w.locale);return v.length===1?w.pascalCase?O(v):E(v):(v!==E(v)&&(v=m(v,E,O)),v=v.replace(o,""),w.preserveConsecutiveUppercase?v=p(v,E):v=E(v),w.pascalCase&&(v=O(v.charAt(0))+v.slice(1)),y(v,O))};return fl.exports=b,fl.exports.default=b,fl.exports}lw();function ow(s,e){return(e==null?void 0:e[s])||uw(s)}function cw(s,e,n){const r={};for(const u in s)Object.hasOwn(s,u)&&(r[e(u,n)]=s[u]);return r}function ag(s){return Array.isArray(s)?[...s]:{...s}}function fw(s,e){const n=ag(s);for(const[r,u]of Object.entries(e)){const[o,...c]=r.split(".").reverse();let d=n;for(const m of c.reverse()){if(d[m]===void 0)break;d[m]=ag(d[m]),d=d[m]}d[o]!==void 0&&(d[o]={lc:1,type:"secret",id:[u]})}return n}function Pb(s){const e=Object.getPrototypeOf(s);return typeof s.lc_name=="function"&&(typeof e.lc_name!="function"||s.lc_name()!==e.lc_name())?s.lc_name():s.name}class kn{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Pb(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var u;return(u=this.lc_serializable_keys)==null?void 0:u.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof kn||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((u,o)=>(u[o]=o in this?this[o]:this.lc_kwargs[o],u),{});for(let u=Object.getPrototypeOf(this);u;u=Object.getPrototypeOf(u))Object.assign(e,Reflect.get(u,"lc_aliases",this)),Object.assign(n,Reflect.get(u,"lc_secrets",this)),Object.assign(r,Reflect.get(u,"lc_attributes",this));return Object.keys(n).forEach(u=>{let o=this,c=r;const[d,...m]=u.split(".").reverse();for(const p of m.reverse()){if(!(p in o)||o[p]===void 0)return;(!(p in c)||c[p]===void 0)&&(typeof o[p]=="object"&&o[p]!=null?c[p]={}:Array.isArray(o[p])&&(c[p]=[])),o=o[p],c=c[p]}d in o&&o[d]!==void 0&&(c[d]=c[d]||o[d])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:cw(Object.keys(n).length?fw(r,n):r,ow,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function dw(s,e){return typeof s=="string"?s===""?e:typeof e=="string"?s+e:[{type:"text",text:s},...e]:Array.isArray(e)?Hd(s,e)??[...s,...e]:e===""?s:[...s,{type:"text",text:e}]}function hw(s,e){function n(r,u){if(typeof r!="object"||r===null||r===void 0)return r;if(u>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(c=>n(c,u+1));const o={};for(const c of Object.keys(r))o[c]=n(r[c],u+1);return o}return JSON.stringify(n(s,0),null,2)}class Zs extends kn{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=hw(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function El(s,e){const n={...s};for(const[r,u]of Object.entries(e))if(n[r]==null)n[r]=u;else{if(u==null)continue;if(typeof n[r]!=typeof u||Array.isArray(n[r])!==Array.isArray(u))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;n[r]+=u}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=El(n[r],u);else if(Array.isArray(n[r]))n[r]=Hd(n[r],u);else{if(n[r]===u)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function Hd(s,e){if(!(s===void 0&&e===void 0)){if(s===void 0||e===void 0)return s||e;{const n=[...s];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const u=n.findIndex(o=>o.index===r.index);u!==-1?n[u]=El(n[u],r):n.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}class mw extends Zs{}function pw(s){return typeof s.role=="string"}function yw(s){return typeof(s==null?void 0:s._getType)=="function"}class gw extends Zs{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function bw(s){const e=[],n=[];for(const r of s)if(r.function){const u=r.function.name;try{const o=JSON.parse(r.function.arguments),c={name:u||"",args:o||{},id:r.id};e.push(c)}catch{n.push({name:u,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class ui extends Zs{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var u;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const o=(u=r.additional_kwargs)==null?void 0:u.tool_calls,c=r.tool_calls;o!=null&&o.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(o!=null&&c===void 0){const[d,m]=bw(o);r.tool_calls=d??[],r.invalid_tool_calls=m??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}class Pl extends mw{constructor(e){let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],u=[];for(const o of e.tool_call_chunks){let c={};try{if(c=rw(o.args||"{}"),c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");r.push({name:o.name??"",args:c,id:o.id,type:"tool_call"})}catch{u.push({name:o.name,args:o.args,id:o.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:r,invalid_tool_calls:u,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,u,o,c,d,m,p,y,b,v,w,E,O,x,k,z,L,ae,I,W,ce,te,re,ve,We,gt,ft,K,G,$,H,q,X,T,D,V,Q,F,le,de;const n={content:dw(this.content,e.content),additional_kwargs:El(this.additional_kwargs,e.additional_kwargs),response_metadata:El(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Ze=Hd(this.tool_call_chunks,e.tool_call_chunks);Ze!==void 0&&Ze.length>0&&(n.tool_call_chunks=Ze)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Ze={...(((u=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:u.audio)!==void 0||((c=(o=e.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:c.audio)!==void 0)&&{audio:(((m=(d=this.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:m.audio)??0)+(((y=(p=e.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:y.audio)??0)},...(((v=(b=this.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:v.cache_read)!==void 0||((E=(w=e.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:E.cache_read)!==void 0)&&{cache_read:(((x=(O=this.usage_metadata)==null?void 0:O.input_token_details)==null?void 0:x.cache_read)??0)+(((z=(k=e.usage_metadata)==null?void 0:k.input_token_details)==null?void 0:z.cache_read)??0)},...(((ae=(L=this.usage_metadata)==null?void 0:L.input_token_details)==null?void 0:ae.cache_creation)!==void 0||((W=(I=e.usage_metadata)==null?void 0:I.input_token_details)==null?void 0:W.cache_creation)!==void 0)&&{cache_creation:(((te=(ce=this.usage_metadata)==null?void 0:ce.input_token_details)==null?void 0:te.cache_creation)??0)+(((ve=(re=e.usage_metadata)==null?void 0:re.input_token_details)==null?void 0:ve.cache_creation)??0)}},xe={...(((gt=(We=this.usage_metadata)==null?void 0:We.output_token_details)==null?void 0:gt.audio)!==void 0||((K=(ft=e.usage_metadata)==null?void 0:ft.output_token_details)==null?void 0:K.audio)!==void 0)&&{audio:((($=(G=this.usage_metadata)==null?void 0:G.output_token_details)==null?void 0:$.audio)??0)+(((q=(H=e.usage_metadata)==null?void 0:H.output_token_details)==null?void 0:q.audio)??0)},...(((T=(X=this.usage_metadata)==null?void 0:X.output_token_details)==null?void 0:T.reasoning)!==void 0||((V=(D=e.usage_metadata)==null?void 0:D.output_token_details)==null?void 0:V.reasoning)!==void 0)&&{reasoning:(((F=(Q=this.usage_metadata)==null?void 0:Q.output_token_details)==null?void 0:F.reasoning)??0)+(((de=(le=e.usage_metadata)==null?void 0:le.output_token_details)==null?void 0:de.reasoning)??0)}},Ie=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Le=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Xt={input_tokens:Ie.input_tokens+Le.input_tokens,output_tokens:Ie.output_tokens+Le.output_tokens,total_tokens:Ie.total_tokens+Le.total_tokens,...Object.keys(Ze).length>0&&{input_token_details:Ze},...Object.keys(xe).length>0&&{output_token_details:xe}};n.usage_metadata=Xt}return new Pl(n)}}class Gs extends Zs{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class ng extends Zs{static lc_name(){return"SystemMessage"}_getType(){return"system"}}function vw(s,e){return s.lc_error_code=e,s.message=`${s.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,s}function zb(s){return!!(s&&typeof s=="object"&&"type"in s&&s.type==="tool_call")}class _w extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function ww(s){return zb(s)?s:typeof s.id=="string"&&s.type==="function"&&typeof s.function=="object"&&s.function!==null&&"arguments"in s.function&&typeof s.function.arguments=="string"&&"name"in s.function&&typeof s.function.name=="string"?{id:s.id,args:JSON.parse(s.function.arguments),name:s.function.name,type:"tool_call"}:s}function Ew(s){return typeof s=="object"&&s!=null&&s.lc===1&&Array.isArray(s.id)&&s.kwargs!=null&&typeof s.kwargs=="object"}function df(s){let e,n;if(Ew(s)){const r=s.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=s.kwargs}else{const{type:r,...u}=s;e=r,n=u}if(e==="human"||e==="user")return new Gs(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...u}=n;if(!Array.isArray(r))return new ui(n);const o=r.map(ww);return new ui({...u,tool_calls:o})}else{if(e==="system")return new ng(n);if(e==="developer")return new ng({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new gw({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw vw(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(s,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Sw(s){if(typeof s=="string")return new Gs(s);if(yw(s))return s;if(Array.isArray(s)){const[e,n]=s;return df({type:e,content:n})}else if(pw(s)){const{role:e,...n}=s;return df({...n,type:e})}else return df(s)}function qd(s,e="Human",n="AI"){const r=[];for(const u of s){let o;if(u._getType()==="human")o=e;else if(u._getType()==="ai")o=n;else if(u._getType()==="system")o="System";else if(u._getType()==="function")o="Function";else if(u._getType()==="tool")o="Tool";else if(u._getType()==="generic")o=u.role;else throw new Error(`Got unsupported message type: ${u._getType()}`);const c=u.name?`${u.name}, `:"",d=typeof u.content=="string"?u.content:JSON.stringify(u.content,null,2);r.push(`${o}: ${c}${d}`)}return r.join(`
`)}var Re;(function(s){s.assertEqual=u=>u;function e(u){}s.assertIs=e;function n(u){throw new Error}s.assertNever=n,s.arrayToEnum=u=>{const o={};for(const c of u)o[c]=c;return o},s.getValidEnumValues=u=>{const o=s.objectKeys(u).filter(d=>typeof u[u[d]]!="number"),c={};for(const d of o)c[d]=u[d];return s.objectValues(c)},s.objectValues=u=>s.objectKeys(u).map(function(o){return u[o]}),s.objectKeys=typeof Object.keys=="function"?u=>Object.keys(u):u=>{const o=[];for(const c in u)Object.prototype.hasOwnProperty.call(u,c)&&o.push(c);return o},s.find=(u,o)=>{for(const c of u)if(o(c))return c},s.isInteger=typeof Number.isInteger=="function"?u=>Number.isInteger(u):u=>typeof u=="number"&&isFinite(u)&&Math.floor(u)===u;function r(u,o=" | "){return u.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}s.joinValues=r,s.jsonStringifyReplacer=(u,o)=>typeof o=="bigint"?o.toString():o})(Re||(Re={}));var xd;(function(s){s.mergeShapes=(e,n)=>({...e,...n})})(xd||(xd={}));const ee=Re.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ja=s=>{switch(typeof s){case"undefined":return ee.undefined;case"string":return ee.string;case"number":return isNaN(s)?ee.nan:ee.number;case"boolean":return ee.boolean;case"function":return ee.function;case"bigint":return ee.bigint;case"symbol":return ee.symbol;case"object":return Array.isArray(s)?ee.array:s===null?ee.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?ee.promise:typeof Map<"u"&&s instanceof Map?ee.map:typeof Set<"u"&&s instanceof Set?ee.set:typeof Date<"u"&&s instanceof Date?ee.date:ee.object;default:return ee.unknown}},Z=Re.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Tw=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class Vt extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},u=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(u);else if(c.code==="invalid_return_type")u(c.returnTypeError);else if(c.code==="invalid_arguments")u(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let d=r,m=0;for(;m<c.path.length;){const p=c.path[m];m===c.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(n(c))):d[p]=d[p]||{_errors:[]},d=d[p],m++}}};return u(this),r}static assert(e){if(!(e instanceof Vt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Re.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const u of this.issues)u.path.length>0?(n[u.path[0]]=n[u.path[0]]||[],n[u.path[0]].push(e(u))):r.push(e(u));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Vt.create=s=>new Vt(s);const li=(s,e)=>{let n;switch(s.code){case Z.invalid_type:s.received===ee.undefined?n="Required":n=`Expected ${s.expected}, received ${s.received}`;break;case Z.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(s.expected,Re.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:n=`Unrecognized key(s) in object: ${Re.joinValues(s.keys,", ")}`;break;case Z.invalid_union:n="Invalid input";break;case Z.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Re.joinValues(s.options)}`;break;case Z.invalid_enum_value:n=`Invalid enum value. Expected ${Re.joinValues(s.options)}, received '${s.received}'`;break;case Z.invalid_arguments:n="Invalid function arguments";break;case Z.invalid_return_type:n="Invalid function return type";break;case Z.invalid_date:n="Invalid date";break;case Z.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(n=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?n=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?n=`Invalid input: must end with "${s.validation.endsWith}"`:Re.assertNever(s.validation):s.validation!=="regex"?n=`Invalid ${s.validation}`:n="Invalid";break;case Z.too_small:s.type==="array"?n=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?n=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?n=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?n=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:n="Invalid input";break;case Z.too_big:s.type==="array"?n=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?n=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?n=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?n=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?n=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:n="Invalid input";break;case Z.custom:n="Invalid input";break;case Z.invalid_intersection_types:n="Intersection results could not be merged";break;case Z.not_multiple_of:n=`Number must be a multiple of ${s.multipleOf}`;break;case Z.not_finite:n="Number must be finite";break;default:n=e.defaultError,Re.assertNever(s)}return{message:n}};let Ib=li;function Ow(s){Ib=s}function Sl(){return Ib}const Tl=s=>{const{data:e,path:n,errorMaps:r,issueData:u}=s,o=[...n,...u.path||[]],c={...u,path:o};if(u.message!==void 0)return{...u,path:o,message:u.message};let d="";const m=r.filter(p=>!!p).slice().reverse();for(const p of m)d=p(c,{data:e,defaultError:d}).message;return{...u,path:o,message:d}},Aw=[];function J(s,e){const n=Sl(),r=Tl({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,n,n===li?void 0:li].filter(u=>!!u)});s.common.issues.push(r)}class Et{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const u of n){if(u.status==="aborted")return he;u.status==="dirty"&&e.dirty(),r.push(u.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const u of n){const o=await u.key,c=await u.value;r.push({key:o,value:c})}return Et.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const u of n){const{key:o,value:c}=u;if(o.status==="aborted"||c.status==="aborted")return he;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||u.alwaysSet)&&(r[o.value]=c.value)}return{status:e.value,value:r}}}const he=Object.freeze({status:"aborted"}),ai=s=>({status:"dirty",value:s}),Nt=s=>({status:"valid",value:s}),Nd=s=>s.status==="aborted",Cd=s=>s.status==="dirty",hr=s=>s.status==="valid",Rs=s=>typeof Promise<"u"&&s instanceof Promise;function Ol(s,e,n,r){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(s)}function Bb(s,e,n,r,u){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,n),n}var ie;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ie||(ie={}));var vs,_s;class Ca{constructor(e,n,r,u){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=u}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const rg=(s,e)=>{if(hr(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vt(s.common.issues);return this._error=n,this._error}}};function ye(s){if(!s)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:u}=s;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:u}:{errorMap:(c,d)=>{var m,p;const{message:y}=s;return c.code==="invalid_enum_value"?{message:y??d.defaultError}:typeof d.data>"u"?{message:(m=y??r)!==null&&m!==void 0?m:d.defaultError}:c.code!=="invalid_type"?{message:d.defaultError}:{message:(p=y??n)!==null&&p!==void 0?p:d.defaultError}},description:u}}class we{get description(){return this._def.description}_getType(e){return Ja(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ja(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Et,ctx:{common:e.parent.common,data:e.data,parsedType:Ja(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Rs(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const u={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ja(e)},o=this._parseSync({data:e,path:u.path,parent:u});return rg(u,o)}"~validate"(e){var n,r;const u={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ja(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:u});return hr(o)?{value:o.value}:{issues:u.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),u.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:u}).then(o=>hr(o)?{value:o.value}:{issues:u.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ja(e)},u=this._parse({data:e,path:r.path,parent:r}),o=await(Rs(u)?u:Promise.resolve(u));return rg(r,o)}refine(e,n){const r=u=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(u):n;return this._refinement((u,o)=>{const c=e(u),d=()=>o.addIssue({code:Z.custom,...r(u)});return typeof Promise<"u"&&c instanceof Promise?c.then(m=>m?!0:(d(),!1)):c?!0:(d(),!1)})}refinement(e,n){return this._refinement((r,u)=>e(r)?!0:(u.addIssue(typeof n=="function"?n(r,u):n),!1))}_refinement(e){return new va({schema:this,typeName:Y.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ga.create(this,this._def)}nullable(){return Mn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ya.create(this)}promise(){return ci.create(this,this._def)}or(e){return js.create([this,e],this._def)}and(e){return ks.create(this,e,this._def)}transform(e){return new va({...ye(this._def),schema:this,typeName:Y.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Us({...ye(this._def),innerType:this,defaultValue:n,typeName:Y.ZodDefault})}brand(){return new Zd({typeName:Y.ZodBranded,type:this,...ye(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ps({...ye(this._def),innerType:this,catchValue:n,typeName:Y.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Vs.create(this,e)}readonly(){return zs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Rw=/^c[^\s-]{8,}$/i,xw=/^[0-9a-z]+$/,Nw=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Cw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jw=/^[a-z0-9_-]{21}$/i,kw=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Lw=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$w=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Dw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hf;const Mw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Uw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Pw=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zw=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Iw=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bw=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Hb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Hw=new RegExp(`^${Hb}$`);function qb(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function qw(s){return new RegExp(`^${qb(s)}$`)}function Zb(s){let e=`${Hb}T${qb(s)}`;const n=[];return n.push(s.local?"Z?":"Z"),s.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Zw(s,e){return!!((e==="v4"||!e)&&Mw.test(s)||(e==="v6"||!e)&&Pw.test(s))}function Gw(s,e){if(!kw.test(s))return!1;try{const[n]=s.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),u=JSON.parse(atob(r));return!(typeof u!="object"||u===null||!u.typ||!u.alg||e&&u.alg!==e)}catch{return!1}}function Vw(s,e){return!!((e==="v4"||!e)&&Uw.test(s)||(e==="v6"||!e)&&zw.test(s))}class pa extends we{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ee.string){const o=this._getOrReturnCtx(e);return J(o,{code:Z.invalid_type,expected:ee.string,received:o.parsedType}),he}const r=new Et;let u;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(u=this._getOrReturnCtx(e,u),J(u,{code:Z.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(u=this._getOrReturnCtx(e,u),J(u,{code:Z.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=e.data.length>o.value,d=e.data.length<o.value;(c||d)&&(u=this._getOrReturnCtx(e,u),c?J(u,{code:Z.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):d&&J(u,{code:Z.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")$w.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"email",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")hf||(hf=new RegExp(Dw,"u")),hf.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"emoji",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Cw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"uuid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")jw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"nanoid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Rw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"cuid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")xw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"cuid2",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Nw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"ulid",code:Z.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{u=this._getOrReturnCtx(e,u),J(u,{validation:"url",code:Z.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"regex",code:Z.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(u=this._getOrReturnCtx(e,u),J(u,{code:Z.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(u=this._getOrReturnCtx(e,u),J(u,{code:Z.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(u=this._getOrReturnCtx(e,u),J(u,{code:Z.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Zb(o).test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{code:Z.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Hw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{code:Z.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?qw(o).test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{code:Z.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?Lw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"duration",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?Zw(e.data,o.version)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"ip",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?Gw(e.data,o.alg)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"jwt",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?Vw(e.data,o.version)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"cidr",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?Iw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"base64",code:Z.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?Bw.test(e.data)||(u=this._getOrReturnCtx(e,u),J(u,{validation:"base64url",code:Z.invalid_string,message:o.message}),r.dirty()):Re.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(u=>e.test(u),{validation:n,code:Z.invalid_string,...ie.errToObj(r)})}_addCheck(e){return new pa({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ie.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ie.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ie.errToObj(n)})}nonempty(e){return this.min(1,ie.errToObj(e))}trim(){return new pa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}pa.create=s=>{var e;return new pa({checks:[],typeName:Y.ZodString,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...ye(s)})};function Yw(s,e){const n=(s.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,u=n>r?n:r,o=parseInt(s.toFixed(u).replace(".","")),c=parseInt(e.toFixed(u).replace(".",""));return o%c/Math.pow(10,u)}class Ln extends we{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ee.number){const o=this._getOrReturnCtx(e);return J(o,{code:Z.invalid_type,expected:ee.number,received:o.parsedType}),he}let r;const u=new Et;for(const o of this._def.checks)o.kind==="int"?Re.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),J(r,{code:Z.invalid_type,expected:"integer",received:"float",message:o.message}),u.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),J(r,{code:Z.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),u.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),J(r,{code:Z.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),u.dirty()):o.kind==="multipleOf"?Yw(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),J(r,{code:Z.not_multiple_of,multipleOf:o.value,message:o.message}),u.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),J(r,{code:Z.not_finite,message:o.message}),u.dirty()):Re.assertNever(o);return{status:u.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ie.toString(n))}setLimit(e,n,r,u){return new Ln({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ie.toString(u)}]})}_addCheck(e){return new Ln({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Re.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ln.create=s=>new Ln({checks:[],typeName:Y.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...ye(s)});class $n extends we{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ee.bigint)return this._getInvalidInput(e);let r;const u=new Et;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),J(r,{code:Z.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),u.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),J(r,{code:Z.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),u.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),J(r,{code:Z.not_multiple_of,multipleOf:o.value,message:o.message}),u.dirty()):Re.assertNever(o);return{status:u.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return J(n,{code:Z.invalid_type,expected:ee.bigint,received:n.parsedType}),he}gte(e,n){return this.setLimit("min",e,!0,ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ie.toString(n))}setLimit(e,n,r,u){return new $n({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ie.toString(u)}]})}_addCheck(e){return new $n({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$n.create=s=>{var e;return new $n({checks:[],typeName:Y.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...ye(s)})};class xs extends we{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ee.boolean){const r=this._getOrReturnCtx(e);return J(r,{code:Z.invalid_type,expected:ee.boolean,received:r.parsedType}),he}return Nt(e.data)}}xs.create=s=>new xs({typeName:Y.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...ye(s)});class mr extends we{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ee.date){const o=this._getOrReturnCtx(e);return J(o,{code:Z.invalid_type,expected:ee.date,received:o.parsedType}),he}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return J(o,{code:Z.invalid_date}),he}const r=new Et;let u;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(u=this._getOrReturnCtx(e,u),J(u,{code:Z.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(u=this._getOrReturnCtx(e,u),J(u,{code:Z.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Re.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mr({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}mr.create=s=>new mr({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:Y.ZodDate,...ye(s)});class Al extends we{_parse(e){if(this._getType(e)!==ee.symbol){const r=this._getOrReturnCtx(e);return J(r,{code:Z.invalid_type,expected:ee.symbol,received:r.parsedType}),he}return Nt(e.data)}}Al.create=s=>new Al({typeName:Y.ZodSymbol,...ye(s)});class Ns extends we{_parse(e){if(this._getType(e)!==ee.undefined){const r=this._getOrReturnCtx(e);return J(r,{code:Z.invalid_type,expected:ee.undefined,received:r.parsedType}),he}return Nt(e.data)}}Ns.create=s=>new Ns({typeName:Y.ZodUndefined,...ye(s)});class Cs extends we{_parse(e){if(this._getType(e)!==ee.null){const r=this._getOrReturnCtx(e);return J(r,{code:Z.invalid_type,expected:ee.null,received:r.parsedType}),he}return Nt(e.data)}}Cs.create=s=>new Cs({typeName:Y.ZodNull,...ye(s)});class oi extends we{constructor(){super(...arguments),this._any=!0}_parse(e){return Nt(e.data)}}oi.create=s=>new oi({typeName:Y.ZodAny,...ye(s)});class cr extends we{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nt(e.data)}}cr.create=s=>new cr({typeName:Y.ZodUnknown,...ye(s)});class en extends we{_parse(e){const n=this._getOrReturnCtx(e);return J(n,{code:Z.invalid_type,expected:ee.never,received:n.parsedType}),he}}en.create=s=>new en({typeName:Y.ZodNever,...ye(s)});class Rl extends we{_parse(e){if(this._getType(e)!==ee.undefined){const r=this._getOrReturnCtx(e);return J(r,{code:Z.invalid_type,expected:ee.void,received:r.parsedType}),he}return Nt(e.data)}}Rl.create=s=>new Rl({typeName:Y.ZodVoid,...ye(s)});class ya extends we{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),u=this._def;if(n.parsedType!==ee.array)return J(n,{code:Z.invalid_type,expected:ee.array,received:n.parsedType}),he;if(u.exactLength!==null){const c=n.data.length>u.exactLength.value,d=n.data.length<u.exactLength.value;(c||d)&&(J(n,{code:c?Z.too_big:Z.too_small,minimum:d?u.exactLength.value:void 0,maximum:c?u.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:u.exactLength.message}),r.dirty())}if(u.minLength!==null&&n.data.length<u.minLength.value&&(J(n,{code:Z.too_small,minimum:u.minLength.value,type:"array",inclusive:!0,exact:!1,message:u.minLength.message}),r.dirty()),u.maxLength!==null&&n.data.length>u.maxLength.value&&(J(n,{code:Z.too_big,maximum:u.maxLength.value,type:"array",inclusive:!0,exact:!1,message:u.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,d)=>u.type._parseAsync(new Ca(n,c,n.path,d)))).then(c=>Et.mergeArray(r,c));const o=[...n.data].map((c,d)=>u.type._parseSync(new Ca(n,c,n.path,d)));return Et.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new ya({...this._def,minLength:{value:e,message:ie.toString(n)}})}max(e,n){return new ya({...this._def,maxLength:{value:e,message:ie.toString(n)}})}length(e,n){return new ya({...this._def,exactLength:{value:e,message:ie.toString(n)}})}nonempty(e){return this.min(1,e)}}ya.create=(s,e)=>new ya({type:s,minLength:null,maxLength:null,exactLength:null,typeName:Y.ZodArray,...ye(e)});function ti(s){if(s instanceof qe){const e={};for(const n in s.shape){const r=s.shape[n];e[n]=ga.create(ti(r))}return new qe({...s._def,shape:()=>e})}else return s instanceof ya?new ya({...s._def,type:ti(s.element)}):s instanceof ga?ga.create(ti(s.unwrap())):s instanceof Mn?Mn.create(ti(s.unwrap())):s instanceof ja?ja.create(s.items.map(e=>ti(e))):s}class qe extends we{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Re.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ee.object){const p=this._getOrReturnCtx(e);return J(p,{code:Z.invalid_type,expected:ee.object,received:p.parsedType}),he}const{status:r,ctx:u}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),d=[];if(!(this._def.catchall instanceof en&&this._def.unknownKeys==="strip"))for(const p in u.data)c.includes(p)||d.push(p);const m=[];for(const p of c){const y=o[p],b=u.data[p];m.push({key:{status:"valid",value:p},value:y._parse(new Ca(u,b,u.path,p)),alwaysSet:p in u.data})}if(this._def.catchall instanceof en){const p=this._def.unknownKeys;if(p==="passthrough")for(const y of d)m.push({key:{status:"valid",value:y},value:{status:"valid",value:u.data[y]}});else if(p==="strict")d.length>0&&(J(u,{code:Z.unrecognized_keys,keys:d}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const y of d){const b=u.data[y];m.push({key:{status:"valid",value:y},value:p._parse(new Ca(u,b,u.path,y)),alwaysSet:y in u.data})}}return u.common.async?Promise.resolve().then(async()=>{const p=[];for(const y of m){const b=await y.key,v=await y.value;p.push({key:b,value:v,alwaysSet:y.alwaysSet})}return p}).then(p=>Et.mergeObjectSync(r,p)):Et.mergeObjectSync(r,m)}get shape(){return this._def.shape()}strict(e){return ie.errToObj,new qe({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var u,o,c,d;const m=(c=(o=(u=this._def).errorMap)===null||o===void 0?void 0:o.call(u,n,r).message)!==null&&c!==void 0?c:r.defaultError;return n.code==="unrecognized_keys"?{message:(d=ie.errToObj(e).message)!==null&&d!==void 0?d:m}:{message:m}}}:{}})}strip(){return new qe({...this._def,unknownKeys:"strip"})}passthrough(){return new qe({...this._def,unknownKeys:"passthrough"})}extend(e){return new qe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new qe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Y.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new qe({...this._def,catchall:e})}pick(e){const n={};return Re.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new qe({...this._def,shape:()=>n})}omit(e){const n={};return Re.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new qe({...this._def,shape:()=>n})}deepPartial(){return ti(this)}partial(e){const n={};return Re.objectKeys(this.shape).forEach(r=>{const u=this.shape[r];e&&!e[r]?n[r]=u:n[r]=u.optional()}),new qe({...this._def,shape:()=>n})}required(e){const n={};return Re.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof ga;)o=o._def.innerType;n[r]=o}}),new qe({...this._def,shape:()=>n})}keyof(){return Gb(Re.objectKeys(this.shape))}}qe.create=(s,e)=>new qe({shape:()=>s,unknownKeys:"strip",catchall:en.create(),typeName:Y.ZodObject,...ye(e)});qe.strictCreate=(s,e)=>new qe({shape:()=>s,unknownKeys:"strict",catchall:en.create(),typeName:Y.ZodObject,...ye(e)});qe.lazycreate=(s,e)=>new qe({shape:s,unknownKeys:"strip",catchall:en.create(),typeName:Y.ZodObject,...ye(e)});class js extends we{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function u(o){for(const d of o)if(d.result.status==="valid")return d.result;for(const d of o)if(d.result.status==="dirty")return n.common.issues.push(...d.ctx.common.issues),d.result;const c=o.map(d=>new Vt(d.ctx.common.issues));return J(n,{code:Z.invalid_union,unionErrors:c}),he}if(n.common.async)return Promise.all(r.map(async o=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(u);{let o;const c=[];for(const m of r){const p={...n,common:{...n.common,issues:[]},parent:null},y=m._parseSync({data:n.data,path:n.path,parent:p});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:p}),p.common.issues.length&&c.push(p.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const d=c.map(m=>new Vt(m));return J(n,{code:Z.invalid_union,unionErrors:d}),he}}get options(){return this._def.options}}js.create=(s,e)=>new js({options:s,typeName:Y.ZodUnion,...ye(e)});const Ka=s=>s instanceof $s?Ka(s.schema):s instanceof va?Ka(s.innerType()):s instanceof Ds?[s.value]:s instanceof Dn?s.options:s instanceof Ms?Re.objectValues(s.enum):s instanceof Us?Ka(s._def.innerType):s instanceof Ns?[void 0]:s instanceof Cs?[null]:s instanceof ga?[void 0,...Ka(s.unwrap())]:s instanceof Mn?[null,...Ka(s.unwrap())]:s instanceof Zd||s instanceof zs?Ka(s.unwrap()):s instanceof Ps?Ka(s._def.innerType):[];class zl extends we{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.object)return J(n,{code:Z.invalid_type,expected:ee.object,received:n.parsedType}),he;const r=this.discriminator,u=n.data[r],o=this.optionsMap.get(u);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(J(n,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),he)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const u=new Map;for(const o of n){const c=Ka(o.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const d of c){if(u.has(d))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(d)}`);u.set(d,o)}}return new zl({typeName:Y.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:u,...ye(r)})}}function jd(s,e){const n=Ja(s),r=Ja(e);if(s===e)return{valid:!0,data:s};if(n===ee.object&&r===ee.object){const u=Re.objectKeys(e),o=Re.objectKeys(s).filter(d=>u.indexOf(d)!==-1),c={...s,...e};for(const d of o){const m=jd(s[d],e[d]);if(!m.valid)return{valid:!1};c[d]=m.data}return{valid:!0,data:c}}else if(n===ee.array&&r===ee.array){if(s.length!==e.length)return{valid:!1};const u=[];for(let o=0;o<s.length;o++){const c=s[o],d=e[o],m=jd(c,d);if(!m.valid)return{valid:!1};u.push(m.data)}return{valid:!0,data:u}}else return n===ee.date&&r===ee.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class ks extends we{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),u=(o,c)=>{if(Nd(o)||Nd(c))return he;const d=jd(o.value,c.value);return d.valid?((Cd(o)||Cd(c))&&n.dirty(),{status:n.value,value:d.data}):(J(r,{code:Z.invalid_intersection_types}),he)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>u(o,c)):u(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ks.create=(s,e,n)=>new ks({left:s,right:e,typeName:Y.ZodIntersection,...ye(n)});class ja extends we{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.array)return J(r,{code:Z.invalid_type,expected:ee.array,received:r.parsedType}),he;if(r.data.length<this._def.items.length)return J(r,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),he;!this._def.rest&&r.data.length>this._def.items.length&&(J(r,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((c,d)=>{const m=this._def.items[d]||this._def.rest;return m?m._parse(new Ca(r,c,r.path,d)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>Et.mergeArray(n,c)):Et.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new ja({...this._def,rest:e})}}ja.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ja({items:s,typeName:Y.ZodTuple,rest:null,...ye(e)})};class Ls extends we{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.object)return J(r,{code:Z.invalid_type,expected:ee.object,received:r.parsedType}),he;const u=[],o=this._def.keyType,c=this._def.valueType;for(const d in r.data)u.push({key:o._parse(new Ca(r,d,r.path,d)),value:c._parse(new Ca(r,r.data[d],r.path,d)),alwaysSet:d in r.data});return r.common.async?Et.mergeObjectAsync(n,u):Et.mergeObjectSync(n,u)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof we?new Ls({keyType:e,valueType:n,typeName:Y.ZodRecord,...ye(r)}):new Ls({keyType:pa.create(),valueType:e,typeName:Y.ZodRecord,...ye(n)})}}class xl extends we{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.map)return J(r,{code:Z.invalid_type,expected:ee.map,received:r.parsedType}),he;const u=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([d,m],p)=>({key:u._parse(new Ca(r,d,r.path,[p,"key"])),value:o._parse(new Ca(r,m,r.path,[p,"value"]))}));if(r.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const m of c){const p=await m.key,y=await m.value;if(p.status==="aborted"||y.status==="aborted")return he;(p.status==="dirty"||y.status==="dirty")&&n.dirty(),d.set(p.value,y.value)}return{status:n.value,value:d}})}else{const d=new Map;for(const m of c){const p=m.key,y=m.value;if(p.status==="aborted"||y.status==="aborted")return he;(p.status==="dirty"||y.status==="dirty")&&n.dirty(),d.set(p.value,y.value)}return{status:n.value,value:d}}}}xl.create=(s,e,n)=>new xl({valueType:e,keyType:s,typeName:Y.ZodMap,...ye(n)});class pr extends we{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.set)return J(r,{code:Z.invalid_type,expected:ee.set,received:r.parsedType}),he;const u=this._def;u.minSize!==null&&r.data.size<u.minSize.value&&(J(r,{code:Z.too_small,minimum:u.minSize.value,type:"set",inclusive:!0,exact:!1,message:u.minSize.message}),n.dirty()),u.maxSize!==null&&r.data.size>u.maxSize.value&&(J(r,{code:Z.too_big,maximum:u.maxSize.value,type:"set",inclusive:!0,exact:!1,message:u.maxSize.message}),n.dirty());const o=this._def.valueType;function c(m){const p=new Set;for(const y of m){if(y.status==="aborted")return he;y.status==="dirty"&&n.dirty(),p.add(y.value)}return{status:n.value,value:p}}const d=[...r.data.values()].map((m,p)=>o._parse(new Ca(r,m,r.path,p)));return r.common.async?Promise.all(d).then(m=>c(m)):c(d)}min(e,n){return new pr({...this._def,minSize:{value:e,message:ie.toString(n)}})}max(e,n){return new pr({...this._def,maxSize:{value:e,message:ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}pr.create=(s,e)=>new pr({valueType:s,minSize:null,maxSize:null,typeName:Y.ZodSet,...ye(e)});class si extends we{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.function)return J(n,{code:Z.invalid_type,expected:ee.function,received:n.parsedType}),he;function r(d,m){return Tl({data:d,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sl(),li].filter(p=>!!p),issueData:{code:Z.invalid_arguments,argumentsError:m}})}function u(d,m){return Tl({data:d,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sl(),li].filter(p=>!!p),issueData:{code:Z.invalid_return_type,returnTypeError:m}})}const o={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof ci){const d=this;return Nt(async function(...m){const p=new Vt([]),y=await d._def.args.parseAsync(m,o).catch(w=>{throw p.addIssue(r(m,w)),p}),b=await Reflect.apply(c,this,y);return await d._def.returns._def.type.parseAsync(b,o).catch(w=>{throw p.addIssue(u(b,w)),p})})}else{const d=this;return Nt(function(...m){const p=d._def.args.safeParse(m,o);if(!p.success)throw new Vt([r(m,p.error)]);const y=Reflect.apply(c,this,p.data),b=d._def.returns.safeParse(y,o);if(!b.success)throw new Vt([u(y,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new si({...this._def,args:ja.create(e).rest(cr.create())})}returns(e){return new si({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new si({args:e||ja.create([]).rest(cr.create()),returns:n||cr.create(),typeName:Y.ZodFunction,...ye(r)})}}class $s extends we{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}$s.create=(s,e)=>new $s({getter:s,typeName:Y.ZodLazy,...ye(e)});class Ds extends we{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return J(n,{received:n.data,code:Z.invalid_literal,expected:this._def.value}),he}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ds.create=(s,e)=>new Ds({value:s,typeName:Y.ZodLiteral,...ye(e)});function Gb(s,e){return new Dn({values:s,typeName:Y.ZodEnum,...ye(e)})}class Dn extends we{constructor(){super(...arguments),vs.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return J(n,{expected:Re.joinValues(r),received:n.parsedType,code:Z.invalid_type}),he}if(Ol(this,vs)||Bb(this,vs,new Set(this._def.values)),!Ol(this,vs).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return J(n,{received:n.data,code:Z.invalid_enum_value,options:r}),he}return Nt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Dn.create(e,{...this._def,...n})}exclude(e,n=this._def){return Dn.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}vs=new WeakMap;Dn.create=Gb;class Ms extends we{constructor(){super(...arguments),_s.set(this,void 0)}_parse(e){const n=Re.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ee.string&&r.parsedType!==ee.number){const u=Re.objectValues(n);return J(r,{expected:Re.joinValues(u),received:r.parsedType,code:Z.invalid_type}),he}if(Ol(this,_s)||Bb(this,_s,new Set(Re.getValidEnumValues(this._def.values))),!Ol(this,_s).has(e.data)){const u=Re.objectValues(n);return J(r,{received:r.data,code:Z.invalid_enum_value,options:u}),he}return Nt(e.data)}get enum(){return this._def.values}}_s=new WeakMap;Ms.create=(s,e)=>new Ms({values:s,typeName:Y.ZodNativeEnum,...ye(e)});class ci extends we{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.promise&&n.common.async===!1)return J(n,{code:Z.invalid_type,expected:ee.promise,received:n.parsedType}),he;const r=n.parsedType===ee.promise?n.data:Promise.resolve(n.data);return Nt(r.then(u=>this._def.type.parseAsync(u,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ci.create=(s,e)=>new ci({type:s,typeName:Y.ZodPromise,...ye(e)});class va extends we{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),u=this._def.effect||null,o={addIssue:c=>{J(r,c),c.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),u.type==="preprocess"){const c=u.transform(r.data,o);if(r.common.async)return Promise.resolve(c).then(async d=>{if(n.value==="aborted")return he;const m=await this._def.schema._parseAsync({data:d,path:r.path,parent:r});return m.status==="aborted"?he:m.status==="dirty"||n.value==="dirty"?ai(m.value):m});{if(n.value==="aborted")return he;const d=this._def.schema._parseSync({data:c,path:r.path,parent:r});return d.status==="aborted"?he:d.status==="dirty"||n.value==="dirty"?ai(d.value):d}}if(u.type==="refinement"){const c=d=>{const m=u.refinement(d,o);if(r.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(r.common.async===!1){const d=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return d.status==="aborted"?he:(d.status==="dirty"&&n.dirty(),c(d.value),{status:n.value,value:d.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(d=>d.status==="aborted"?he:(d.status==="dirty"&&n.dirty(),c(d.value).then(()=>({status:n.value,value:d.value}))))}if(u.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!hr(c))return c;const d=u.transform(c.value,o);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:d}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>hr(c)?Promise.resolve(u.transform(c.value,o)).then(d=>({status:n.value,value:d})):c);Re.assertNever(u)}}va.create=(s,e,n)=>new va({schema:s,typeName:Y.ZodEffects,effect:e,...ye(n)});va.createWithPreprocess=(s,e,n)=>new va({schema:e,effect:{type:"preprocess",transform:s},typeName:Y.ZodEffects,...ye(n)});class ga extends we{_parse(e){return this._getType(e)===ee.undefined?Nt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ga.create=(s,e)=>new ga({innerType:s,typeName:Y.ZodOptional,...ye(e)});class Mn extends we{_parse(e){return this._getType(e)===ee.null?Nt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Mn.create=(s,e)=>new Mn({innerType:s,typeName:Y.ZodNullable,...ye(e)});class Us extends we{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ee.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Us.create=(s,e)=>new Us({innerType:s,typeName:Y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ye(e)});class Ps extends we{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},u=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Rs(u)?u.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Vt(r.common.issues)},input:r.data})})):{status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new Vt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ps.create=(s,e)=>new Ps({innerType:s,typeName:Y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ye(e)});class Nl extends we{_parse(e){if(this._getType(e)!==ee.nan){const r=this._getOrReturnCtx(e);return J(r,{code:Z.invalid_type,expected:ee.nan,received:r.parsedType}),he}return{status:"valid",value:e.data}}}Nl.create=s=>new Nl({typeName:Y.ZodNaN,...ye(s)});const Xw=Symbol("zod_brand");class Zd extends we{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Vs extends we{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?he:o.status==="dirty"?(n.dirty(),ai(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const u=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?he:u.status==="dirty"?(n.dirty(),{status:"dirty",value:u.value}):this._def.out._parseSync({data:u.value,path:r.path,parent:r})}}static create(e,n){return new Vs({in:e,out:n,typeName:Y.ZodPipeline})}}class zs extends we{_parse(e){const n=this._def.innerType._parse(e),r=u=>(hr(u)&&(u.value=Object.freeze(u.value)),u);return Rs(n)?n.then(u=>r(u)):r(n)}unwrap(){return this._def.innerType}}zs.create=(s,e)=>new zs({innerType:s,typeName:Y.ZodReadonly,...ye(e)});function ig(s,e){const n=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof n=="string"?{message:n}:n}function Vb(s,e={},n){return s?oi.create().superRefine((r,u)=>{var o,c;const d=s(r);if(d instanceof Promise)return d.then(m=>{var p,y;if(!m){const b=ig(e,r),v=(y=(p=b.fatal)!==null&&p!==void 0?p:n)!==null&&y!==void 0?y:!0;u.addIssue({code:"custom",...b,fatal:v})}});if(!d){const m=ig(e,r),p=(c=(o=m.fatal)!==null&&o!==void 0?o:n)!==null&&c!==void 0?c:!0;u.addIssue({code:"custom",...m,fatal:p})}}):oi.create()}const Fw={object:qe.lazycreate};var Y;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(Y||(Y={}));const Qw=(s,e={message:`Input not instance of ${s.name}`})=>Vb(n=>n instanceof s,e),Yb=pa.create,Xb=Ln.create,Kw=Nl.create,Jw=$n.create,Fb=xs.create,Ww=mr.create,eE=Al.create,tE=Ns.create,aE=Cs.create,nE=oi.create,rE=cr.create,iE=en.create,sE=Rl.create,uE=ya.create,lE=qe.create,oE=qe.strictCreate,cE=js.create,fE=zl.create,dE=ks.create,hE=ja.create,mE=Ls.create,pE=xl.create,yE=pr.create,gE=si.create,bE=$s.create,vE=Ds.create,_E=Dn.create,wE=Ms.create,EE=ci.create,sg=va.create,SE=ga.create,TE=Mn.create,OE=va.createWithPreprocess,AE=Vs.create,RE=()=>Yb().optional(),xE=()=>Xb().optional(),NE=()=>Fb().optional(),CE={string:s=>pa.create({...s,coerce:!0}),number:s=>Ln.create({...s,coerce:!0}),boolean:s=>xs.create({...s,coerce:!0}),bigint:s=>$n.create({...s,coerce:!0}),date:s=>mr.create({...s,coerce:!0})},jE=he;var ws=Object.freeze({__proto__:null,defaultErrorMap:li,setErrorMap:Ow,getErrorMap:Sl,makeIssue:Tl,EMPTY_PATH:Aw,addIssueToContext:J,ParseStatus:Et,INVALID:he,DIRTY:ai,OK:Nt,isAborted:Nd,isDirty:Cd,isValid:hr,isAsync:Rs,get util(){return Re},get objectUtil(){return xd},ZodParsedType:ee,getParsedType:Ja,ZodType:we,datetimeRegex:Zb,ZodString:pa,ZodNumber:Ln,ZodBigInt:$n,ZodBoolean:xs,ZodDate:mr,ZodSymbol:Al,ZodUndefined:Ns,ZodNull:Cs,ZodAny:oi,ZodUnknown:cr,ZodNever:en,ZodVoid:Rl,ZodArray:ya,ZodObject:qe,ZodUnion:js,ZodDiscriminatedUnion:zl,ZodIntersection:ks,ZodTuple:ja,ZodRecord:Ls,ZodMap:xl,ZodSet:pr,ZodFunction:si,ZodLazy:$s,ZodLiteral:Ds,ZodEnum:Dn,ZodNativeEnum:Ms,ZodPromise:ci,ZodEffects:va,ZodTransformer:va,ZodOptional:ga,ZodNullable:Mn,ZodDefault:Us,ZodCatch:Ps,ZodNaN:Nl,BRAND:Xw,ZodBranded:Zd,ZodPipeline:Vs,ZodReadonly:zs,custom:Vb,Schema:we,ZodSchema:we,late:Fw,get ZodFirstPartyTypeKind(){return Y},coerce:CE,any:nE,array:uE,bigint:Jw,boolean:Fb,date:Ww,discriminatedUnion:fE,effect:sg,enum:_E,function:gE,instanceof:Qw,intersection:dE,lazy:bE,literal:vE,map:pE,nan:Kw,nativeEnum:wE,never:iE,null:aE,nullable:TE,number:Xb,object:lE,oboolean:NE,onumber:xE,optional:SE,ostring:RE,pipeline:AE,preprocess:OE,promise:EE,record:mE,set:yE,strictObject:oE,string:Yb,symbol:eE,transformer:sg,tuple:hE,undefined:tE,union:cE,unknown:rE,void:sE,NEVER:jE,ZodIssueCode:Z,quotelessJson:Tw,ZodError:Vt}),ps={exports:{}},mf={},pf,ug;function kE(){if(ug)return pf;ug=1;function s(e,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return pf=s,s.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},s.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},s.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=new Date().getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var u=this;return this._timer=setTimeout(function(){u._attempts++,u._operationTimeoutCb&&(u._timeout=setTimeout(function(){u._operationTimeoutCb(u._attempts)},u._operationTimeout),u._options.unref&&u._timeout.unref()),u._fn(u._attempts)},r),this._options.unref&&this._timer.unref(),!0},s.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},s.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},s.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},s.prototype.start=s.prototype.try,s.prototype.errors=function(){return this._errors},s.prototype.attempts=function(){return this._attempts},s.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},n=null,r=0,u=0;u<this._errors.length;u++){var o=this._errors[u],c=o.message,d=(e[c]||0)+1;e[c]=d,d>=r&&(n=o,r=d)}return n},pf}var lg;function LE(){return lg||(lg=1,function(s){var e=kE();s.operation=function(n){var r=s.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},s.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var u in n)r[u]=n[u];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],c=0;c<r.retries;c++)o.push(this.createTimeout(c,r));return n&&n.forever&&!o.length&&o.push(this.createTimeout(c,r)),o.sort(function(d,m){return d-m}),o},s.createTimeout=function(n,r){var u=r.randomize?Math.random()+1:1,o=Math.round(u*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return o=Math.min(o,r.maxTimeout),o},s.wrap=function(n,r,u){if(r instanceof Array&&(u=r,r=null),!u){u=[];for(var o in n)typeof n[o]=="function"&&u.push(o)}for(var c=0;c<u.length;c++){var d=u[c],m=n[d];n[d]=(function(y){var b=s.operation(r),v=Array.prototype.slice.call(arguments,1),w=v.pop();v.push(function(E){b.retry(E)||(E&&(arguments[0]=b.mainError()),w.apply(this,arguments))}),b.attempt(function(){y.apply(n,v)})}).bind(n,m),n[d].options=r}}}(mf)),mf}var yf,og;function $E(){return og||(og=1,yf=LE()),yf}var cg;function DE(){if(cg)return ps.exports;cg=1;const s=$E(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(d){super(),d instanceof Error?(this.originalError=d,{message:d}=d):(this.originalError=new Error(d),this.originalError.stack=this.stack),this.name="AbortError",this.message=d}}const r=(c,d,m)=>{const p=m.retries-(d-1);return c.attemptNumber=d,c.retriesLeft=p,c},u=c=>e.includes(c),o=(c,d)=>new Promise((m,p)=>{d={onFailedAttempt:()=>{},retries:10,...d};const y=s.operation(d);y.attempt(async b=>{try{m(await c(b))}catch(v){if(!(v instanceof Error)){p(new TypeError(`Non-error was thrown: "${v}". You should only throw errors.`));return}if(v instanceof n)y.stop(),p(v.originalError);else if(v instanceof TypeError&&!u(v.message))y.stop(),p(v);else{r(v,b,d);try{await d.onFailedAttempt(v)}catch(w){p(w);return}y.retry(v)||p(y.mainError())}}})});return ps.exports=o,ps.exports.default=o,ps.exports.AbortError=n,ps.exports}var ME=DE();const Cl=qs(ME),UE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Es(s){return typeof s=="string"&&UE.test(s)}var pt=[];for(var gf=0;gf<256;++gf)pt.push((gf+256).toString(16).slice(1));function PE(s,e=0){return(pt[s[e+0]]+pt[s[e+1]]+pt[s[e+2]]+pt[s[e+3]]+"-"+pt[s[e+4]]+pt[s[e+5]]+"-"+pt[s[e+6]]+pt[s[e+7]]+"-"+pt[s[e+8]]+pt[s[e+9]]+"-"+pt[s[e+10]]+pt[s[e+11]]+pt[s[e+12]]+pt[s[e+13]]+pt[s[e+14]]+pt[s[e+15]]).toLowerCase()}var dl,zE=new Uint8Array(16);function IE(){if(!dl&&(dl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dl(zE)}var BE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const fg={randomUUID:BE};function Dt(s,e,n){if(fg.randomUUID&&!s)return fg.randomUUID();s=s||{};var r=s.random||(s.rng||IE)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,PE(r)}var hl={},bf={exports:{}},dg;function HE(){return dg||(dg=1,function(s){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function u(m,p,y){this.fn=m,this.context=p,this.once=y||!1}function o(m,p,y,b,v){if(typeof y!="function")throw new TypeError("The listener must be a function");var w=new u(y,b||m,v),E=n?n+p:p;return m._events[E]?m._events[E].fn?m._events[E]=[m._events[E],w]:m._events[E].push(w):(m._events[E]=w,m._eventsCount++),m}function c(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],y,b;if(this._eventsCount===0)return p;for(b in y=this._events)e.call(y,b)&&p.push(n?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(y)):p},d.prototype.listeners=function(p){var y=n?n+p:p,b=this._events[y];if(!b)return[];if(b.fn)return[b.fn];for(var v=0,w=b.length,E=new Array(w);v<w;v++)E[v]=b[v].fn;return E},d.prototype.listenerCount=function(p){var y=n?n+p:p,b=this._events[y];return b?b.fn?1:b.length:0},d.prototype.emit=function(p,y,b,v,w,E){var O=n?n+p:p;if(!this._events[O])return!1;var x=this._events[O],k=arguments.length,z,L;if(x.fn){switch(x.once&&this.removeListener(p,x.fn,void 0,!0),k){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,y),!0;case 3:return x.fn.call(x.context,y,b),!0;case 4:return x.fn.call(x.context,y,b,v),!0;case 5:return x.fn.call(x.context,y,b,v,w),!0;case 6:return x.fn.call(x.context,y,b,v,w,E),!0}for(L=1,z=new Array(k-1);L<k;L++)z[L-1]=arguments[L];x.fn.apply(x.context,z)}else{var ae=x.length,I;for(L=0;L<ae;L++)switch(x[L].once&&this.removeListener(p,x[L].fn,void 0,!0),k){case 1:x[L].fn.call(x[L].context);break;case 2:x[L].fn.call(x[L].context,y);break;case 3:x[L].fn.call(x[L].context,y,b);break;case 4:x[L].fn.call(x[L].context,y,b,v);break;default:if(!z)for(I=1,z=new Array(k-1);I<k;I++)z[I-1]=arguments[I];x[L].fn.apply(x[L].context,z)}}return!0},d.prototype.on=function(p,y,b){return o(this,p,y,b,!1)},d.prototype.once=function(p,y,b){return o(this,p,y,b,!0)},d.prototype.removeListener=function(p,y,b,v){var w=n?n+p:p;if(!this._events[w])return this;if(!y)return c(this,w),this;var E=this._events[w];if(E.fn)E.fn===y&&(!v||E.once)&&(!b||E.context===b)&&c(this,w);else{for(var O=0,x=[],k=E.length;O<k;O++)(E[O].fn!==y||v&&!E[O].once||b&&E[O].context!==b)&&x.push(E[O]);x.length?this._events[w]=x.length===1?x[0]:x:c(this,w)}return this},d.prototype.removeAllListeners=function(p){var y;return p?(y=n?n+p:p,this._events[y]&&c(this,y)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,s.exports=d}(bf)),bf.exports}var ys={exports:{}},vf,hg;function qE(){return hg||(hg=1,vf=(s,e)=>(e=e||(()=>{}),s.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})))),vf}var mg;function ZE(){if(mg)return ys.exports;mg=1;const s=qE();class e extends Error{constructor(u){super(u),this.name="TimeoutError"}}const n=(r,u,o)=>new Promise((c,d)=>{if(typeof u!="number"||u<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(u===1/0){c(r);return}const m=setTimeout(()=>{if(typeof o=="function"){try{c(o())}catch(b){d(b)}return}const p=typeof o=="string"?o:`Promise timed out after ${u} milliseconds`,y=o instanceof Error?o:new e(p);typeof r.cancel=="function"&&r.cancel(),d(y)},u);s(r.then(c,d),()=>{clearTimeout(m)})});return ys.exports=n,ys.exports.default=n,ys.exports.TimeoutError=e,ys.exports}var ml={},pl={},pg;function GE(){if(pg)return pl;pg=1,Object.defineProperty(pl,"__esModule",{value:!0});function s(e,n,r){let u=0,o=e.length;for(;o>0;){const c=o/2|0;let d=u+c;r(e[d],n)<=0?(u=++d,o-=c+1):o=c}return u}return pl.default=s,pl}var yg;function VE(){if(yg)return ml;yg=1,Object.defineProperty(ml,"__esModule",{value:!0});const s=GE();class e{constructor(){this._queue=[]}enqueue(r,u){u=Object.assign({priority:0},u);const o={priority:u.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=u.priority){this._queue.push(o);return}const c=s.default(this._queue,o,(d,m)=>m.priority-d.priority);this._queue.splice(c,0,o)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(u=>u.priority===r.priority).map(u=>u.run)}get size(){return this._queue.length}}return ml.default=e,ml}var gg;function YE(){if(gg)return hl;gg=1,Object.defineProperty(hl,"__esModule",{value:!0});const s=HE(),e=ZE(),n=VE(),r=()=>{},u=new e.TimeoutError;class o extends s{constructor(d){var m,p,y,b;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,d=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},d),!(typeof d.intervalCap=="number"&&d.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(p=(m=d.intervalCap)===null||m===void 0?void 0:m.toString())!==null&&p!==void 0?p:""}\` (${typeof d.intervalCap})`);if(d.interval===void 0||!(Number.isFinite(d.interval)&&d.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(b=(y=d.interval)===null||y===void 0?void 0:y.toString())!==null&&b!==void 0?b:""}\` (${typeof d.interval})`);this._carryoverConcurrencyCount=d.carryoverConcurrencyCount,this._isIntervalIgnored=d.intervalCap===1/0||d.interval===0,this._intervalCap=d.intervalCap,this._interval=d.interval,this._queue=new d.queueClass,this._queueClass=d.queueClass,this.concurrency=d.concurrency,this._timeout=d.timeout,this._throwOnTimeout=d.throwOnTimeout===!0,this._isPaused=d.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const d=Date.now();if(this._intervalId===void 0){const m=this._intervalEnd-d;if(m<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},m)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const d=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const m=this._queue.dequeue();return m?(this.emit("active"),m(),d&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(d){if(!(typeof d=="number"&&d>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${d}\` (${typeof d})`);this._concurrency=d,this._processQueue()}async add(d,m={}){return new Promise((p,y)=>{const b=async()=>{this._pendingCount++,this._intervalCount++;try{const v=this._timeout===void 0&&m.timeout===void 0?d():e.default(Promise.resolve(d()),m.timeout===void 0?this._timeout:m.timeout,()=>{(m.throwOnTimeout===void 0?this._throwOnTimeout:m.throwOnTimeout)&&y(u)});p(await v)}catch(v){y(v)}this._next()};this._queue.enqueue(b,m),this._tryToStartAnother(),this.emit("add")})}async addAll(d,m){return Promise.all(d.map(async p=>this.add(p,m)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(d=>{const m=this._resolveEmpty;this._resolveEmpty=()=>{m(),d()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(d=>{const m=this._resolveIdle;this._resolveIdle=()=>{m(),d()}})}get size(){return this._queue.size}sizeBy(d){return this._queue.filter(d).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(d){this._timeout=d}}return hl.default=o,hl}var XE=YE();const Wa=qs(XE),FE=(...s)=>fetch(...s),QE=Symbol.for("ls:fetch_implementation"),ue=()=>globalThis[QE]??FE,KE=[400,401,403,404,405,406,407,408],JE=[409];let bg=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in Wa?this.queue=new Wa.default({concurrency:this.maxConcurrency}):this.queue=new Wa({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>Cl(()=>e(...n).catch(u=>{throw u instanceof Error?u:new Error(u)}),{async onFailedAttempt(u){if(u.message.startsWith("Cancel")||u.message.startsWith("TimeoutError")||u.message.startsWith("AbortError")||(u==null?void 0:u.code)==="ECONNABORTED")throw u;const o=u==null?void 0:u.response,c=o==null?void 0:o.status;if(c){if(KE.includes(+c))throw u;if(JE.includes(+c))return;r&&await r(o)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((u,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>ue()(...e).then(n=>n.ok?n:Promise.reject(n)))}};function vg(s){return typeof(s==null?void 0:s._getType)=="function"}function _g(s){const e={type:s._getType(),data:{content:s.content}};return s!=null&&s.additional_kwargs&&Object.keys(s.additional_kwargs).length>0&&(e.data.additional_kwargs={...s.additional_kwargs}),e}function be(s,e){if(!Es(s)){const n=e!==void 0?`Invalid UUID for ${e}: ${s}`:`Invalid UUID: ${s}`;throw new Error(n)}return s}const wg={};function Qb(s){wg[s]||(console.warn(s),wg[s]=!0)}var yl={exports:{}},_f,Eg;function Il(){if(Eg)return _f;Eg=1;const s="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,u=e-6;return _f={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:u,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:s,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},_f}var wf,Sg;function Bl(){if(Sg)return wf;Sg=1;var s={};return wf=typeof process=="object"&&s&&s.NODE_DEBUG&&/\bsemver\b/i.test(s.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},wf}var Tg;function Ys(){return Tg||(Tg=1,function(s,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:u}=Il(),o=Bl();e=s.exports={};const c=e.re=[],d=e.safeRe=[],m=e.src=[],p=e.safeSrc=[],y=e.t={};let b=0;const v="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",u],[v,r]],E=x=>{for(const[k,z]of w)x=x.split(`${k}*`).join(`${k}{0,${z}}`).split(`${k}+`).join(`${k}{1,${z}}`);return x},O=(x,k,z)=>{const L=E(k),ae=b++;o(x,ae,k),y[x]=ae,m[ae]=k,p[ae]=L,c[ae]=new RegExp(k,z?"g":void 0),d[ae]=new RegExp(L,z?"g":void 0)};O("NUMERICIDENTIFIER","0|[1-9]\\d*"),O("NUMERICIDENTIFIERLOOSE","\\d+"),O("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),O("MAINVERSION",`(${m[y.NUMERICIDENTIFIER]})\\.(${m[y.NUMERICIDENTIFIER]})\\.(${m[y.NUMERICIDENTIFIER]})`),O("MAINVERSIONLOOSE",`(${m[y.NUMERICIDENTIFIERLOOSE]})\\.(${m[y.NUMERICIDENTIFIERLOOSE]})\\.(${m[y.NUMERICIDENTIFIERLOOSE]})`),O("PRERELEASEIDENTIFIER",`(?:${m[y.NUMERICIDENTIFIER]}|${m[y.NONNUMERICIDENTIFIER]})`),O("PRERELEASEIDENTIFIERLOOSE",`(?:${m[y.NUMERICIDENTIFIERLOOSE]}|${m[y.NONNUMERICIDENTIFIER]})`),O("PRERELEASE",`(?:-(${m[y.PRERELEASEIDENTIFIER]}(?:\\.${m[y.PRERELEASEIDENTIFIER]})*))`),O("PRERELEASELOOSE",`(?:-?(${m[y.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${m[y.PRERELEASEIDENTIFIERLOOSE]})*))`),O("BUILDIDENTIFIER",`${v}+`),O("BUILD",`(?:\\+(${m[y.BUILDIDENTIFIER]}(?:\\.${m[y.BUILDIDENTIFIER]})*))`),O("FULLPLAIN",`v?${m[y.MAINVERSION]}${m[y.PRERELEASE]}?${m[y.BUILD]}?`),O("FULL",`^${m[y.FULLPLAIN]}$`),O("LOOSEPLAIN",`[v=\\s]*${m[y.MAINVERSIONLOOSE]}${m[y.PRERELEASELOOSE]}?${m[y.BUILD]}?`),O("LOOSE",`^${m[y.LOOSEPLAIN]}$`),O("GTLT","((?:<|>)?=?)"),O("XRANGEIDENTIFIERLOOSE",`${m[y.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),O("XRANGEIDENTIFIER",`${m[y.NUMERICIDENTIFIER]}|x|X|\\*`),O("XRANGEPLAIN",`[v=\\s]*(${m[y.XRANGEIDENTIFIER]})(?:\\.(${m[y.XRANGEIDENTIFIER]})(?:\\.(${m[y.XRANGEIDENTIFIER]})(?:${m[y.PRERELEASE]})?${m[y.BUILD]}?)?)?`),O("XRANGEPLAINLOOSE",`[v=\\s]*(${m[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${m[y.XRANGEIDENTIFIERLOOSE]})(?:${m[y.PRERELEASELOOSE]})?${m[y.BUILD]}?)?)?`),O("XRANGE",`^${m[y.GTLT]}\\s*${m[y.XRANGEPLAIN]}$`),O("XRANGELOOSE",`^${m[y.GTLT]}\\s*${m[y.XRANGEPLAINLOOSE]}$`),O("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),O("COERCE",`${m[y.COERCEPLAIN]}(?:$|[^\\d])`),O("COERCEFULL",m[y.COERCEPLAIN]+`(?:${m[y.PRERELEASE]})?(?:${m[y.BUILD]})?(?:$|[^\\d])`),O("COERCERTL",m[y.COERCE],!0),O("COERCERTLFULL",m[y.COERCEFULL],!0),O("LONETILDE","(?:~>?)"),O("TILDETRIM",`(\\s*)${m[y.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",O("TILDE",`^${m[y.LONETILDE]}${m[y.XRANGEPLAIN]}$`),O("TILDELOOSE",`^${m[y.LONETILDE]}${m[y.XRANGEPLAINLOOSE]}$`),O("LONECARET","(?:\\^)"),O("CARETTRIM",`(\\s*)${m[y.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",O("CARET",`^${m[y.LONECARET]}${m[y.XRANGEPLAIN]}$`),O("CARETLOOSE",`^${m[y.LONECARET]}${m[y.XRANGEPLAINLOOSE]}$`),O("COMPARATORLOOSE",`^${m[y.GTLT]}\\s*(${m[y.LOOSEPLAIN]})$|^$`),O("COMPARATOR",`^${m[y.GTLT]}\\s*(${m[y.FULLPLAIN]})$|^$`),O("COMPARATORTRIM",`(\\s*)${m[y.GTLT]}\\s*(${m[y.LOOSEPLAIN]}|${m[y.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",O("HYPHENRANGE",`^\\s*(${m[y.XRANGEPLAIN]})\\s+-\\s+(${m[y.XRANGEPLAIN]})\\s*$`),O("HYPHENRANGELOOSE",`^\\s*(${m[y.XRANGEPLAINLOOSE]})\\s+-\\s+(${m[y.XRANGEPLAINLOOSE]})\\s*$`),O("STAR","(<|>)?=?\\s*\\*"),O("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),O("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(yl,yl.exports)),yl.exports}var Ef,Og;function Gd(){if(Og)return Ef;Og=1;const s=Object.freeze({loose:!0}),e=Object.freeze({});return Ef=r=>r?typeof r!="object"?s:r:e,Ef}var Sf,Ag;function Kb(){if(Ag)return Sf;Ag=1;const s=/^[0-9]+$/,e=(r,u)=>{const o=s.test(r),c=s.test(u);return o&&c&&(r=+r,u=+u),r===u?0:o&&!c?-1:c&&!o?1:r<u?-1:1};return Sf={compareIdentifiers:e,rcompareIdentifiers:(r,u)=>e(u,r)},Sf}var Tf,Rg;function Ct(){if(Rg)return Tf;Rg=1;const s=Bl(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=Il(),{safeRe:r,safeSrc:u,t:o}=Ys(),c=Gd(),{compareIdentifiers:d}=Kb();class m{constructor(y,b){if(b=c(b),y instanceof m){if(y.loose===!!b.loose&&y.includePrerelease===!!b.includePrerelease)return y;y=y.version}else if(typeof y!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof y}".`);if(y.length>e)throw new TypeError(`version is longer than ${e} characters`);s("SemVer",y,b),this.options=b,this.loose=!!b.loose,this.includePrerelease=!!b.includePrerelease;const v=y.trim().match(b.loose?r[o.LOOSE]:r[o.FULL]);if(!v)throw new TypeError(`Invalid Version: ${y}`);if(this.raw=y,this.major=+v[1],this.minor=+v[2],this.patch=+v[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");v[4]?this.prerelease=v[4].split(".").map(w=>{if(/^[0-9]+$/.test(w)){const E=+w;if(E>=0&&E<n)return E}return w}):this.prerelease=[],this.build=v[5]?v[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(y){if(s("SemVer.compare",this.version,this.options,y),!(y instanceof m)){if(typeof y=="string"&&y===this.version)return 0;y=new m(y,this.options)}return y.version===this.version?0:this.compareMain(y)||this.comparePre(y)}compareMain(y){return y instanceof m||(y=new m(y,this.options)),d(this.major,y.major)||d(this.minor,y.minor)||d(this.patch,y.patch)}comparePre(y){if(y instanceof m||(y=new m(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;let b=0;do{const v=this.prerelease[b],w=y.prerelease[b];if(s("prerelease compare",b,v,w),v===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(v===void 0)return-1;if(v===w)continue;return d(v,w)}while(++b)}compareBuild(y){y instanceof m||(y=new m(y,this.options));let b=0;do{const v=this.build[b],w=y.build[b];if(s("build compare",b,v,w),v===void 0&&w===void 0)return 0;if(w===void 0)return 1;if(v===void 0)return-1;if(v===w)continue;return d(v,w)}while(++b)}inc(y,b,v){if(y.startsWith("pre")){if(!b&&v===!1)throw new Error("invalid increment argument: identifier is empty");if(b){const w=new RegExp(`^${this.options.loose?u[o.PRERELEASELOOSE]:u[o.PRERELEASE]}$`),E=`-${b}`.match(w);if(!E||E[1]!==b)throw new Error(`invalid identifier: ${b}`)}}switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",b,v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",b,v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",b,v),this.inc("pre",b,v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",b,v),this.inc("pre",b,v);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const w=Number(v)?1:0;if(this.prerelease.length===0)this.prerelease=[w];else{let E=this.prerelease.length;for(;--E>=0;)typeof this.prerelease[E]=="number"&&(this.prerelease[E]++,E=-2);if(E===-1){if(b===this.prerelease.join(".")&&v===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(w)}}if(b){let E=[b,w];v===!1&&(E=[b]),d(this.prerelease[0],b)===0?isNaN(this.prerelease[1])&&(this.prerelease=E):this.prerelease=E}break}default:throw new Error(`invalid increment argument: ${y}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Tf=m,Tf}var Of,xg;function hi(){if(xg)return Of;xg=1;const s=Ct();return Of=(n,r,u=!1)=>{if(n instanceof s)return n;try{return new s(n,r)}catch(o){if(!u)return null;throw o}},Of}var Af,Ng;function WE(){if(Ng)return Af;Ng=1;const s=hi();return Af=(n,r)=>{const u=s(n,r);return u?u.version:null},Af}var Rf,Cg;function eS(){if(Cg)return Rf;Cg=1;const s=hi();return Rf=(n,r)=>{const u=s(n.trim().replace(/^[=v]+/,""),r);return u?u.version:null},Rf}var xf,jg;function tS(){if(jg)return xf;jg=1;const s=Ct();return xf=(n,r,u,o,c)=>{typeof u=="string"&&(c=o,o=u,u=void 0);try{return new s(n instanceof s?n.version:n,u).inc(r,o,c).version}catch{return null}},xf}var Nf,kg;function aS(){if(kg)return Nf;kg=1;const s=hi();return Nf=(n,r)=>{const u=s(n,null,!0),o=s(r,null,!0),c=u.compare(o);if(c===0)return null;const d=c>0,m=d?u:o,p=d?o:u,y=!!m.prerelease.length;if(!!p.prerelease.length&&!y){if(!p.patch&&!p.minor)return"major";if(p.compareMain(m)===0)return p.minor&&!p.patch?"minor":"patch"}const v=y?"pre":"";return u.major!==o.major?v+"major":u.minor!==o.minor?v+"minor":u.patch!==o.patch?v+"patch":"prerelease"},Nf}var Cf,Lg;function nS(){if(Lg)return Cf;Lg=1;const s=Ct();return Cf=(n,r)=>new s(n,r).major,Cf}var jf,$g;function rS(){if($g)return jf;$g=1;const s=Ct();return jf=(n,r)=>new s(n,r).minor,jf}var kf,Dg;function iS(){if(Dg)return kf;Dg=1;const s=Ct();return kf=(n,r)=>new s(n,r).patch,kf}var Lf,Mg;function sS(){if(Mg)return Lf;Mg=1;const s=hi();return Lf=(n,r)=>{const u=s(n,r);return u&&u.prerelease.length?u.prerelease:null},Lf}var $f,Ug;function wa(){if(Ug)return $f;Ug=1;const s=Ct();return $f=(n,r,u)=>new s(n,u).compare(new s(r,u)),$f}var Df,Pg;function uS(){if(Pg)return Df;Pg=1;const s=wa();return Df=(n,r,u)=>s(r,n,u),Df}var Mf,zg;function lS(){if(zg)return Mf;zg=1;const s=wa();return Mf=(n,r)=>s(n,r,!0),Mf}var Uf,Ig;function Vd(){if(Ig)return Uf;Ig=1;const s=Ct();return Uf=(n,r,u)=>{const o=new s(n,u),c=new s(r,u);return o.compare(c)||o.compareBuild(c)},Uf}var Pf,Bg;function oS(){if(Bg)return Pf;Bg=1;const s=Vd();return Pf=(n,r)=>n.sort((u,o)=>s(u,o,r)),Pf}var zf,Hg;function cS(){if(Hg)return zf;Hg=1;const s=Vd();return zf=(n,r)=>n.sort((u,o)=>s(o,u,r)),zf}var If,qg;function Hl(){if(qg)return If;qg=1;const s=wa();return If=(n,r,u)=>s(n,r,u)>0,If}var Bf,Zg;function Yd(){if(Zg)return Bf;Zg=1;const s=wa();return Bf=(n,r,u)=>s(n,r,u)<0,Bf}var Hf,Gg;function Jb(){if(Gg)return Hf;Gg=1;const s=wa();return Hf=(n,r,u)=>s(n,r,u)===0,Hf}var qf,Vg;function Wb(){if(Vg)return qf;Vg=1;const s=wa();return qf=(n,r,u)=>s(n,r,u)!==0,qf}var Zf,Yg;function Xd(){if(Yg)return Zf;Yg=1;const s=wa();return Zf=(n,r,u)=>s(n,r,u)>=0,Zf}var Gf,Xg;function Fd(){if(Xg)return Gf;Xg=1;const s=wa();return Gf=(n,r,u)=>s(n,r,u)<=0,Gf}var Vf,Fg;function ev(){if(Fg)return Vf;Fg=1;const s=Jb(),e=Wb(),n=Hl(),r=Xd(),u=Yd(),o=Fd();return Vf=(d,m,p,y)=>{switch(m){case"===":return typeof d=="object"&&(d=d.version),typeof p=="object"&&(p=p.version),d===p;case"!==":return typeof d=="object"&&(d=d.version),typeof p=="object"&&(p=p.version),d!==p;case"":case"=":case"==":return s(d,p,y);case"!=":return e(d,p,y);case">":return n(d,p,y);case">=":return r(d,p,y);case"<":return u(d,p,y);case"<=":return o(d,p,y);default:throw new TypeError(`Invalid operator: ${m}`)}},Vf}var Yf,Qg;function fS(){if(Qg)return Yf;Qg=1;const s=Ct(),e=hi(),{safeRe:n,t:r}=Ys();return Yf=(o,c)=>{if(o instanceof s)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;c=c||{};let d=null;if(!c.rtl)d=o.match(c.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const w=c.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let E;for(;(E=w.exec(o))&&(!d||d.index+d[0].length!==o.length);)(!d||E.index+E[0].length!==d.index+d[0].length)&&(d=E),w.lastIndex=E.index+E[1].length+E[2].length;w.lastIndex=-1}if(d===null)return null;const m=d[2],p=d[3]||"0",y=d[4]||"0",b=c.includePrerelease&&d[5]?`-${d[5]}`:"",v=c.includePrerelease&&d[6]?`+${d[6]}`:"";return e(`${m}.${p}.${y}${b}${v}`,c)},Yf}var Xf,Kg;function dS(){if(Kg)return Xf;Kg=1;class s{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return Xf=s,Xf}var Ff,Jg;function Ea(){if(Jg)return Ff;Jg=1;const s=/\s+/g;class e{constructor(G,$){if($=u($),G instanceof e)return G.loose===!!$.loose&&G.includePrerelease===!!$.includePrerelease?G:new e(G.raw,$);if(G instanceof o)return this.raw=G.value,this.set=[[G]],this.formatted=void 0,this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=G.trim().replace(s," "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(q=>!O(q[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&x(q[0])){this.set=[q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let G=0;G<this.set.length;G++){G>0&&(this.formatted+="||");const $=this.set[G];for(let H=0;H<$.length;H++)H>0&&(this.formatted+=" "),this.formatted+=$[H].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(G){const H=((this.options.includePrerelease&&w)|(this.options.loose&&E))+":"+G,q=r.get(H);if(q)return q;const X=this.options.loose,T=X?m[p.HYPHENRANGELOOSE]:m[p.HYPHENRANGE];G=G.replace(T,gt(this.options.includePrerelease)),c("hyphen replace",G),G=G.replace(m[p.COMPARATORTRIM],y),c("comparator trim",G),G=G.replace(m[p.TILDETRIM],b),c("tilde trim",G),G=G.replace(m[p.CARETTRIM],v),c("caret trim",G);let D=G.split(" ").map(le=>z(le,this.options)).join(" ").split(/\s+/).map(le=>We(le,this.options));X&&(D=D.filter(le=>(c("loose invalid filter",le,this.options),!!le.match(m[p.COMPARATORLOOSE])))),c("range list",D);const V=new Map,Q=D.map(le=>new o(le,this.options));for(const le of Q){if(O(le))return[le];V.set(le.value,le)}V.size>1&&V.has("")&&V.delete("");const F=[...V.values()];return r.set(H,F),F}intersects(G,$){if(!(G instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>k(H,$)&&G.set.some(q=>k(q,$)&&H.every(X=>q.every(T=>X.intersects(T,$)))))}test(G){if(!G)return!1;if(typeof G=="string")try{G=new d(G,this.options)}catch{return!1}for(let $=0;$<this.set.length;$++)if(ft(this.set[$],G,this.options))return!0;return!1}}Ff=e;const n=dS(),r=new n,u=Gd(),o=ql(),c=Bl(),d=Ct(),{safeRe:m,t:p,comparatorTrimReplace:y,tildeTrimReplace:b,caretTrimReplace:v}=Ys(),{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:E}=Il(),O=K=>K.value==="<0.0.0-0",x=K=>K.value==="",k=(K,G)=>{let $=!0;const H=K.slice();let q=H.pop();for(;$&&H.length;)$=H.every(X=>q.intersects(X,G)),q=H.pop();return $},z=(K,G)=>(c("comp",K,G),K=W(K,G),c("caret",K),K=ae(K,G),c("tildes",K),K=te(K,G),c("xrange",K),K=ve(K,G),c("stars",K),K),L=K=>!K||K.toLowerCase()==="x"||K==="*",ae=(K,G)=>K.trim().split(/\s+/).map($=>I($,G)).join(" "),I=(K,G)=>{const $=G.loose?m[p.TILDELOOSE]:m[p.TILDE];return K.replace($,(H,q,X,T,D)=>{c("tilde",K,H,q,X,T,D);let V;return L(q)?V="":L(X)?V=`>=${q}.0.0 <${+q+1}.0.0-0`:L(T)?V=`>=${q}.${X}.0 <${q}.${+X+1}.0-0`:D?(c("replaceTilde pr",D),V=`>=${q}.${X}.${T}-${D} <${q}.${+X+1}.0-0`):V=`>=${q}.${X}.${T} <${q}.${+X+1}.0-0`,c("tilde return",V),V})},W=(K,G)=>K.trim().split(/\s+/).map($=>ce($,G)).join(" "),ce=(K,G)=>{c("caret",K,G);const $=G.loose?m[p.CARETLOOSE]:m[p.CARET],H=G.includePrerelease?"-0":"";return K.replace($,(q,X,T,D,V)=>{c("caret",K,q,X,T,D,V);let Q;return L(X)?Q="":L(T)?Q=`>=${X}.0.0${H} <${+X+1}.0.0-0`:L(D)?X==="0"?Q=`>=${X}.${T}.0${H} <${X}.${+T+1}.0-0`:Q=`>=${X}.${T}.0${H} <${+X+1}.0.0-0`:V?(c("replaceCaret pr",V),X==="0"?T==="0"?Q=`>=${X}.${T}.${D}-${V} <${X}.${T}.${+D+1}-0`:Q=`>=${X}.${T}.${D}-${V} <${X}.${+T+1}.0-0`:Q=`>=${X}.${T}.${D}-${V} <${+X+1}.0.0-0`):(c("no pr"),X==="0"?T==="0"?Q=`>=${X}.${T}.${D}${H} <${X}.${T}.${+D+1}-0`:Q=`>=${X}.${T}.${D}${H} <${X}.${+T+1}.0-0`:Q=`>=${X}.${T}.${D} <${+X+1}.0.0-0`),c("caret return",Q),Q})},te=(K,G)=>(c("replaceXRanges",K,G),K.split(/\s+/).map($=>re($,G)).join(" ")),re=(K,G)=>{K=K.trim();const $=G.loose?m[p.XRANGELOOSE]:m[p.XRANGE];return K.replace($,(H,q,X,T,D,V)=>{c("xRange",K,H,q,X,T,D,V);const Q=L(X),F=Q||L(T),le=F||L(D),de=le;return q==="="&&de&&(q=""),V=G.includePrerelease?"-0":"",Q?q===">"||q==="<"?H="<0.0.0-0":H="*":q&&de?(F&&(T=0),D=0,q===">"?(q=">=",F?(X=+X+1,T=0,D=0):(T=+T+1,D=0)):q==="<="&&(q="<",F?X=+X+1:T=+T+1),q==="<"&&(V="-0"),H=`${q+X}.${T}.${D}${V}`):F?H=`>=${X}.0.0${V} <${+X+1}.0.0-0`:le&&(H=`>=${X}.${T}.0${V} <${X}.${+T+1}.0-0`),c("xRange return",H),H})},ve=(K,G)=>(c("replaceStars",K,G),K.trim().replace(m[p.STAR],"")),We=(K,G)=>(c("replaceGTE0",K,G),K.trim().replace(m[G.includePrerelease?p.GTE0PRE:p.GTE0],"")),gt=K=>(G,$,H,q,X,T,D,V,Q,F,le,de)=>(L(H)?$="":L(q)?$=`>=${H}.0.0${K?"-0":""}`:L(X)?$=`>=${H}.${q}.0${K?"-0":""}`:T?$=`>=${$}`:$=`>=${$}${K?"-0":""}`,L(Q)?V="":L(F)?V=`<${+Q+1}.0.0-0`:L(le)?V=`<${Q}.${+F+1}.0-0`:de?V=`<=${Q}.${F}.${le}-${de}`:K?V=`<${Q}.${F}.${+le+1}-0`:V=`<=${V}`,`${$} ${V}`.trim()),ft=(K,G,$)=>{for(let H=0;H<K.length;H++)if(!K[H].test(G))return!1;if(G.prerelease.length&&!$.includePrerelease){for(let H=0;H<K.length;H++)if(c(K[H].semver),K[H].semver!==o.ANY&&K[H].semver.prerelease.length>0){const q=K[H].semver;if(q.major===G.major&&q.minor===G.minor&&q.patch===G.patch)return!0}return!1}return!0};return Ff}var Qf,Wg;function ql(){if(Wg)return Qf;Wg=1;const s=Symbol("SemVer ANY");class e{static get ANY(){return s}constructor(y,b){if(b=n(b),y instanceof e){if(y.loose===!!b.loose)return y;y=y.value}y=y.trim().split(/\s+/).join(" "),c("comparator",y,b),this.options=b,this.loose=!!b.loose,this.parse(y),this.semver===s?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(y){const b=this.options.loose?r[u.COMPARATORLOOSE]:r[u.COMPARATOR],v=y.match(b);if(!v)throw new TypeError(`Invalid comparator: ${y}`);this.operator=v[1]!==void 0?v[1]:"",this.operator==="="&&(this.operator=""),v[2]?this.semver=new d(v[2],this.options.loose):this.semver=s}toString(){return this.value}test(y){if(c("Comparator.test",y,this.options.loose),this.semver===s||y===s)return!0;if(typeof y=="string")try{y=new d(y,this.options)}catch{return!1}return o(y,this.operator,this.semver,this.options)}intersects(y,b){if(!(y instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new m(y.value,b).test(this.value):y.operator===""?y.value===""?!0:new m(this.value,b).test(y.semver):(b=n(b),b.includePrerelease&&(this.value==="<0.0.0-0"||y.value==="<0.0.0-0")||!b.includePrerelease&&(this.value.startsWith("<0.0.0")||y.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&y.operator.startsWith(">")||this.operator.startsWith("<")&&y.operator.startsWith("<")||this.semver.version===y.semver.version&&this.operator.includes("=")&&y.operator.includes("=")||o(this.semver,"<",y.semver,b)&&this.operator.startsWith(">")&&y.operator.startsWith("<")||o(this.semver,">",y.semver,b)&&this.operator.startsWith("<")&&y.operator.startsWith(">")))}}Qf=e;const n=Gd(),{safeRe:r,t:u}=Ys(),o=ev(),c=Bl(),d=Ct(),m=Ea();return Qf}var Kf,eb;function Zl(){if(eb)return Kf;eb=1;const s=Ea();return Kf=(n,r,u)=>{try{r=new s(r,u)}catch{return!1}return r.test(n)},Kf}var Jf,tb;function hS(){if(tb)return Jf;tb=1;const s=Ea();return Jf=(n,r)=>new s(n,r).set.map(u=>u.map(o=>o.value).join(" ").trim().split(" ")),Jf}var Wf,ab;function mS(){if(ab)return Wf;ab=1;const s=Ct(),e=Ea();return Wf=(r,u,o)=>{let c=null,d=null,m=null;try{m=new e(u,o)}catch{return null}return r.forEach(p=>{m.test(p)&&(!c||d.compare(p)===-1)&&(c=p,d=new s(c,o))}),c},Wf}var ed,nb;function pS(){if(nb)return ed;nb=1;const s=Ct(),e=Ea();return ed=(r,u,o)=>{let c=null,d=null,m=null;try{m=new e(u,o)}catch{return null}return r.forEach(p=>{m.test(p)&&(!c||d.compare(p)===1)&&(c=p,d=new s(c,o))}),c},ed}var td,rb;function yS(){if(rb)return td;rb=1;const s=Ct(),e=Ea(),n=Hl();return td=(u,o)=>{u=new e(u,o);let c=new s("0.0.0");if(u.test(c)||(c=new s("0.0.0-0"),u.test(c)))return c;c=null;for(let d=0;d<u.set.length;++d){const m=u.set[d];let p=null;m.forEach(y=>{const b=new s(y.semver.version);switch(y.operator){case">":b.prerelease.length===0?b.patch++:b.prerelease.push(0),b.raw=b.format();case"":case">=":(!p||n(b,p))&&(p=b);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${y.operator}`)}}),p&&(!c||n(c,p))&&(c=p)}return c&&u.test(c)?c:null},td}var ad,ib;function gS(){if(ib)return ad;ib=1;const s=Ea();return ad=(n,r)=>{try{return new s(n,r).range||"*"}catch{return null}},ad}var nd,sb;function Qd(){if(sb)return nd;sb=1;const s=Ct(),e=ql(),{ANY:n}=e,r=Ea(),u=Zl(),o=Hl(),c=Yd(),d=Fd(),m=Xd();return nd=(y,b,v,w)=>{y=new s(y,w),b=new r(b,w);let E,O,x,k,z;switch(v){case">":E=o,O=d,x=c,k=">",z=">=";break;case"<":E=c,O=m,x=o,k="<",z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(y,b,w))return!1;for(let L=0;L<b.set.length;++L){const ae=b.set[L];let I=null,W=null;if(ae.forEach(ce=>{ce.semver===n&&(ce=new e(">=0.0.0")),I=I||ce,W=W||ce,E(ce.semver,I.semver,w)?I=ce:x(ce.semver,W.semver,w)&&(W=ce)}),I.operator===k||I.operator===z||(!W.operator||W.operator===k)&&O(y,W.semver))return!1;if(W.operator===z&&x(y,W.semver))return!1}return!0},nd}var rd,ub;function bS(){if(ub)return rd;ub=1;const s=Qd();return rd=(n,r,u)=>s(n,r,">",u),rd}var id,lb;function vS(){if(lb)return id;lb=1;const s=Qd();return id=(n,r,u)=>s(n,r,"<",u),id}var sd,ob;function _S(){if(ob)return sd;ob=1;const s=Ea();return sd=(n,r,u)=>(n=new s(n,u),r=new s(r,u),n.intersects(r,u)),sd}var ud,cb;function wS(){if(cb)return ud;cb=1;const s=Zl(),e=wa();return ud=(n,r,u)=>{const o=[];let c=null,d=null;const m=n.sort((v,w)=>e(v,w,u));for(const v of m)s(v,r,u)?(d=v,c||(c=v)):(d&&o.push([c,d]),d=null,c=null);c&&o.push([c,null]);const p=[];for(const[v,w]of o)v===w?p.push(v):!w&&v===m[0]?p.push("*"):w?v===m[0]?p.push(`<=${w}`):p.push(`${v} - ${w}`):p.push(`>=${v}`);const y=p.join(" || "),b=typeof r.raw=="string"?r.raw:String(r);return y.length<b.length?y:r},ud}var ld,fb;function ES(){if(fb)return ld;fb=1;const s=Ea(),e=ql(),{ANY:n}=e,r=Zl(),u=wa(),o=(b,v,w={})=>{if(b===v)return!0;b=new s(b,w),v=new s(v,w);let E=!1;e:for(const O of b.set){for(const x of v.set){const k=m(O,x,w);if(E=E||k!==null,k)continue e}if(E)return!1}return!0},c=[new e(">=0.0.0-0")],d=[new e(">=0.0.0")],m=(b,v,w)=>{if(b===v)return!0;if(b.length===1&&b[0].semver===n){if(v.length===1&&v[0].semver===n)return!0;w.includePrerelease?b=c:b=d}if(v.length===1&&v[0].semver===n){if(w.includePrerelease)return!0;v=d}const E=new Set;let O,x;for(const te of b)te.operator===">"||te.operator===">="?O=p(O,te,w):te.operator==="<"||te.operator==="<="?x=y(x,te,w):E.add(te.semver);if(E.size>1)return null;let k;if(O&&x){if(k=u(O.semver,x.semver,w),k>0)return null;if(k===0&&(O.operator!==">="||x.operator!=="<="))return null}for(const te of E){if(O&&!r(te,String(O),w)||x&&!r(te,String(x),w))return null;for(const re of v)if(!r(te,String(re),w))return!1;return!0}let z,L,ae,I,W=x&&!w.includePrerelease&&x.semver.prerelease.length?x.semver:!1,ce=O&&!w.includePrerelease&&O.semver.prerelease.length?O.semver:!1;W&&W.prerelease.length===1&&x.operator==="<"&&W.prerelease[0]===0&&(W=!1);for(const te of v){if(I=I||te.operator===">"||te.operator===">=",ae=ae||te.operator==="<"||te.operator==="<=",O){if(ce&&te.semver.prerelease&&te.semver.prerelease.length&&te.semver.major===ce.major&&te.semver.minor===ce.minor&&te.semver.patch===ce.patch&&(ce=!1),te.operator===">"||te.operator===">="){if(z=p(O,te,w),z===te&&z!==O)return!1}else if(O.operator===">="&&!r(O.semver,String(te),w))return!1}if(x){if(W&&te.semver.prerelease&&te.semver.prerelease.length&&te.semver.major===W.major&&te.semver.minor===W.minor&&te.semver.patch===W.patch&&(W=!1),te.operator==="<"||te.operator==="<="){if(L=y(x,te,w),L===te&&L!==x)return!1}else if(x.operator==="<="&&!r(x.semver,String(te),w))return!1}if(!te.operator&&(x||O)&&k!==0)return!1}return!(O&&ae&&!x&&k!==0||x&&I&&!O&&k!==0||ce||W)},p=(b,v,w)=>{if(!b)return v;const E=u(b.semver,v.semver,w);return E>0?b:E<0||v.operator===">"&&b.operator===">="?v:b},y=(b,v,w)=>{if(!b)return v;const E=u(b.semver,v.semver,w);return E<0?b:E>0||v.operator==="<"&&b.operator==="<="?v:b};return ld=o,ld}var od,db;function SS(){if(db)return od;db=1;const s=Ys(),e=Il(),n=Ct(),r=Kb(),u=hi(),o=WE(),c=eS(),d=tS(),m=aS(),p=nS(),y=rS(),b=iS(),v=sS(),w=wa(),E=uS(),O=lS(),x=Vd(),k=oS(),z=cS(),L=Hl(),ae=Yd(),I=Jb(),W=Wb(),ce=Xd(),te=Fd(),re=ev(),ve=fS(),We=ql(),gt=Ea(),ft=Zl(),K=hS(),G=mS(),$=pS(),H=yS(),q=gS(),X=Qd(),T=bS(),D=vS(),V=_S(),Q=wS(),F=ES();return od={parse:u,valid:o,clean:c,inc:d,diff:m,major:p,minor:y,patch:b,prerelease:v,compare:w,rcompare:E,compareLoose:O,compareBuild:x,sort:k,rsort:z,gt:L,lt:ae,eq:I,neq:W,gte:ce,lte:te,cmp:re,coerce:ve,Comparator:We,Range:gt,satisfies:ft,toComparators:K,maxSatisfying:G,minSatisfying:$,minVersion:H,validRange:q,outside:X,gtr:T,ltr:D,intersects:V,simplifyRange:Q,subset:F,SemVer:n,re:s.re,src:s.src,tokens:s.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},od}SS();function Rn(s){if(!s||s.split("/").length>2||s.startsWith("/")||s.endsWith("/")||s.split(":").length>2)throw new Error(`Invalid identifier format: ${s}`);const[e,n]=s.split(":"),r=n||"latest";if(e.includes("/")){const[u,o]=e.split("/",2);if(!u||!o)throw new Error(`Invalid identifier format: ${s}`);return[u,o,r]}else{if(!e)throw new Error(`Invalid identifier format: ${s}`);return["-",e,r]}}class TS extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function pe(s,e,n){let r;if(s.ok){n&&(r=await s.text());return}r=await s.text();const u=`Failed to ${e}. Received status [${s.status}]: ${s.statusText}. Server response: ${r}`;throw s.status===409?new TS(u):new Error(u)}var hb="[...]",OS={result:"[Circular]"},jl=[],ni=[];const AS=new TextEncoder;function RS(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function gl(s){return AS.encode(s)}function Zt(s,e,n,r){var u;try{const o=JSON.stringify(s,e,n);return gl(o)}catch(o){if(!((u=o.message)!=null&&u.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),gl("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof r>"u"&&(r=RS()),kd(s,"",0,[],void 0,0,r);let c;try{ni.length===0?c=JSON.stringify(s,e,n):c=JSON.stringify(s,xS(e),n)}catch{return gl("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;jl.length!==0;){const d=jl.pop();d.length===4?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return gl(c)}}function cd(s,e,n,r){var u=Object.getOwnPropertyDescriptor(r,n);u.get!==void 0?u.configurable?(Object.defineProperty(r,n,{value:s}),jl.push([r,n,e,u])):ni.push([e,n,s]):(r[n]=s,jl.push([r,n,e]))}function kd(s,e,n,r,u,o,c){o+=1;var d;if(typeof s=="object"&&s!==null){for(d=0;d<r.length;d++)if(r[d]===s){cd(OS,s,e,u);return}if(typeof c.depthLimit<"u"&&o>c.depthLimit){cd(hb,s,e,u);return}if(typeof c.edgesLimit<"u"&&n+1>c.edgesLimit){cd(hb,s,e,u);return}if(r.push(s),Array.isArray(s))for(d=0;d<s.length;d++)kd(s[d],d,d,r,s,o,c);else{var m=Object.keys(s);for(d=0;d<m.length;d++){var p=m[d];kd(s[p],p,d,r,s,o,c)}}r.pop()}}function xS(s){return s=typeof s<"u"?s:function(e,n){return n},function(e,n){if(ni.length>0)for(var r=0;r<ni.length;r++){var u=ni[r];if(u[1]===e&&u[0]===n){n=u[2],ni.splice(r,1);break}}return s.call(this,e,n)}}function mb(s){const e=nv(),n=BS(),r=s.extra??{},u=r.metadata;return s.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...n,...n.revision_id||s.revision_id?{revision_id:s.revision_id??n.revision_id}:{},...u}},s}const NS=()=>{const s=Cn("TRACING_SAMPLING_RATE");if(s===void 0)return;const e=parseFloat(s);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},CS=s=>{const n=s.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function jS(s){const e=[];for await(const n of s)e.push(n);return e}function fd(s){if(s!==void 0)return s.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const kS=async s=>{if((s==null?void 0:s.status)===429){const e=parseInt(s.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};class LS{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let n;const r=new Promise(o=>{n=o}),u=Zt(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:n,itemPromise:r,size:u}),this.sizeBytes+=u,r}pop(e){var u;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let r=0;for(;r+(((u=this.peek())==null?void 0:u.size)??0)<e&&this.items.length>0;){const o=this.items.shift();o&&(n.push(o),r+=o.size,this.sizeBytes-=o.size)}if(n.length===0&&this.items.length>0){const o=this.items.shift();n.push(o),r+=o.size,this.sizeBytes-=o.size}return[n.map(o=>({action:o.action,item:o.payload})),()=>n.forEach(o=>o.itemPromiseResolve())]}}const $S=20971520,DS=2500;class Is{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new LS}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:fr("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1});const n=Is.getDefaultClientConfig();if(this.tracingSampleRate=NS(),this.apiUrl=fd(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=fd(e.apiKey??n.apiKey),this.webUrl=fd(e.webUrl??n.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new bg(e.callerOptions??{}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.batchIngestCaller=new bg({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:kS}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=Cn("API_KEY"),n=Cn("ENDPOINT")??"https://api.smith.langchain.com",r=Cn("HIDE_INPUTS")==="true",u=Cn("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:u}}getHostUrl(){return this.webUrl?this.webUrl:CS(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${tv}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",u=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(ue(),u,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(o,`Failed to fetch ${e}`),o}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let u=Number(n.get("offset"))||0;const o=Number(n.get("limit"))||100;for(;;){n.set("offset",String(u)),n.set("limit",String(o));const c=`${this.apiUrl}${e}?${n}`,d=await this.caller.call(ue(),c,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(d,`Failed to fetch ${e}`);const m=r?r(await d.json()):await d.json();if(m.length===0||(yield m,m.length<o))break;u+=m.length}}async*_getCursorPaginatedList(e,n=null,r="POST",u="runs"){const o=n?{...n}:{};for(;;){const d=await(await this.caller.call(ue(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)})).json();if(!d||!d[u])break;yield d[u];const m=d.cursors;if(!m||!m.next)break;o.cursor=m.next}}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const u of e)this.filteredPostUuids.has(u.id)?this.filteredPostUuids.delete(u.id):r.push(u);return r}else{const r=[];for(const u of e)u.id!==u.trace_id&&!this.filteredPostUuids.has(u.trace_id)||Math.random()<this.tracingSampleRate?r.push(u):this.filteredPostUuids.add(u.id);return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??$S}async _getMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const n=[];for(;this.autoBatchQueue.items.length>0;){const[r,u]=this.autoBatchQueue.pop(e);if(!r.length){u();break}const o=this._processBatch(r,u).catch(console.error);n.push(o)}return Promise.all(n)}async _processBatch(e,n){var r;if(!e.length){n();return}try{const u={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();(r=o==null?void 0:o.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(u):await this.batchIngestRuns(u)}finally{n()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=mb(e.item));const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const e=await ue()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(DS),...this.fetchOptions});return await pe(e,"get server info"),e.json()}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch{console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const u=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&u.trace_id!==void 0&&u.dotted_order!==void 0){this.processRunOperation({action:"create",item:u}).catch(console.error);return}const o=mb(u),c=await this.caller.call(ue(),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:Zt(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(c,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;let r=(e==null?void 0:e.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[],u=(n==null?void 0:n.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[];if(r.length>0&&u.length>0){const d=r.reduce((p,y)=>(y.id&&(p[y.id]=y),p),{}),m=[];for(const p of u)p.id!==void 0&&d[p.id]?d[p.id]={...d[p.id],...p}:m.push(p);r=Object.values(d),u=m}const o={post:this._filterForSampling(r),patch:this._filterForSampling(u,!0)};if(!o.post.length&&!o.patch.length)return;const c={post:[],patch:[]};for(const d of["post","patch"]){const m=d,p=o[m].reverse();let y=p.pop();for(;y!==void 0;)c[m].push(y),y=p.pop()}(c.post.length>0||c.patch.length>0)&&await this._postBatchIngestRuns(Zt(c))}async _postBatchIngestRuns(e){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(ue(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;const r={};let u=[];for(const y of e??[]){const b=this.prepareRunCreateOrUpdateInputs(y);b.id!==void 0&&b.attachments!==void 0&&(r[b.id]=b.attachments),delete b.attachments,u.push(b)}let o=[];for(const y of n??[])o.push(this.prepareRunCreateOrUpdateInputs(y));if(u.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(o.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(u.length>0&&o.length>0){const y=u.reduce((v,w)=>(w.id&&(v[w.id]=w),v),{}),b=[];for(const v of o)v.id!==void 0&&y[v.id]?y[v.id]={...y[v.id],...v}:b.push(v);u=Object.values(y),o=b}if(u.length===0&&o.length===0)return;const m=[],p=[];for(const[y,b]of[["post",u],["patch",o]])for(const v of b){const{inputs:w,outputs:E,events:O,attachments:x,...k}=v,z={inputs:w,outputs:E,events:O},L=Zt(k);p.push({name:`${y}.${k.id}`,payload:new Blob([L],{type:`application/json; length=${L.length}`})});for(const[ae,I]of Object.entries(z)){if(I===void 0)continue;const W=Zt(I);p.push({name:`${y}.${k.id}.${ae}`,payload:new Blob([W],{type:`application/json; length=${W.length}`})})}if(k.id!==void 0){const ae=r[k.id];if(ae){delete r[k.id];for(const[I,W]of Object.entries(ae)){let ce,te;if(Array.isArray(W)?[ce,te]=W:(ce=W.mimeType,te=W.data),I.includes(".")){console.warn(`Skipping attachment '${I}' for run ${k.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}p.push({name:`attachment.${k.id}.${I}`,payload:new Blob([te],{type:`${ce}; length=${te.byteLength}`})})}}}m.push(`trace=${k.trace_id},id=${k.id}`)}await this._sendMultipartRequest(p,m.join("; "))}async _sendMultipartRequest(e,n){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),u=[];for(const m of e)u.push(new Blob([`--${r}\r
`])),u.push(new Blob([`Content-Disposition: form-data; name="${m.name}"\r
`,`Content-Type: ${m.payload.type}\r
\r
`])),u.push(m.payload),u.push(new Blob([`\r
`]));u.push(new Blob([`--${r}--\r
`]));const c=await new Blob(u).arrayBuffer(),d=await this.batchIngestCaller.call(ue(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:c,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(d,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${n}`)}}async updateRun(e,n){be(e),n.inputs&&(n.inputs=this.processInputs(n.inputs)),n.outputs&&(n.outputs=this.processOutputs(n.outputs));const r={...n,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(n.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const u={...this.headers,"Content-Type":"application/json"},o=await this.caller.call(ue(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:u,body:Zt(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(o,"update run",!0)}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){be(e);let r=await this._get(`/runs/${e}`);return n&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let u;n.session_id?u=n.session_id:r!=null&&r.projectName?u=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?u=r==null?void 0:r.projectId:u=(await this.readProject({projectName:Cn("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${u}/r/${n.id}?poll=true`}else if(e!==void 0){const u=await this.readRun(e);if(!u.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${u.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const n=await jS(this.listRuns({id:e.child_run_ids})),r={},u={};n.sort((o,c)=>((o==null?void 0:o.dotted_order)??"").localeCompare((c==null?void 0:c.dotted_order)??""));for(const o of n){if(o.parent_run_id===null||o.parent_run_id===void 0)throw new Error(`Child run ${o.id} has no parent`);o.parent_run_id in r||(r[o.parent_run_id]=[]),r[o.parent_run_id].push(o),u[o.id]=o}e.child_runs=r[e.id]||[];for(const o in r)o!==e.id&&(u[o].child_runs=r[o]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:u,traceId:o,referenceExampleId:c,startTime:d,executionOrder:m,isRoot:p,runType:y,error:b,id:v,query:w,filter:E,traceFilter:O,treeFilter:x,limit:k,select:z}=e;let L=[];if(n&&(L=Array.isArray(n)?n:[n]),r){const ce=Array.isArray(r)?r:[r],te=await Promise.all(ce.map(re=>this.readProject({projectName:re}).then(ve=>ve.id)));L.push(...te)}const ae=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],I={session:L.length?L:null,run_type:y,reference_example:c,query:w,filter:E,trace_filter:O,tree_filter:x,execution_order:m,parent_run:u,start_time:d?d.toISOString():null,error:b,id:v,limit:k,trace:o,select:z||ae,is_root:p};let W=0;for await(const ce of this._getCursorPaginatedList("/runs/query",I))if(k){if(W>=k)break;if(ce.length+W>k){yield*ce.slice(0,k-W);break}W+=ce.length,yield*ce}else yield*ce}async getRunStats({id:e,trace:n,parentRun:r,runType:u,projectNames:o,projectIds:c,referenceExampleIds:d,startTime:m,endTime:p,error:y,query:b,filter:v,traceFilter:w,treeFilter:E,isRoot:O,dataSourceType:x}){let k=c||[];o&&(k=[...c||[],...await Promise.all(o.map(W=>this.readProject({projectName:W}).then(ce=>ce.id)))]);const L=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:u,session:k,reference_example:d,start_time:m,end_time:p,error:y,query:b,filter:v,trace_filter:w,tree_filter:E,is_root:O,data_source_type:x}).filter(([W,ce])=>ce!==void 0));return await(await this.caller.call(ue(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(L),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||Dt()};be(e);const o=await(await this.caller.call(ue(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(o===null||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(e){be(e);const n=await this.caller.call(ue(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(n,"unshare run",!0)}async readRunSharedLink(e){be(e);const r=await(await this.caller.call(ue(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const c of n)r.append("id",c);return be(e),await(await this.caller.call(ue(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),be(e);const u=await(await this.caller.call(ue(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};be(e);const o=await(await this.caller.call(ue(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(e){be(e);const n=await this.caller.call(ue(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(n,"unshare dataset",!0)}async readSharedDataset(e){return be(e),await(await this.caller.call(ue(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const u=new URLSearchParams;Object.entries(r).forEach(([d,m])=>{Array.isArray(m)?m.forEach(p=>u.append(d,p)):u.append(d,m)});const o=await this.caller.call(ue(),`${this.apiUrl}/public/${e}/examples?${u.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),c=await o.json();if(!o.ok)throw"detail"in c?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${c.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return c.map(d=>({...d,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:u=!1,projectExtra:o=null,referenceDatasetId:c=null}){const d=u?"?upsert=true":"",m=`${this.apiUrl}/sessions${d}`,p=o||{};r&&(p.metadata=r);const y={name:e,extra:p,description:n};c!==null&&(y.reference_dataset_id=c);const b=await this.caller.call(ue(),m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(b,"create project"),await b.json()}async updateProject(e,{name:n=null,description:r=null,metadata:u=null,projectExtra:o=null,endTime:c=null}){const d=`${this.apiUrl}/sessions/${e}`;let m=o;u&&(m={...m||{},metadata:u});const p={name:n,extra:m,description:r,end_time:c?new Date(c).toISOString():null},y=await this.caller.call(ue(),d,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(y,"update project"),await y.json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const u=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)be(e),r+=`/${e}`;else if(n!==void 0)u.append("name",n);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(ue(),`${this.apiUrl}${r}?${u}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const c=await o.json();return o.ok?Array.isArray(c)?c.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let u="/sessions";const o=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)be(e),u+=`/${e}`;else if(n!==void 0)o.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&o.append("include_stats",r.toString());const c=await this._get(u,o);let d;if(Array.isArray(c)){if(c.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);d=c[0]}else d=c;return d}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),u=await this._getTenantId();return`${this.getHostUrl()}/o/${u}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),u=await this._getTenantId();return`${this.getHostUrl()}/o/${u}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:u,referenceDatasetName:o,referenceFree:c,metadata:d}={}){const m=new URLSearchParams;if(e!==void 0)for(const p of e)m.append("id",p);if(n!==void 0&&m.append("name",n),r!==void 0&&m.append("name_contains",r),u!==void 0)m.append("reference_dataset",u);else if(o!==void 0){const p=await this.readDataset({datasetName:o});m.append("reference_dataset",p.id)}c!==void 0&&m.append("reference_free",c.toString()),d!==void 0&&m.append("metadata",JSON.stringify(d));for await(const p of this._getPaginated("/sessions",m))yield*p}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,be(r);const u=await this.caller.call(ue(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(u,`delete session ${r} (${n})`,!0)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:u,description:o,dataType:c,name:d}){const m=`${this.apiUrl}/datasets/upload`,p=new FormData;p.append("file",e,n),r.forEach(v=>{p.append("input_keys",v)}),u.forEach(v=>{p.append("output_keys",v)}),o&&p.append("description",o),c&&p.append("data_type",c),d&&p.append("name",d);const y=await this.caller.call(ue(),m,{method:"POST",headers:this.headers,body:p,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(y,"upload CSV"),await y.json()}async createDataset(e,{description:n,dataType:r,inputsSchema:u,outputsSchema:o,metadata:c}={}){const d={name:e,description:n,extra:c?{metadata:c}:void 0};r&&(d.data_type=r),u&&(d.inputs_schema_definition=u),o&&(d.outputs_schema_definition=o);const m=await this.caller.call(ue(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(m,"create dataset"),await m.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const u=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)be(e),r+=`/${e}`;else if(n!==void 0)u.append("name",n);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(r,u);let c;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);c=o[0]}else c=o;return c}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:u}){let o=e;if(o===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:n})).id);const c=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof u=="string"?u:u.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,c)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(d=>JSON.parse(d))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:u,datasetNameContains:o,metadata:c}={}){const d="/datasets",m=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const p of r)m.append("id",p);u!==void 0&&m.append("name",u),o!==void 0&&m.append("name_contains",o),c!==void 0&&m.append("metadata",JSON.stringify(c));for await(const p of this._getPaginated(d,m))yield*p}async updateDataset(e){const{datasetId:n,datasetName:r,...u}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const o=n??(await this.readDataset({datasetName:r})).id;be(o);const c=await this.caller.call(ue(),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(c,"update dataset"),await c.json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:u,tag:o}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const c=n??(await this.readDataset({datasetName:r})).id;be(c);const d=await this.caller.call(ue(),`${this.apiUrl}/datasets/${c}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof u=="string"?u:u.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(d,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",u=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(u=(await this.readDataset({datasetName:n})).id),u!==void 0)be(u),r+=`/${u}`;else throw new Error("Must provide datasetName or datasetId");const o=await this.caller.call(ue(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(o,`delete ${r}`),await o.json()}async indexDataset({datasetId:e,datasetName:n,tag:r}){let u=e;if(!u&&!n)throw new Error("Must provide either datasetName or datasetId");if(u&&n)throw new Error("Must provide either datasetName or datasetId, not both");u||(u=(await this.readDataset({datasetName:n})).id),be(u);const o={tag:r},c=await this.caller.call(ue(),`${this.apiUrl}/datasets/${u}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(c,"index dataset"),await c.json()}async similarExamples(e,n,r,{filter:u}={}){const o={limit:r,inputs:e};u!==void 0&&(o.filter=u),be(n);const c=await this.caller.call(ue(),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(c,"fetch similar examples"),(await c.json()).examples}async createExample(e,n,{datasetId:r,datasetName:u,createdAt:o,exampleId:c,metadata:d,split:m,sourceRunId:p}){let y=r;if(y===void 0&&u===void 0)throw new Error("Must provide either datasetName or datasetId");if(y!==void 0&&u!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");y===void 0&&(y=(await this.readDataset({datasetName:u})).id);const b=o||new Date,v={dataset_id:y,inputs:e,outputs:n,created_at:b==null?void 0:b.toISOString(),id:c,metadata:d,split:m,source_run_id:p},w=await this.caller.call(ue(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(w,"create example"),await w.json()}async createExamples(e){const{inputs:n,outputs:r,metadata:u,sourceRunIds:o,exampleIds:c,datasetId:d,datasetName:m}=e;let p=d;if(p===void 0&&m===void 0)throw new Error("Must provide either datasetName or datasetId");if(p!==void 0&&m!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");p===void 0&&(p=(await this.readDataset({datasetName:m})).id);const y=n.map((w,E)=>({dataset_id:p,inputs:w,outputs:r?r[E]:void 0,metadata:u?u[E]:void 0,split:e.splits?e.splits[E]:void 0,id:c?c[E]:void 0,source_run_id:o?o[E]:void 0})),b=await this.caller.call(ue(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(b,"create examples"),await b.json()}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const u=e.map(c=>vg(c)?_g(c):c),o=vg(n)?_g(n):n;return this.createExample({input:u},{output:o},r)}async readExample(e){be(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:u,...o}=r,c=o;return u&&(c.attachments=Object.entries(u).reduce((d,[m,p])=>(d[m.slice(11)]={presigned_url:p.presigned_url,mime_type:p.mime_type},d),{})),c}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:u,splits:o,inlineS3Urls:c,metadata:d,limit:m,offset:p,filter:y,includeAttachments:b}={}){let v;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)v=e;else if(n!==void 0)v=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const w=new URLSearchParams({dataset:v}),E=u?typeof u=="string"?u:u==null?void 0:u.toISOString():void 0;E&&w.append("as_of",E);const O=c??!0;if(w.append("inline_s3_urls",O.toString()),r!==void 0)for(const k of r)w.append("id",k);if(o!==void 0)for(const k of o)w.append("splits",k);if(d!==void 0){const k=JSON.stringify(d);w.append("metadata",k)}m!==void 0&&w.append("limit",m.toString()),p!==void 0&&w.append("offset",p.toString()),y!==void 0&&w.append("filter",y),b===!0&&["attachment_urls","outputs","metadata"].forEach(k=>w.append("select",k));let x=0;for await(const k of this._getPaginated("/examples",w)){for(const z of k){const{attachment_urls:L,...ae}=z,I=ae;L&&(I.attachments=Object.entries(L).reduce((W,[ce,te])=>(W[ce.slice(11)]={presigned_url:te.presigned_url,mime_type:te.mime_type||void 0},W),{})),yield I,x++}if(m!==void 0&&x>=m)break}}async deleteExample(e){be(e);const n=`/examples/${e}`,r=await this.caller.call(ue(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(r,`delete ${n}`),await r.json()}async updateExample(e,n){be(e);const r=await this.caller.call(ue(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(r,"update example"),await r.json()}async updateExamples(e){const n=await this.caller.call(ue(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(n,"update examples"),await n.json()}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:u}){let o;if(e?o=e:o=(await this.readDataset({datasetName:n})).id,be(o),r&&u||!r&&!u)throw new Error("Exactly one of asOf and tag must be specified.");const c=new URLSearchParams;r!==void 0&&c.append("as_of",typeof r=="string"?r:r.toISOString()),u!==void 0&&c.append("tag",u);const d=await this.caller.call(ue(),`${this.apiUrl}/datasets/${o}/version?${c.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(d,"read dataset version"),await d.json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let u;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?u=(await this.readDataset({datasetName:n})).id:u=e,be(u);const o=new URLSearchParams,c=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return c&&o.append("as_of",c),await this._get(`/datasets/${u}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:u,remove:o=!1}){let c;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?c=(await this.readDataset({datasetName:n})).id:c=e,be(c);const d={split_name:r,examples:u.map(p=>(be(p),p)),remove:o},m=await this.caller.call(ue(),`${this.apiUrl}/datasets/${c}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(m,"update dataset splits",!0)}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:u,referenceExample:o}={loadChildRuns:!1}){Qb("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let c;if(typeof e=="string")c=await this.readRun(e,{loadChildRuns:u});else if(typeof e=="object"&&"id"in e)c=e;else throw new Error(`Invalid run type: ${typeof e}`);c.reference_example_id!==null&&c.reference_example_id!==void 0&&(o=await this.readExample(c.reference_example_id));const d=await n.evaluateRun(c,o),[m,p]=await this._logEvaluationFeedback(d,c,r);return p[0]}async createFeedback(e,n,{score:r,value:u,correction:o,comment:c,sourceInfo:d,feedbackSourceType:m="api",sourceRunId:p,feedbackId:y,feedbackConfig:b,projectId:v,comparativeExperimentId:w}){var z;if(!e&&!v)throw new Error("One of runId or projectId must be provided");if(e&&v)throw new Error("Only one of runId or projectId can be provided");const E={type:m??"api",metadata:d??{}};p!==void 0&&(E==null?void 0:E.metadata)!==void 0&&!E.metadata.__run&&(E.metadata.__run={run_id:p}),(E==null?void 0:E.metadata)!==void 0&&((z=E.metadata.__run)==null?void 0:z.run_id)!==void 0&&be(E.metadata.__run.run_id);const O={id:y??Dt(),run_id:e,key:n,score:r,value:u,correction:o,comment:c,feedback_source:E,comparative_experiment_id:w,feedbackConfig:b,session_id:v},x=`${this.apiUrl}/feedback`,k=await this.caller.call(ue(),x,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(O),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(k,"create feedback",!0),O}async updateFeedback(e,{score:n,value:r,correction:u,comment:o}){const c={};n!=null&&(c.score=n),r!=null&&(c.value=r),u!=null&&(c.correction=u),o!=null&&(c.comment=o),be(e);const d=await this.caller.call(ue(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(d,"update feedback",!0)}async readFeedback(e){be(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){be(e);const n=`/feedback/${e}`,r=await this.caller.call(ue(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(r,`delete ${n}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const u=new URLSearchParams;if(e&&u.append("run",e.join(",")),n)for(const o of n)u.append("key",o);if(r)for(const o of r)u.append("source",o);for await(const o of this._getPaginated("/feedback",u))yield*o}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:u}={}){const o={run_id:e,feedback_key:n,feedback_config:u};return r?typeof r=="string"?o.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(o.expires_in=r):o.expires_in={hours:3},await(await this.caller.call(ue(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:u,description:o,metadata:c,id:d}){var y;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const m={id:d,name:e,experiment_ids:n,reference_dataset_id:r,description:o,created_at:(y=u??new Date)==null?void 0:y.toISOString(),extra:{}};return c&&(m.extra.metadata=c),await(await this.caller.call(ue(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){be(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const u=this._selectEvalResults(e),o=[];for(const c of u){let d=r||{};c.evaluatorInfo&&(d={...c.evaluatorInfo,...d});let m=null;c.targetRunId?m=c.targetRunId:n&&(m=n.id),o.push(await this.createFeedback(m,c.key,{score:c.score,value:c.value,comment:c.comment,correction:c.correction,sourceInfo:d,sourceRunId:c.sourceRunId,feedbackConfig:c.feedbackConfig,feedbackSourceType:"model"}))}return[u,o]}async logEvaluationFeedback(e,n,r){const[u]=await this._logEvaluationFeedback(e,n,r);return u}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:u,limit:o}=e,c=new URLSearchParams;n&&n.forEach((m,p)=>{be(m,`queueIds[${p}]`),c.append("ids",m)}),r&&c.append("name",r),u&&c.append("name_contains",u),c.append("limit",(o!==void 0?Math.min(o,100):100).toString());let d=0;for await(const m of this._getPaginated("/annotation-queues",c))if(yield*m,d++,o!==void 0&&d>=o)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:u}=e,o={name:n,description:r,id:u||Dt()},c=await this.caller.call(ue(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(o).filter(([m,p])=>p!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(c,"create annotation queue"),await c.json()}async readAnnotationQueue(e){const n=await this.listAnnotationQueues({queueIds:[e]}).next();if(n.done)throw new Error(`Annotation queue with ID ${e} not found`);return n.value}async updateAnnotationQueue(e,n){const{name:r,description:u}=n,o=await this.caller.call(ue(),`${this.apiUrl}/annotation-queues/${be(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:u}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(o,"update annotation queue")}async deleteAnnotationQueue(e){const n=await this.caller.call(ue(),`${this.apiUrl}/annotation-queues/${be(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(n,"delete annotation queue")}async addRunsToAnnotationQueue(e,n){const r=await this.caller.call(ue(),`${this.apiUrl}/annotation-queues/${be(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((u,o)=>be(u,`runIds[${o}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${be(e,"queueId")}/run`,u=await this.caller.call(ue(),`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(u,"get run from annotation queue"),await u.json()}async deleteRunFromAnnotationQueue(e,n){const r=await this.caller.call(ue(),`${this.apiUrl}/annotation-queues/${be(e,"queueId")}/runs/${be(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const n=await this.caller.call(ue(),`${this.apiUrl}/annotation-queues/${be(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(n,"get size from annotation queue"),await n.json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const n=await this.caller.call(ue(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();if(!n.ok){const u=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),o=new Error(`Error ${n.status}: ${n.statusText}
${u}`);throw o.statusCode=n.status,o}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,u,o]=Rn(e),c=await this.caller.call(ue(),`${this.apiUrl}/likes/${r}/${u}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(c,`${n?"like":"unlike"} prompt`),await c.json()}async _getPromptUrl(e){const[n,r,u]=Rn(e);if(await this._currentTenantIsOwner(n)){const o=await this._getSettings();return u!=="latest"?`${this.getHostUrl()}/prompts/${r}/${u.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return u!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${u.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,u=>u.repos))yield*r}async getPrompt(e){const[n,r,u]=Rn(e),o=await this.caller.call(ue(),`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(o.status===404)return null;await pe(o,"get prompt");const c=await o.json();return c.repo?c.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[u,o,c]=Rn(e);if(!await this._currentTenantIsOwner(u))throw await this._ownerConflictError("create a prompt",u);const d={repo_handle:o,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},m=await this.caller.call(ue(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(m,"create prompt");const{repo:p}=await m.json();return p}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[u,o,c]=Rn(e),d=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${u}/${o}`):r==null?void 0:r.parentCommitHash,m={manifest:JSON.parse(JSON.stringify(n)),parent_commit:d},p=await this.caller.call(ue(),`${this.apiUrl}/commits/${u}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(p,"create commit");const y=await p.json();return this._getPromptUrl(`${u}/${o}${y.commit_hash?`:${y.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const c of n){const d=c.id,m={...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},p=Zt(m),y=new Blob([p],{type:"application/json"});if(r.append(d,y),c.inputs){const b=Zt(c.inputs),v=new Blob([b],{type:"application/json"});r.append(`${d}.inputs`,v)}if(c.outputs){const b=Zt(c.outputs),v=new Blob([b],{type:"application/json"});r.append(`${d}.outputs`,v)}if(c.attachments)for(const[b,v]of Object.entries(c.attachments)){let w,E;Array.isArray(v)?[w,E]=v:(w=v.mimeType,E=v.data);const O=new Blob([E],{type:`${w}; length=${E.byteLength}`});r.append(`${d}.attachment.${b}`,O)}if(c.attachments_operations){const b=Zt(c.attachments_operations),v=new Blob([b],{type:"application/json"});r.append(`${d}.attachments_operations`,v)}}return await(await this.caller.call(ue(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,n=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith version does not allow using the multipart examples endpoint, please update to the latest version.");const r=new FormData;for(const c of n){const d=(c.id??Dt()).toString(),m={created_at:c.created_at,...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split}},p=Zt(m),y=new Blob([p],{type:"application/json"});r.append(d,y);const b=Zt(c.inputs),v=new Blob([b],{type:"application/json"});if(r.append(`${d}.inputs`,v),c.outputs){const w=Zt(c.outputs),E=new Blob([w],{type:"application/json"});r.append(`${d}.outputs`,E)}if(c.attachments)for(const[w,E]of Object.entries(c.attachments)){let O,x;Array.isArray(E)?[O,x]=E:(O=E.mimeType,x=E.data);const k=new Blob([x],{type:`${O}; length=${x.byteLength}`});r.append(`${d}.attachment.${w}`,k)}}return await(await this.caller.call(ue(),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,u]=Rn(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const o={};if((n==null?void 0:n.description)!==void 0&&(o.description=n.description),(n==null?void 0:n.readme)!==void 0&&(o.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(o.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(o.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(o.is_archived=n.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const c=await this.caller.call(ue(),`${this.apiUrl}/repos/${r}/${u}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await pe(c,"update prompt"),c.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,u]=Rn(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(ue(),`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,n){const[r,u,o]=Rn(e),c=await this.caller.call(ue(),`${this.apiUrl}/commits/${r}/${u}/${o}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await pe(c,"pull prompt commit");const d=await c.json();return{owner:r,repo:u,commit_hash:d.commit_hash,manifest:d.manifest,examples:d.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(u=>u!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:u}=n,[o,c]=this.parseTokenOrUrl(e,r),d=new Is({apiUrl:o,apiKey:"placeholder"}),m=await d.readSharedDataset(c),p=u||m.name;try{if(await this.hasDataset({datasetId:p})){console.log(`Dataset ${p} already exists in your tenant. Skipping.`);return}}catch{}const y=await d.listSharedExamples(c),b=await this.createDataset(p,{description:m.description,dataType:m.data_type||"kv",inputsSchema:m.inputs_schema_definition??void 0,outputsSchema:m.outputs_schema_definition??void 0});try{await this.createExamples({inputs:y.map(v=>v.inputs),outputs:y.flatMap(v=>v.outputs?[v.outputs]:[]),datasetId:b.id})}catch(v){throw console.error(`An error occurred while creating dataset ${p}. You should delete it manually.`),v}}parseTokenOrUrl(e,n,r=2,u="dataset"){try{return be(e),[n,e]}catch{}try{const c=new URL(e).pathname.split("/").filter(d=>d!=="");if(c.length>=r){const d=c[c.length-r];return[n,d]}else throw new Error(`Invalid public ${u} URL: ${e}`)}catch{throw new Error(`Invalid public ${u} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}const tv="0.3.11";var Ss={};let Qa;const MS=()=>typeof window<"u"&&typeof window.document<"u",US=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",PS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),av=()=>typeof Deno<"u",zS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!av(),IS=()=>Qa||(MS()?Qa="browser":zS()?Qa="node":US()?Qa="webworker":PS()?Qa="jsdom":av()?Qa="deno":Qa="other",Qa);let dd;function nv(){if(dd===void 0){const s=IS(),e=qS();dd={library:"langsmith",runtime:s,sdk:"langsmith-js",sdk_version:tv,...e}}return dd}function BS(){const s=HS()||{},e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,u]of Object.entries(s))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof u=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=u:e[r]=u);return e}function HS(){try{return typeof process<"u"&&Ss?Object.entries(Ss).reduce((s,[e,n])=>(s[e]=String(n),s),{}):void 0}catch{return}}function fr(s){try{return typeof process<"u"?Ss==null?void 0:Ss[s]:void 0}catch{return}}function Cn(s){return fr(`LANGSMITH_${s}`)||fr(`LANGCHAIN_${s}`)}let hd;function qS(){if(hd!==void 0)return hd;const s=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of s){const r=fr(n);r!==void 0&&(e[n]=r)}return hd=e,e}const ZS=s=>!!["TRACING_V2","TRACING"].find(n=>Cn(n)==="true"),md=Symbol.for("lc:context_variables");function GS(s){return s.replace(/[-:.]/g,"")}function VS(s,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return GS(`${new Date(s).toISOString().slice(0,-1)}${r}Z`)+e}class kl{constructor(e,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n}static fromHeader(e){const n=e.split(",");let r={},u=[];for(const o of n){const[c,d]=o.split("="),m=decodeURIComponent(d);c==="langsmith-metadata"?r=JSON.parse(m):c==="langsmith-tags"&&(u=m.split(","))}return new kl(r,u)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class Gt{constructor(e){var d;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),rv(e)){Object.assign(this,{...e});return}const n=Gt.getDefaultConfig(),{metadata:r,...u}=e,o=u.client??Gt.getSharedClient(),c={...r,...(d=u==null?void 0:u.extra)==null?void 0:d.metadata};if(u.extra={...u.extra,metadata:c},Object.assign(this,{...n,...u,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const m=VS(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+m:this.dotted_order=m}}static getDefaultConfig(){return{id:Dt(),run_type:"chain",project_name:Cn("PROJECT")??fr("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:fr("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:fr("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Gt.sharedClient||(Gt.sharedClient=new Is),Gt.sharedClient}createChild(e){var m,p,y,b,v,w;const n=this.child_execution_order+1,r=new Gt({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});md in this&&(r[md]=this[md]);const u=Symbol.for("lc:child_config"),o=((m=e.extra)==null?void 0:m[u])??this.extra[u];if(XS(o)){const E={...o},O=YS(E.callbacks)?(y=(p=E.callbacks).copy)==null?void 0:y.call(p):void 0;O&&(Object.assign(O,{_parentRunId:r.id}),(w=(v=(b=O.handlers)==null?void 0:b.find(iv))==null?void 0:v.updateFromRunTree)==null||w.call(v,r),E.callbacks=O),r.extra[u]=E}const c=new Set;let d=this;for(;d!=null&&!c.has(d.id);)c.add(d.id),d.child_execution_order=Math.max(d.child_execution_order,n),d=d.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now(),u){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,u&&Object.keys(u).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...u}}:{metadata:u})}_convertToCreate(e,n,r=!0){var m;const u=e.extra??{};if(u.runtime||(u.runtime={}),n)for(const[p,y]of Object.entries(n))u.runtime[p]||(u.runtime[p]=y);let o,c;return r?(c=(m=e.parent_run)==null?void 0:m.id,o=[]):(o=e.child_runs.map(p=>this._convertToCreate(p,n,r)),c=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:u,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:c,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const n=nv(),r=await this._convertToCreate(this,n,!0);if(await this.client.createRun(r),!e){Qb("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const u of this.child_runs)await u.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var e;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var p,y,b,v;const r=e==null?void 0:e.callbacks;let u,o,c,d=ZS();if(r){const w=((p=r==null?void 0:r.getParentRunId)==null?void 0:p.call(r))??"",E=(y=r==null?void 0:r.handlers)==null?void 0:y.find(O=>(O==null?void 0:O.name)=="langchain_tracer");u=(b=E==null?void 0:E.getRun)==null?void 0:b.call(E,w),o=E==null?void 0:E.projectName,c=E==null?void 0:E.client,d=d||!!E}return u?new Gt({name:u.name,id:u.id,trace_id:u.trace_id,dotted_order:u.dotted_order,client:c,tracingEnabled:d,project_name:o,tags:[...new Set(((u==null?void 0:u.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(v=u==null?void 0:u.extra)==null?void 0:v.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new Gt({...n,client:c,tracingEnabled:d,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var p;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,u=r["langsmith-trace"];if(!u||typeof u!="string")return;const o=u.trim(),c=o.split(".").map(y=>{const[b,v]=y.split("Z");return{strTime:b,time:Date.parse(b+"Z"),uuid:v}}),d=c[0].uuid,m={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(p=c.at(-1))==null?void 0:p.uuid,trace_id:d,dotted_order:o};if(r.baggage&&typeof r.baggage=="string"){const y=kl.fromHeader(r.baggage);m.metadata=y.metadata,m.tags=y.tags}return new Gt(m)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new kl((r=this.extra)==null?void 0:r.metadata,this.tags).toHeader()};if(e)for(const[u,o]of Object.entries(n))e.set(u,o);return n}}Object.defineProperty(Gt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function rv(s){return s!==void 0&&typeof s.createChild=="function"&&typeof s.postRun=="function"}function iv(s){return typeof s=="object"&&s!=null&&typeof s.name=="string"&&s.name==="langchain_tracer"}function pb(s){return Array.isArray(s)&&s.some(e=>iv(e))}function YS(s){return typeof s=="object"&&s!=null&&Array.isArray(s.handlers)}function XS(s){var e;return s!==void 0&&typeof s.callbacks=="object"&&(pb((e=s.callbacks)==null?void 0:e.handlers)||pb(s.callbacks))}let FS=class{getStore(){}run(e,n){return n()}};const pd=Symbol.for("ls:tracing_async_local_storage"),QS=new FS;let KS=class{getInstance(){return globalThis[pd]??QS}initializeGlobalInstance(e){globalThis[pd]===void 0&&(globalThis[pd]=e)}};const JS=new KS,WS=()=>{const s=JS.getInstance().getStore();if(!rv(s))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return s};function Kd(s){return typeof s=="function"&&"langsmith:traceable"in s}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const e1=Object.prototype.hasOwnProperty;function t1(s,e){return e1.call(s,e)}function a1(s){if(Array.isArray(s)){const n=new Array(s.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(s);let e=[];for(let n in s)t1(s,n)&&e.push(n);return e}function fi(s){switch(typeof s){case"object":return JSON.parse(JSON.stringify(s));case"undefined":return null;default:return s}}function Ld(s){let e=0;const n=s.length;let r;for(;e<n;){if(r=s.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function n1(s){return s.replace(/~1/g,"/").replace(/~0/g,"~")}function $d(s){if(s===void 0)return!0;if(s){if(Array.isArray(s)){for(let n=0,r=s.length;n<r;n++)if($d(s[n]))return!0}else if(typeof s=="object"){const n=a1(s),r=n.length;for(var e=0;e<r;e++)if($d(s[n[e]]))return!0}}return!1}function yb(s,e){const n=[s];for(const r in e){const u=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof u<"u"&&n.push(`${r}: ${u}`)}return n.join(`
`)}class r1 extends Error{constructor(e,n,r,u,o){super(yb(e,{name:n,index:r,operation:u,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=yb(e,{name:n,index:r,operation:u,tree:o})}}const Je=r1,ri={add:function(s,e,n){return s[e]=this.value,{newDocument:n}},remove:function(s,e,n){var r=s[e];return delete s[e],{newDocument:n,removed:r}},replace:function(s,e,n){var r=s[e];return s[e]=this.value,{newDocument:n,removed:r}},move:function(s,e,n){let r=Dd(n,this.path);r&&(r=fi(r));const u=Ts(n,{op:"remove",path:this.from}).removed;return Ts(n,{op:"add",path:this.path,value:u}),{newDocument:n,removed:r}},copy:function(s,e,n){const r=Dd(n,this.from);return Ts(n,{op:"add",path:this.path,value:fi(r)}),{newDocument:n}},test:function(s,e,n){return{newDocument:n,test:$l(s[e],this.value)}},_get:function(s,e,n){return this.value=s[e],{newDocument:n}}};var i1={add:function(s,e,n){return Ld(e)?s.splice(e,0,this.value):s[e]=this.value,{newDocument:n,index:e}},remove:function(s,e,n){var r=s.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(s,e,n){var r=s[e];return s[e]=this.value,{newDocument:n,removed:r}},move:ri.move,copy:ri.copy,test:ri.test,_get:ri._get};function Dd(s,e){if(e=="")return s;var n={op:"_get",path:e};return Ts(s,n),n.value}function Ts(s,e,n=!1,r=!0,u=!0,o=0){if(n&&(typeof n=="function"?n(e,0,s,e.path):Md(e,0)),e.path===""){let c={newDocument:s};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=s,c;if(e.op==="move"||e.op==="copy")return c.newDocument=Dd(s,e.from),e.op==="move"&&(c.removed=s),c;if(e.op==="test"){if(c.test=$l(s,e.value),c.test===!1)throw new Je("Test operation failed","TEST_OPERATION_FAILED",o,e,s);return c.newDocument=s,c}else{if(e.op==="remove")return c.removed=s,c.newDocument=null,c;if(e.op==="_get")return e.value=s,c;if(n)throw new Je("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,s);return c}}else{r||(s=fi(s));const d=(e.path||"").split("/");let m=s,p=1,y=d.length,b,v,w;for(typeof n=="function"?w=n:w=Md;;){if(v=d[p],v&&v.indexOf("~")!=-1&&(v=n1(v)),u&&(v=="__proto__"||v=="prototype"&&p>0&&d[p-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&b===void 0&&(m[v]===void 0?b=d.slice(0,p).join("/"):p==y-1&&(b=e.path),b!==void 0&&w(e,0,s,b)),p++,Array.isArray(m)){if(v==="-")v=m.length;else{if(n&&!Ld(v))throw new Je("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,s);Ld(v)&&(v=~~v)}if(p>=y){if(n&&e.op==="add"&&v>m.length)throw new Je("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,s);const E=i1[e.op].call(e,m,v,s);if(E.test===!1)throw new Je("Test operation failed","TEST_OPERATION_FAILED",o,e,s);return E}}else if(p>=y){const E=ri[e.op].call(e,m,v,s);if(E.test===!1)throw new Je("Test operation failed","TEST_OPERATION_FAILED",o,e,s);return E}if(m=m[v],n&&p<y&&(!m||typeof m!="object"))throw new Je("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,s)}}}function Ll(s,e,n,r=!0,u=!0){if(n&&!Array.isArray(e))throw new Je("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(s=fi(s));const o=new Array(e.length);for(let c=0,d=e.length;c<d;c++)o[c]=Ts(s,e[c],n,!0,u,c),s=o[c].newDocument;return o.newDocument=s,o}function Md(s,e,n,r){if(typeof s!="object"||s===null||Array.isArray(s))throw new Je("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,s,n);if(ri[s.op]){if(typeof s.path!="string")throw new Je("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,s,n);if(s.path.indexOf("/")!==0&&s.path.length>0)throw new Je('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,s,n);if((s.op==="move"||s.op==="copy")&&typeof s.from!="string")throw new Je("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,s,n);if((s.op==="add"||s.op==="replace"||s.op==="test")&&s.value===void 0)throw new Je("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,s,n);if((s.op==="add"||s.op==="replace"||s.op==="test")&&$d(s.value))throw new Je("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,s,n);if(n){if(s.op=="add"){var u=s.path.split("/").length,o=r.split("/").length;if(u!==o+1&&u!==o)throw new Je("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,s,n)}else if(s.op==="replace"||s.op==="remove"||s.op==="_get"){if(s.path!==r)throw new Je("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,s,n)}else if(s.op==="move"||s.op==="copy"){var c={op:"_get",path:s.from,value:void 0},d=s1([c],n);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new Je("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,s,n)}}}else throw new Je("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,s,n)}function s1(s,e,n){try{if(!Array.isArray(s))throw new Je("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Ll(fi(e),fi(s),n||!0);else{n=n||Md;for(var r=0;r<s.length;r++)n(s[r],r,e,void 0)}}catch(u){if(u instanceof Je)return u;throw u}}function $l(s,e){if(s===e)return!0;if(s&&e&&typeof s=="object"&&typeof e=="object"){var n=Array.isArray(s),r=Array.isArray(e),u,o,c;if(n&&r){if(o=s.length,o!=e.length)return!1;for(u=o;u--!==0;)if(!$l(s[u],e[u]))return!1;return!0}if(n!=r)return!1;var d=Object.keys(s);if(o=d.length,o!==Object.keys(e).length)return!1;for(u=o;u--!==0;)if(!e.hasOwnProperty(d[u]))return!1;for(u=o;u--!==0;)if(c=d[u],!$l(s[c],e[c]))return!1;return!0}return s!==s&&e!==e}var yd={};const u1=()=>typeof window<"u"&&typeof window.document<"u",l1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",o1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Jd=()=>typeof Deno<"u",c1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Jd(),f1=()=>{let s;return u1()?s="browser":c1()?s="node":l1()?s="webworker":o1()?s="jsdom":Jd()?s="deno":s="other",s};let gd;async function d1(){return gd===void 0&&(gd={library:"langchain-js",runtime:f1()}),gd}function jn(s){try{return typeof process<"u"?yd==null?void 0:yd[s]:Jd()?Deno==null?void 0:Deno.env.get(s):void 0}catch{return}}class h1{}function m1(s){return"lc_prefer_streaming"in s&&s.lc_prefer_streaming}class Xs extends h1{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Pb(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:jn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return kn.prototype.toJSON.call(this)}toJSONNotImplemented(){return kn.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends Xs{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Dt()}),Object.assign(this,e)}}return new n}}const p1=s=>{const e=s;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function bd(s,e){return s&&!Array.isArray(s)&&typeof s=="object"?s:{[e]:s}}function y1(s){return s.replace(/[-:.]/g,"")}function g1(s,e,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return y1(`${new Date(s).toISOString().slice(0,-1)}${r}Z`)+e}function gs(s){return typeof s._addRunToRunMap=="function"}class Fs extends Xs{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const n=g1(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const u=this.runMap.get(r.parent_run_id);u&&(this._addChildRun(u,r),u.child_execution_order=Math.max(u.child_execution_order,r.child_execution_order),r.trace_id=u.trace_id,u.dotted_order!==void 0&&(r.dotted_order=[u.dotted_order,n].join(".")))}else r.trace_id=r.id,r.dotted_order=n;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,u,o,c,d,m){const p=this._getExecutionOrder(u),y=Date.now(),b=d?{...o,metadata:d}:o,v={id:r,name:m??e.id[e.id.length-1],parent_run_id:u,start_time:y,serialized:e,events:[{name:"start",time:new Date(y).toISOString()}],inputs:{prompts:n},execution_order:p,child_runs:[],child_execution_order:p,run_type:"llm",extra:b??{},tags:c||[]};return this._addRunToRunMap(v)}async handleLLMStart(e,n,r,u,o,c,d,m){var y,b;const p=this.runMap.get(r)??this._createRunForLLMStart(e,n,r,u,o,c,d,m);return await((y=this.onRunCreate)==null?void 0:y.call(this,p)),await((b=this.onLLMStart)==null?void 0:b.call(this,p)),p}_createRunForChatModelStart(e,n,r,u,o,c,d,m){const p=this._getExecutionOrder(u),y=Date.now(),b=d?{...o,metadata:d}:o,v={id:r,name:m??e.id[e.id.length-1],parent_run_id:u,start_time:y,serialized:e,events:[{name:"start",time:new Date(y).toISOString()}],inputs:{messages:n},execution_order:p,child_runs:[],child_execution_order:p,run_type:"llm",extra:b??{},tags:c||[]};return this._addRunToRunMap(v)}async handleChatModelStart(e,n,r,u,o,c,d,m){var y,b;const p=this.runMap.get(r)??this._createRunForChatModelStart(e,n,r,u,o,c,d,m);return await((y=this.onRunCreate)==null?void 0:y.call(this,p)),await((b=this.onLLMStart)==null?void 0:b.call(this,p)),p}async handleLLMEnd(e,n,r,u,o){var d;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.outputs=e,c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleLLMError(e,n,r,u,o){var d;const c=this.runMap.get(n);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((d=this.onLLMError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForChainStart(e,n,r,u,o,c,d,m){const p=this._getExecutionOrder(u),y=Date.now(),b={id:r,name:m??e.id[e.id.length-1],parent_run_id:u,start_time:y,serialized:e,events:[{name:"start",time:new Date(y).toISOString()}],inputs:n,execution_order:p,child_execution_order:p,run_type:d??"chain",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(b)}async handleChainStart(e,n,r,u,o,c,d,m){var y,b;const p=this.runMap.get(r)??this._createRunForChainStart(e,n,r,u,o,c,d,m);return await((y=this.onRunCreate)==null?void 0:y.call(this,p)),await((b=this.onChainStart)==null?void 0:b.call(this,p)),p}async handleChainEnd(e,n,r,u,o){var d;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.outputs=bd(e,"output"),c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=bd(o.inputs,"input")),await((d=this.onChainEnd)==null?void 0:d.call(this,c)),await this._endTrace(c),c}async handleChainError(e,n,r,u,o){var d;const c=this.runMap.get(n);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(e),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=bd(o.inputs,"input")),await((d=this.onChainError)==null?void 0:d.call(this,c)),await this._endTrace(c),c}_createRunForToolStart(e,n,r,u,o,c,d){const m=this._getExecutionOrder(u),p=Date.now(),y={id:r,name:d??e.id[e.id.length-1],parent_run_id:u,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{input:n},execution_order:m,child_execution_order:m,run_type:"tool",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(y)}async handleToolStart(e,n,r,u,o,c,d){var p,y;const m=this.runMap.get(r)??this._createRunForToolStart(e,n,r,u,o,c,d);return await((p=this.onRunCreate)==null?void 0:p.call(this,m)),await((y=this.onToolStart)==null?void 0:y.call(this,m)),m}async handleToolEnd(e,n){var u;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((u=this.onToolEnd)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var u;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((u=this.onToolError)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var o;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const u=r;u.actions=u.actions||[],u.actions.push(e),u.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,r))}async handleAgentEnd(e,n){var u;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((u=this.onAgentEnd)==null?void 0:u.call(this,r)))}_createRunForRetrieverStart(e,n,r,u,o,c,d){const m=this._getExecutionOrder(u),p=Date.now(),y={id:r,name:d??e.id[e.id.length-1],parent_run_id:u,start_time:p,serialized:e,events:[{name:"start",time:new Date(p).toISOString()}],inputs:{query:n},execution_order:m,child_execution_order:m,run_type:"retriever",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(y)}async handleRetrieverStart(e,n,r,u,o,c,d){var p,y;const m=this.runMap.get(r)??this._createRunForRetrieverStart(e,n,r,u,o,c,d);return await((p=this.onRunCreate)==null?void 0:p.call(this,m)),await((y=this.onRetrieverStart)==null?void 0:y.call(this,m)),m}async handleRetrieverEnd(e,n){var u;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((u=this.onRetrieverEnd)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var u;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((u=this.onRetrieverError)==null?void 0:u.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var u;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((u=this.onText)==null?void 0:u.call(this,r)))}async handleLLMNewToken(e,n,r,u,o,c){var m;const d=this.runMap.get(r);if(!d||(d==null?void 0:d.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return d.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:c==null?void 0:c.chunk}}),await((m=this.onLLMNewToken)==null?void 0:m.call(this,d,e,{chunk:c==null?void 0:c.chunk})),d}}var _l={exports:{}};_l.exports;var gb;function b1(){return gb||(gb=1,function(s){const n=(o=0)=>c=>`\x1B[${38+o};5;${c}m`,r=(o=0)=>(c,d,m)=>`\x1B[${38+o};2;${c};${d};${m}m`;function u(){const o=new Map,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};c.color.gray=c.color.blackBright,c.bgColor.bgGray=c.bgColor.bgBlackBright,c.color.grey=c.color.blackBright,c.bgColor.bgGrey=c.bgColor.bgBlackBright;for(const[d,m]of Object.entries(c)){for(const[p,y]of Object.entries(m))c[p]={open:`\x1B[${y[0]}m`,close:`\x1B[${y[1]}m`},m[p]=c[p],o.set(y[0],y[1]);Object.defineProperty(c,d,{value:m,enumerable:!1})}return Object.defineProperty(c,"codes",{value:o,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",c.color.ansi256=n(),c.color.ansi16m=r(),c.bgColor.ansi256=n(10),c.bgColor.ansi16m=r(10),Object.defineProperties(c,{rgbToAnsi256:{value:(d,m,p)=>d===m&&m===p?d<8?16:d>248?231:Math.round((d-8)/247*24)+232:16+36*Math.round(d/255*5)+6*Math.round(m/255*5)+Math.round(p/255*5),enumerable:!1},hexToRgb:{value:d=>{const m=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(d.toString(16));if(!m)return[0,0,0];let{colorString:p}=m.groups;p.length===3&&(p=p.split("").map(b=>b+b).join(""));const y=Number.parseInt(p,16);return[y>>16&255,y>>8&255,y&255]},enumerable:!1},hexToAnsi256:{value:d=>c.rgbToAnsi256(...c.hexToRgb(d)),enumerable:!1}}),c}Object.defineProperty(s,"exports",{enumerable:!0,get:u})}(_l)),_l.exports}var v1=b1();const sv=qs(v1);function Ot(s,e){return`${s.open}${e}${s.close}`}function ua(s,e){try{return JSON.stringify(s,null,2)}catch{return e}}function bb(s){return typeof s=="string"?s.trim():s==null?s:ua(s,s.toString())}function xn(s){if(!s.end_time)return"";const e=s.end_time-s.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:$t}=sv;class vb extends Fs{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const u=this.runMap.get(r.parent_run_id);if(u)n.push(u),r=u;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((u,o,c)=>{const d=`${u.execution_order}:${u.run_type}:${u.name}`;return o===c.length-1?Ot(sv.bold,d):d}).join(" > ");return Ot($t.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.green,"[chain/start]")} [${n}] Entering Chain run with input: ${ua(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[chain/end]")} [${n}] [${xn(e)}] Exiting Chain run with output: ${ua(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[chain/error]")} [${n}] [${xn(e)}] Chain run errored with error: ${ua(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(u=>u.trim())}:e.inputs;console.log(`${Ot($t.green,"[llm/start]")} [${n}] Entering LLM run with input: ${ua(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[llm/end]")} [${n}] [${xn(e)}] Exiting LLM run with output: ${ua(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[llm/error]")} [${n}] [${xn(e)}] LLM run errored with error: ${ua(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.green,"[tool/start]")} [${n}] Entering Tool run with input: "${bb(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[tool/end]")} [${n}] [${xn(e)}] Exiting Tool run with output: "${bb((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[tool/error]")} [${n}] [${xn(e)}] Tool run errored with error: ${ua(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${ua(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.cyan,"[retriever/end]")} [${n}] [${xn(e)}] Exiting Retriever run with output: ${ua(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Ot($t.red,"[retriever/error]")} [${n}] [${xn(e)}] Retriever run errored with error: ${ua(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Ot($t.blue,"[agent/action]")} [${r}] Agent selected action: ${ua(n.actions[n.actions.length-1],"[action]")}`)}}let vd;const _1=()=>{if(vd===void 0){const s=jn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};vd=new Is(s)}return vd};class Os extends Fs{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:u}=e;this.projectName=r??jn("LANGCHAIN_PROJECT")??jn("LANGCHAIN_SESSION"),this.exampleId=n,this.client=u??_1();const o=Os.getTraceableRunTree();o&&this.updateFromRunTree(o)}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await d1()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async onRunCreate(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async onRunUpdate(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra};await this.client.updateRun(e.id,n)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const u=[n];for(;u.length>0;){const o=u.shift();!o||r.has(o.id)||(r.add(o.id),this.runMap.set(o.id,o),o.child_runs&&u.push(...o.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const n={},r=[];for(const[u,o]of this.runMap){const c=new Gt({...o,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[u]=c,r.push([u,o.dotted_order])}r.sort((u,o)=>!u[1]||!o[1]?0:u[1].localeCompare(o[1]));for(const[u]of r){const o=this.runMap.get(u),c=n[u];if(!(!o||!c)&&o.parent_run_id){const d=n[o.parent_run_id];d&&(d.child_runs.push(c),c.parent_run=d)}}return n[e]}static getTraceableRunTree(){try{return WS()}catch{return}}}const uv=Symbol.for("ls:tracing_async_local_storage"),wl=Symbol.for("lc:context_variables"),w1=s=>{globalThis[uv]=s},Bs=()=>globalThis[uv];let As;function E1(){const s="default"in Wa?Wa.default:Wa;return new s({autoStart:!0,concurrency:1})}function S1(){return typeof As>"u"&&(As=E1()),As}async function at(s,e){if(e===!0){const n=Bs();n!==void 0?await n.run(void 0,async()=>s()):await s()}else As=S1(),As.add(async()=>{const n=Bs();n!==void 0?await n.run(void 0,async()=>s()):await s()})}const T1=s=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>jn(n)==="true");function lv(s){var r;const e=Bs();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[wl])==null?void 0:r[s]}const O1=Symbol("lc:configure_hooks"),A1=()=>lv(O1)||[];class R1{setHandler(e){return this.setHandlers([e])}}class Gl{constructor(e,n,r,u,o,c,d,m){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:m})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(u){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${u}`),n.raiseError)throw u}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,n,this.runId,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class x1 extends Gl{getChild(e){const n=new Mt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(u){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw u}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(u){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${u}`),n.raiseError)throw e}},n.awaitHandlers)))}}class _b extends Gl{async handleLLMNewToken(e,n,r,u,o,c){await Promise.all(this.handlers.map(d=>at(async()=>{var m;if(!d.ignoreLLM)try{await((m=d.handleLLMNewToken)==null?void 0:m.call(d,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,c))}catch(p){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleLLMNewToken: ${p}`),d.raiseError)throw p}},d.awaitHandlers)))}async handleLLMError(e,n,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleLLMEnd(e,n,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}}class N1 extends Gl{getChild(e){const n=new Mt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainError)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainError: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleChainEnd(e,n,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreChain)try{await((d=c.handleChainEnd)==null?void 0:d.call(c,e,this.runId,this._parentRunId,this.tags,o))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainEnd: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(u){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${u}`),n.raiseError)throw u}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(u){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${u}`),n.raiseError)throw u}},n.awaitHandlers)))}}class C1 extends Gl{getChild(e){const n=new Mt(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(u){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${u}`),n.raiseError)throw u}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>at(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(u){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${u}`),n.raiseError)throw u}},n.awaitHandlers)))}}class Mt extends R1{constructor(e,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,u=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(n.map(async(p,y)=>{const b=y===0&&r?r:Dt();return await Promise.all(this.handlers.map(v=>{if(!v.ignoreLLM)return gs(v)&&v._createRunForLLMStart(e,[p],b,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w;try{await((w=v.handleLLMStart)==null?void 0:w.call(v,e,[p],b,this._parentRunId,o,this.tags,this.metadata,m))}catch(E){if((v.raiseError?console.error:console.warn)(`Error in handler ${v.constructor.name}, handleLLMStart: ${E}`),v.raiseError)throw E}},v.awaitHandlers)})),new _b(b,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,u=void 0,o=void 0,c=void 0,d=void 0,m=void 0){return Promise.all(n.map(async(p,y)=>{const b=y===0&&r?r:Dt();return await Promise.all(this.handlers.map(v=>{if(!v.ignoreLLM)return gs(v)&&v._createRunForChatModelStart(e,[p],b,this._parentRunId,o,this.tags,this.metadata,m),at(async()=>{var w,E;try{if(v.handleChatModelStart)await((w=v.handleChatModelStart)==null?void 0:w.call(v,e,[p],b,this._parentRunId,o,this.tags,this.metadata,m));else if(v.handleLLMStart){const O=qd(p);await((E=v.handleLLMStart)==null?void 0:E.call(v,e,[O],b,this._parentRunId,o,this.tags,this.metadata,m))}}catch(O){if((v.raiseError?console.error:console.warn)(`Error in handler ${v.constructor.name}, handleLLMStart: ${O}`),v.raiseError)throw O}},v.awaitHandlers)})),new _b(b,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=Dt(),u=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreChain)return gs(m)&&m._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,u,d),at(async()=>{var p;try{await((p=m.handleChainStart)==null?void 0:p.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,u,d))}catch(y){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleChainStart: ${y}`),m.raiseError)throw y}},m.awaitHandlers)})),new N1(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=Dt(),u=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreAgent)return gs(m)&&m._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var p;try{await((p=m.handleToolStart)==null?void 0:p.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,d))}catch(y){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleToolStart: ${y}`),m.raiseError)throw y}},m.awaitHandlers)})),new C1(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=Dt(),u=void 0,o=void 0,c=void 0,d=void 0){return await Promise.all(this.handlers.map(m=>{if(!m.ignoreRetriever)return gs(m)&&m._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,d),at(async()=>{var p;try{await((p=m.handleRetrieverStart)==null?void 0:p.call(m,e,n,r,this._parentRunId,this.tags,this.metadata,d))}catch(y){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleRetrieverStart: ${y}`),m.raiseError)throw y}},m.awaitHandlers)})),new x1(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,u,o){await Promise.all(this.handlers.map(c=>at(async()=>{var d;if(!c.ignoreCustomEvent)try{await((d=c.handleCustomEvent)==null?void 0:d.call(c,e,n,r,this.tags,this.metadata))}catch(m){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${m}`),c.raiseError)throw m}},c.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new Mt(this._parentRunId);for(const u of this.handlers){const o=this.inheritableHandlers.includes(u);r.addHandler(u,o)}for(const u of this.tags){const o=this.inheritableTags.includes(u);r.addTags([u],o)}for(const u of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(u);r.addMetadata({[u]:this.metadata[u]},o)}for(const u of e)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===u.name)||r.addHandler(u,n);return r}static fromHandlers(e){class n extends Xs{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Dt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,u,o,c,d){return this._configureSync(e,n,r,u,o,c,d)}static _configureSync(e,n,r,u,o,c,d){var v,w;let m;(e||n)&&(Array.isArray(e)||!e?(m=new Mt,m.setHandlers((e==null?void 0:e.map(Dl))??[],!0)):m=e,m=m.copy(Array.isArray(n)?n.map(Dl):n==null?void 0:n.handlers,!1));const p=jn("LANGCHAIN_VERBOSE")==="true"||(d==null?void 0:d.verbose),y=((v=Os.getTraceableRunTree())==null?void 0:v.tracingEnabled)||T1(),b=y||(jn("LANGCHAIN_TRACING")??!1);if(p||b){if(m||(m=new Mt),p&&!m.handlers.some(E=>E.name===vb.prototype.name)){const E=new vb;m.addHandler(E,!0)}if(b&&!m.handlers.some(E=>E.name==="langchain_tracer")&&y){const E=new Os;m.addHandler(E,!0),m._parentRunId=((w=Os.getTraceableRunTree())==null?void 0:w.id)??m._parentRunId}}for(const{contextVar:E,inheritable:O=!0,handlerClass:x,envVar:k}of A1()){const z=k&&jn(k)==="true"&&x;let L;const ae=E!==void 0?lv(E):void 0;ae&&p1(ae)?L=ae:z&&(L=new x({})),L!==void 0&&(m||(m=new Mt),m.handlers.some(I=>I.name===L.name)||m.addHandler(L,O))}return(r||u)&&m&&(m.addTags(r??[]),m.addTags(u??[],!1)),(o||c)&&m&&(m.addMetadata(o??{}),m.addMetadata(c??{},!1)),m}}function Dl(s){return"name"in s?s:Xs.fromMethods(s)}class j1{getStore(){}run(e,n){return n()}enterWith(e){}}const k1=new j1,wb=Symbol.for("lc:child_config");class L1{getInstance(){return Bs()??k1}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[wb]}runWithConfig(e,n,r){var y;const u=Mt._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),o=this.getInstance(),c=o.getStore(),d=u==null?void 0:u.getParentRunId(),m=(y=u==null?void 0:u.handlers)==null?void 0:y.find(b=>(b==null?void 0:b.name)==="langchain_tracer");let p;return m&&d?p=m.convertToRunTree(d):r||(p=new Gt({name:"<runnable_lambda>",tracingEnabled:!1})),p&&(p.extra={...p.extra,[wb]:e}),c!==void 0&&c[wl]!==void 0&&(p[wl]=c[wl]),o.run(p,n)}initializeGlobalInstance(e){Bs()===void 0&&w1(e)}}const Un=new L1,_d=25;async function ba(s){return Mt._configureSync(s==null?void 0:s.callbacks,void 0,s==null?void 0:s.tags,void 0,s==null?void 0:s.metadata)}function Eb(...s){const e={};for(const n of s.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const u=e[r]??[];e[r]=[...new Set(u.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const u=e.callbacks,o=n.callbacks;if(Array.isArray(o))if(!u)e.callbacks=o;else if(Array.isArray(u))e.callbacks=u.concat(o);else{const c=u.copy();for(const d of o)c.addHandler(Dl(d),!0);e.callbacks=c}else if(o)if(!u)e.callbacks=o;else if(Array.isArray(u)){const c=o.copy();for(const d of u)c.addHandler(Dl(d),!0);e.callbacks=c}else e.callbacks=new Mt(o._parentRunId,{handlers:u.handlers.concat(o.handlers),inheritableHandlers:u.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(u.tags.concat(o.tags))),inheritableTags:Array.from(new Set(u.inheritableTags.concat(o.inheritableTags))),metadata:{...u.metadata,...o.metadata}})}else{const u=r;e[u]=n[u]??e[u]}return e}const $1=new Set(["string","number","boolean"]);function Me(s){var r;const e=Un.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:u,runName:o,...c}=e;n=Object.entries(c).reduce((d,[m,p])=>(p!==void 0&&(d[m]=p),d),n)}if(s&&(n=Object.entries(s).reduce((u,[o,c])=>(c!==void 0&&(u[o]=c),u),n)),n!=null&&n.configurable)for(const u of Object.keys(n.configurable))$1.has(typeof n.configurable[u])&&!((r=n.metadata)!=null&&r[u])&&(n.metadata||(n.metadata={}),n.metadata[u]=n.configurable[u]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const u=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,u])):n.signal=u,delete n.timeout}return n}function wt(s={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:u,configurable:o,runId:c}={}){const d=Me(s);return e!==void 0&&(delete d.runName,d.callbacks=e),r!==void 0&&(d.recursionLimit=r),n!==void 0&&(d.maxConcurrency=n),u!==void 0&&(d.runName=u),o!==void 0&&(d.configurable={...d.configurable,...o}),c!==void 0&&delete d.runId,d}function di(s){return s?{configurable:s.configurable,recursionLimit:s.recursionLimit,callbacks:s.callbacks,tags:s.tags,metadata:s.metadata,maxConcurrency:s.maxConcurrency,timeout:s.timeout,signal:s.signal}:void 0}async function Pn(s,e){if(e===void 0)return s;let n;return Promise.race([s.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,u)=>{n=()=>{u(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&u(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class Yt extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new Yt({start(r){return u();function u(){return n.read().then(({done:o,value:c})=>{if(o){r.close();return}return r.enqueue(c),u()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new Yt({async pull(n){const{value:r,done:u}=await e.next();u&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function ov(s,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(u){for(;;)if(u.length===0){const o=await s.next();for(const c of n)c.push(o)}else{if(u[0].done)return;yield u.shift().value}})}function Na(s,e){if(Array.isArray(s)&&Array.isArray(e))return s.concat(e);if(typeof s=="string"&&typeof e=="string")return s+e;if(typeof s=="number"&&typeof e=="number")return s+e;if("concat"in s&&typeof s.concat=="function")return s.concat(e);if(typeof s=="object"&&typeof e=="object"){const n={...s};for(const[r,u]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=Na(n[r],u):n[r]=u;return n}else throw new Error(`Cannot concat ${typeof s} and ${typeof e}`)}class mi{constructor(e){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((r,u)=>{Un.runWithConfig(di(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,u):this.firstResult.then(o=>r(void 0),u)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?Un.runWithConfig(di(this.config),this.signal?async()=>Pn(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function D1(s,e,n,r,...u){const o=new mi({generator:e,startSetup:n,signal:r}),c=await o.setup;return{output:s(o,c,...u),setup:c}}class Nn{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const n=this.ops.concat(e.ops),r=Ll({},n);return new Hs({ops:n,state:r[r.length-1].newDocument})}}class Hs extends Nn{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=Ll(this.state,e.ops);return new Hs({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=Ll({},e.ops);return new Hs({ops:e.ops,state:n[n.length-1].newDocument})}}const M1=s=>s.name==="log_stream_tracer";async function Sb(s,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=s;if(["retriever","llm","prompt"].includes(s.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function Tb(s,e){const{outputs:n}=s;return e==="original"||["retriever","llm","prompt"].includes(s.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function U1(s){return s!==void 0&&s.message!==void 0}class Ob extends Fs{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Yt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(u=>{var o;return(o=this.includeTags)==null?void 0:o.includes(u)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(u=>{var o;return!((o=this.excludeTags)!=null&&o.includes(u))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const u=this.keyMapByRunId[e];u&&await this.writer.write(new Nn({ops:[{op:"add",path:`/logs/${u}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var u;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Nn({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await Sb(e,this._schemaFormat)),await this.writer.write(new Nn({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await Sb(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await Tb(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const u=new Nn({ops:r});await this.writer.write(u)}finally{if(e.id===this.rootId){const n=new Nn({ops:[{op:"replace",path:"/final_output",value:await Tb(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const u=this.keyMapByRunId[e.id];if(u===void 0)return;const o=e.inputs.messages!==void 0;let c;o?U1(r==null?void 0:r.chunk)?c=r==null?void 0:r.chunk:c=new Pl({id:`run-${e.id}`,content:n}):c=n;const d=new Nn({ops:[{op:"add",path:`/logs/${u}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${u}/streamed_output/-`,value:c}]});await this.writer.write(d)}}const Ab="__run";class yr{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new yr({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}function bl({name:s,serialized:e}){return s!==void 0?s:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const P1=s=>s.name==="event_stream_tracer";class z1 extends Fs{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Yt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(u=>{var o;return(o=this.includeTags)==null?void 0:o.includes(u)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(u=>{var o;return!((o=this.excludeTags)!=null&&o.includes(u))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const u=this.runInfoMap.get(e);if(u===void 0){yield r.value;return}function o(d,m){return d==="llm"&&typeof m=="string"?new yr({text:m}):m}let c=this.tappedPromises.get(e);if(c===void 0){let d;c=new Promise(m=>{d=m}),this.tappedPromises.set(e,c);try{const m={event:`on_${u.runType}_stream`,run_id:e,name:u.name,tags:u.tags,metadata:u.metadata,data:{}};await this.send({...m,data:{chunk:o(u.runType,r.value)}},u),yield r.value;for await(const p of n)u.runType!=="tool"&&u.runType!=="retriever"&&await this.send({...m,data:{chunk:o(u.runType,p)}},u),yield p}finally{d()}}else{yield r.value;for await(const d of n)yield d}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var c,d;const n=bl(e),r=e.inputs.messages!==void 0?"chat_model":"llm",u={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,u);const o=`on_${r}_start`;await this.send({event:o,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},u)}async onLLMNewToken(e,n,r){const u=this.runInfoMap.get(e.id);let o,c;if(u===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(u.runType==="chat_model")c="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?o=new Pl({content:n,id:`run-${e.id}`}):o=r.chunk.message;else if(u.runType==="llm")c="on_llm_stream",(r==null?void 0:r.chunk)===void 0?o=new yr({text:n}):o=r.chunk;else throw new Error(`Unexpected run type ${u.runType}`);await this.send({event:c,data:{chunk:o},run_id:e.id,name:u.name,tags:u.tags,metadata:u.metadata},u)}}async onLLMEnd(e){var c,d,m;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const u=(c=e.outputs)==null?void 0:c.generations;let o;if(n.runType==="chat_model"){for(const p of u??[]){if(o!==void 0)break;o=(d=p[0])==null?void 0:d.message}r="on_chat_model_end"}else if(n.runType==="llm")o={generations:u==null?void 0:u.map(p=>p.map(y=>({text:y.text,generationInfo:y.generationInfo}))),llmOutput:((m=e.outputs)==null?void 0:m.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:o,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var c,d;const n=bl(e),r=e.run_type??"chain",u={tags:e.tags??[],metadata:((c=e.extra)==null?void 0:c.metadata)??{},name:n,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},u.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,u.inputs=e.inputs.input):(o.input=e.inputs,u.inputs=e.inputs),this.runInfoMap.set(e.id,u),await this.send({event:`on_${r}_start`,data:o,name:n,tags:e.tags??[],run_id:e.id,metadata:((d=e.extra)==null?void 0:d.metadata)??{}},u)}async onChainEnd(e){var d;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,u=e.inputs??n.inputs??{},c={output:((d=e.outputs)==null?void 0:d.output)??e.outputs,input:u};u.input&&Object.keys(u).length===1&&(c.input=u.input,n.inputs=u.input),await this.sendEndEvent({event:r,data:c,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var u,o;const n=bl(e),r={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},r)}async onToolEnd(e){var u;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((u=e.outputs)==null?void 0:u.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var o,c;const n=bl(e),u={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,u),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},u)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const u=this.runInfoMap.get(r);if(u===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:u.tags,metadata:u.metadata,data:n},u)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const I1=[400,401,402,403,404,405,406,407,409],B1=s=>{var n,r;if(s.message.startsWith("Cancel")||s.message.startsWith("AbortError")||s.name==="AbortError"||(s==null?void 0:s.code)==="ECONNABORTED")throw s;const e=((n=s==null?void 0:s.response)==null?void 0:n.status)??(s==null?void 0:s.status);if(e&&I1.includes(+e))throw s;if(((r=s==null?void 0:s.error)==null?void 0:r.code)==="insufficient_quota"){const u=new Error(s==null?void 0:s.message);throw u.name="InsufficientQuotaError",u}};class Wd{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??B1;const n="default"in Wa?Wa.default:Wa;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>Cl(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((u,o)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class cv extends Fs{constructor({config:e,onStart:n,onEnd:r,onError:u}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=u}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function eh(s){return s?s.lc_runnable:!1}class H1{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const u=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||u.some(o=>{var c;return(c=this.includeTags)==null?void 0:c.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&u.every(o=>{var c;return!((c=this.excludeTags)!=null&&c.includes(o))})),r}}const q1=Symbol("Let zodToJsonSchema decide on which parser to use"),Z1={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},G1=s=>({...Z1,...s}),V1=s=>{const e=G1(s),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,u])=>[u._def,{def:u._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function fv(s,e,n,r){r!=null&&r.errorMessages&&n&&(s.errorMessage={...s.errorMessage,[e]:n})}function ke(s,e,n,r,u){s[e]=n,fv(s,e,r,u)}function Y1(){return{}}function X1(s,e){var r,u,o;const n={type:"array"};return(r=s.type)!=null&&r._def&&((o=(u=s.type)==null?void 0:u._def)==null?void 0:o.typeName)!==Y.ZodAny&&(n.items=je(s.type._def,{...e,currentPath:[...e.currentPath,"items"]})),s.minLength&&ke(n,"minItems",s.minLength.value,s.minLength.message,e),s.maxLength&&ke(n,"maxItems",s.maxLength.value,s.maxLength.message,e),s.exactLength&&(ke(n,"minItems",s.exactLength.value,s.exactLength.message,e),ke(n,"maxItems",s.exactLength.value,s.exactLength.message,e)),n}function F1(s,e){const n={type:"integer",format:"int64"};if(!s.checks)return n;for(const r of s.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?ke(n,"minimum",r.value,r.message,e):ke(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ke(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ke(n,"maximum",r.value,r.message,e):ke(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ke(n,"maximum",r.value,r.message,e));break;case"multipleOf":ke(n,"multipleOf",r.value,r.message,e);break}return n}function Q1(){return{type:"boolean"}}function dv(s,e){return je(s.type._def,e)}const K1=(s,e)=>je(s.innerType._def,e);function hv(s,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((u,o)=>hv(s,e,u))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return J1(s,e)}}const J1=(s,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of s.checks)switch(r.kind){case"min":ke(n,"minimum",r.value,r.message,e);break;case"max":ke(n,"maximum",r.value,r.message,e);break}return n};function W1(s,e){return{...je(s.innerType._def,e),default:s.defaultValue()}}function eT(s,e){return e.effectStrategy==="input"?je(s.schema._def,e):{}}function tT(s){return{type:"string",enum:Array.from(s.values)}}const aT=s=>"type"in s&&s.type==="string"?!1:"allOf"in s;function nT(s,e){const n=[je(s.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),je(s.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const u=[];return n.forEach(o=>{if(aT(o))u.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:d,...m}=o;c=m}else r=void 0;u.push(c)}}),u.length?{allOf:u,...r}:void 0}function rT(s,e){const n=typeof s.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(s.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[s.value]}:{type:n==="bigint"?"integer":n,const:s.value}}let wd;const da={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(wd===void 0&&(wd=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),wd),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function mv(s,e){const n={type:"string"};if(s.checks)for(const r of s.checks)switch(r.kind){case"min":ke(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":ke(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ha(n,"email",r.message,e);break;case"format:idn-email":ha(n,"idn-email",r.message,e);break;case"pattern:zod":At(n,da.email,r.message,e);break}break;case"url":ha(n,"uri",r.message,e);break;case"uuid":ha(n,"uuid",r.message,e);break;case"regex":At(n,r.regex,r.message,e);break;case"cuid":At(n,da.cuid,r.message,e);break;case"cuid2":At(n,da.cuid2,r.message,e);break;case"startsWith":At(n,RegExp(`^${Ed(r.value,e)}`),r.message,e);break;case"endsWith":At(n,RegExp(`${Ed(r.value,e)}$`),r.message,e);break;case"datetime":ha(n,"date-time",r.message,e);break;case"date":ha(n,"date",r.message,e);break;case"time":ha(n,"time",r.message,e);break;case"duration":ha(n,"duration",r.message,e);break;case"length":ke(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),ke(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{At(n,RegExp(Ed(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&ha(n,"ipv4",r.message,e),r.version!=="v4"&&ha(n,"ipv6",r.message,e);break}case"base64url":At(n,da.base64url,r.message,e);break;case"jwt":At(n,da.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&At(n,da.ipv4Cidr,r.message,e),r.version!=="v4"&&At(n,da.ipv6Cidr,r.message,e);break}case"emoji":At(n,da.emoji(),r.message,e);break;case"ulid":{At(n,da.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ha(n,"binary",r.message,e);break}case"contentEncoding:base64":{ke(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{At(n,da.base64,r.message,e);break}}break}case"nanoid":At(n,da.nanoid,r.message,e)}return n}function Ed(s,e){return e.patternStrategy==="escape"?sT(s):s}const iT=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function sT(s){let e="";for(let n=0;n<s.length;n++)iT.has(s[n])||(e+="\\"),e+=s[n];return e}function ha(s,e,n,r){var u;s.format||(u=s.anyOf)!=null&&u.some(o=>o.format)?(s.anyOf||(s.anyOf=[]),s.format&&(s.anyOf.push({format:s.format,...s.errorMessage&&r.errorMessages&&{errorMessage:{format:s.errorMessage.format}}}),delete s.format,s.errorMessage&&(delete s.errorMessage.format,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):ke(s,"format",e,n,r)}function At(s,e,n,r){var u;s.pattern||(u=s.allOf)!=null&&u.some(o=>o.pattern)?(s.allOf||(s.allOf=[]),s.pattern&&(s.allOf.push({pattern:s.pattern,...s.errorMessage&&r.errorMessages&&{errorMessage:{pattern:s.errorMessage.pattern}}}),delete s.pattern,s.errorMessage&&(delete s.errorMessage.pattern,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.allOf.push({pattern:Rb(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):ke(s,"pattern",Rb(e,r),n,r)}function Rb(s,e){var m;if(!e.applyRegexFlags||!s.flags)return s.source;const n={i:s.flags.includes("i"),m:s.flags.includes("m"),s:s.flags.includes("s")},r=n.i?s.source.toLowerCase():s.source;let u="",o=!1,c=!1,d=!1;for(let p=0;p<r.length;p++){if(o){u+=r[p],o=!1;continue}if(n.i){if(c){if(r[p].match(/[a-z]/)){d?(u+=r[p],u+=`${r[p-2]}-${r[p]}`.toUpperCase(),d=!1):r[p+1]==="-"&&((m=r[p+2])!=null&&m.match(/[a-z]/))?(u+=r[p],d=!0):u+=`${r[p]}${r[p].toUpperCase()}`;continue}}else if(r[p].match(/[a-z]/)){u+=`[${r[p]}${r[p].toUpperCase()}]`;continue}}if(n.m){if(r[p]==="^"){u+=`(^|(?<=[\r
]))`;continue}else if(r[p]==="$"){u+=`($|(?=[\r
]))`;continue}}if(n.s&&r[p]==="."){u+=c?`${r[p]}\r
`:`[${r[p]}\r
]`;continue}u+=r[p],r[p]==="\\"?o=!0:c&&r[p]==="]"?c=!1:!c&&r[p]==="["&&(c=!0)}try{new RegExp(u)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),s.source}return u}function pv(s,e){var r,u,o,c,d,m;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=s.keyType)==null?void 0:r._def.typeName)===Y.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((p,y)=>({...p,[y]:je(s.valueType._def,{...e,currentPath:[...e.currentPath,"properties",y]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:je(s.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((u=s.keyType)==null?void 0:u._def.typeName)===Y.ZodString&&((o=s.keyType._def.checks)!=null&&o.length)){const{type:p,...y}=mv(s.keyType._def,e);return{...n,propertyNames:y}}else{if(((c=s.keyType)==null?void 0:c._def.typeName)===Y.ZodEnum)return{...n,propertyNames:{enum:s.keyType._def.values}};if(((d=s.keyType)==null?void 0:d._def.typeName)===Y.ZodBranded&&s.keyType._def.type._def.typeName===Y.ZodString&&((m=s.keyType._def.type._def.checks)!=null&&m.length)){const{type:p,...y}=dv(s.keyType._def,e);return{...n,propertyNames:y}}}return n}function uT(s,e){if(e.mapStrategy==="record")return pv(s,e);const n=je(s.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=je(s.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function lT(s){const e=s.values,r=Object.keys(s.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),u=Array.from(new Set(r.map(o=>typeof o)));return{type:u.length===1?u[0]==="string"?"string":"number":["string","number"],enum:r}}function oT(){return{not:{}}}function cT(s){return s.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Ml={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function fT(s,e){if(e.target==="openApi3")return xb(s,e);const n=s.options instanceof Map?Array.from(s.options.values()):s.options;if(n.every(r=>r._def.typeName in Ml&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((u,o)=>{const c=Ml[o._def.typeName];return c&&!u.includes(c)?[...u,c]:u},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((u,o)=>{const c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...u,c];case"bigint":return[...u,"integer"];case"object":if(o._def.value===null)return[...u,"null"];case"symbol":case"undefined":case"function":default:return u}},[]);if(r.length===n.length){const u=r.filter((o,c,d)=>d.indexOf(o)===c);return{type:u.length>1?u:u[0],enum:n.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,u)=>[...r,...u._def.values.filter(o=>!r.includes(o))],[])};return xb(s,e)}const xb=(s,e)=>{const n=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((r,u)=>je(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${u}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function dT(s,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(s.innerType._def.typeName)&&(!s.innerType._def.checks||!s.innerType._def.checks.length))return e.target==="openApi3"?{type:Ml[s.innerType._def.typeName],nullable:!0}:{type:[Ml[s.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=je(s.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=je(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function hT(s,e){const n={type:"number"};if(!s.checks)return n;for(const r of s.checks)switch(r.kind){case"int":n.type="integer",fv(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?ke(n,"minimum",r.value,r.message,e):ke(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ke(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ke(n,"maximum",r.value,r.message,e):ke(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ke(n,"maximum",r.value,r.message,e));break;case"multipleOf":ke(n,"multipleOf",r.value,r.message,e);break}return n}function mT(s,e){return e.removeAdditionalStrategy==="strict"?s.catchall._def.typeName==="ZodNever"?s.unknownKeys!=="strict":je(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:s.catchall._def.typeName==="ZodNever"?s.unknownKeys==="passthrough":je(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function pT(s,e){const n=e.target==="openAi",r={type:"object",...Object.entries(s.shape()).reduce((u,[o,c])=>{if(c===void 0||c._def===void 0)return u;let d=c.isOptional();d&&n&&(c instanceof ga&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),d=!1);const m=je(c._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});return m===void 0?u:{properties:{...u.properties,[o]:m},required:d?u.required:[...u.required,o]}},{properties:{},required:[]}),additionalProperties:mT(s,e)};return r.required.length||delete r.required,r}const yT=(s,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return je(s.innerType._def,e);const n=je(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},gT=(s,e)=>{if(e.pipeStrategy==="input")return je(s.in._def,e);if(e.pipeStrategy==="output")return je(s.out._def,e);const n=je(s.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=je(s.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(u=>u!==void 0)}};function bT(s,e){return je(s.type._def,e)}function vT(s,e){const r={type:"array",uniqueItems:!0,items:je(s.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return s.minSize&&ke(r,"minItems",s.minSize.value,s.minSize.message,e),s.maxSize&&ke(r,"maxItems",s.maxSize.value,s.maxSize.message,e),r}function _T(s,e){return s.rest?{type:"array",minItems:s.items.length,items:s.items.map((n,r)=>je(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:je(s.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:s.items.length,maxItems:s.items.length,items:s.items.map((n,r)=>je(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function wT(){return{not:{}}}function ET(){return{}}const ST=(s,e)=>je(s.innerType._def,e),TT=(s,e,n)=>{switch(e){case Y.ZodString:return mv(s,n);case Y.ZodNumber:return hT(s,n);case Y.ZodObject:return pT(s,n);case Y.ZodBigInt:return F1(s,n);case Y.ZodBoolean:return Q1();case Y.ZodDate:return hv(s,n);case Y.ZodUndefined:return wT();case Y.ZodNull:return cT(n);case Y.ZodArray:return X1(s,n);case Y.ZodUnion:case Y.ZodDiscriminatedUnion:return fT(s,n);case Y.ZodIntersection:return nT(s,n);case Y.ZodTuple:return _T(s,n);case Y.ZodRecord:return pv(s,n);case Y.ZodLiteral:return rT(s,n);case Y.ZodEnum:return tT(s);case Y.ZodNativeEnum:return lT(s);case Y.ZodNullable:return dT(s,n);case Y.ZodOptional:return yT(s,n);case Y.ZodMap:return uT(s,n);case Y.ZodSet:return vT(s,n);case Y.ZodLazy:return()=>s.getter()._def;case Y.ZodPromise:return bT(s,n);case Y.ZodNaN:case Y.ZodNever:return oT();case Y.ZodEffects:return eT(s,n);case Y.ZodAny:return Y1();case Y.ZodUnknown:return ET();case Y.ZodDefault:return W1(s,n);case Y.ZodBranded:return dv(s,n);case Y.ZodReadonly:return ST(s,n);case Y.ZodCatch:return K1(s,n);case Y.ZodPipeline:return gT(s,n);case Y.ZodFunction:case Y.ZodVoid:case Y.ZodSymbol:return;default:return(r=>{})()}};function je(s,e,n=!1){var d;const r=e.seen.get(s);if(e.override){const m=(d=e.override)==null?void 0:d.call(e,s,e,r,n);if(m!==q1)return m}if(r&&!n){const m=OT(r,e);if(m!==void 0)return m}const u={def:s,path:e.currentPath,jsonSchema:void 0};e.seen.set(s,u);const o=TT(s,s.typeName,e),c=typeof o=="function"?je(o(),e):o;if(c&&RT(s,e,c),e.postProcess){const m=e.postProcess(c,s,e);return u.jsonSchema=c,m}return u.jsonSchema=c,c}const OT=(s,e)=>{switch(e.$refStrategy){case"root":return{$ref:s.path.join("/")};case"relative":return{$ref:AT(e.currentPath,s.path)};case"none":case"seen":return s.path.length<e.currentPath.length&&s.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},AT=(s,e)=>{let n=0;for(;n<s.length&&n<e.length&&s[n]===e[n];n++);return[(s.length-n).toString(),...e.slice(n)].join("/")},RT=(s,e,n)=>(s.description&&(n.description=s.description,e.markdownDescription&&(n.markdownDescription=s.description)),n),xT=(s,e)=>{const n=V1(e),r=void 0,u=e==null?void 0:e.name,o=je(s._def,n,!1)??{},c=u===void 0?r?{...o,[n.definitionPath]:r}:o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,u].join("/"),[n.definitionPath]:{...r,[u]:o}};return n.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c};function Sd(s){return s.replace(/[^a-zA-Z-_0-9]/g,"_")}const NT=["*","_","`"];function CT(s){let e="";for(const[n,r]of Object.entries(s))e+=`	classDef ${n} ${r};
`;return e}function jT(s,e,n){const{firstNode:r,lastNode:u,nodeColors:o,withStyles:c=!0,curveStyle:d="linear",wrapLabelNWords:m=9}=n??{};let p=c?`%%{init: {'flowchart': {'curve': '${d}'}}}%%
graph TD;
`:`graph TD;
`;if(c){const w="default",E={[w]:"{0}({1})"};r!==void 0&&(E[r]="{0}([{1}]):::first"),u!==void 0&&(E[u]="{0}([{1}]):::last");for(const[O,x]of Object.entries(s)){const k=x.name.split(":").pop()??"";let L=NT.some(I=>k.startsWith(I)&&k.endsWith(I))?`<p>${k}</p>`:k;Object.keys(x.metadata??{}).length&&(L+=`<hr/><small><em>${Object.entries(x.metadata??{}).map(([I,W])=>`${I} = ${W}`).join(`
`)}</em></small>`);const ae=(E[O]??E[w]).replace("{0}",Sd(O)).replace("{1}",L);p+=`	${ae}
`}}const y={};for(const w of e){const E=w.source.split(":"),O=w.target.split(":"),x=E.filter((k,z)=>k===O[z]).join(":");y[x]||(y[x]=[]),y[x].push(w)}const b=new Set;function v(w,E){const O=w.length===1&&w[0].source===w[0].target;if(E&&!O){const x=E.split(":").pop();if(b.has(x))throw new Error(`Found duplicate subgraph '${x}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);b.add(x),p+=`	subgraph ${x}
`}for(const x of w){const{source:k,target:z,data:L,conditional:ae}=x;let I="";if(L!==void 0){let W=L;const ce=W.split(" ");ce.length>m&&(W=Array.from({length:Math.ceil(ce.length/m)},(te,re)=>ce.slice(re*m,(re+1)*m).join(" ")).join("&nbsp;<br>&nbsp;")),I=ae?` -. &nbsp;${W}&nbsp; .-> `:` -- &nbsp;${W}&nbsp; --> `}else I=ae?" -.-> ":" --> ";p+=`	${Sd(k)}${I}${Sd(z)};
`}for(const x in y)x.startsWith(`${E}:`)&&x!==E&&v(y[x],x);E&&!O&&(p+=`	end
`)}v(y[""]??[],"");for(const w in y)!w.includes(":")&&w!==""&&v(y[w],w);return c&&(p+=CT(o??{})),p}async function kT(s,e){let{backgroundColor:n="white"}=e??{};const r=btoa(s);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const u=`https://mermaid.ink/img/${r}?bgColor=${n}`,o=await fetch(u);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}function LT(s,e){if(s!==void 0&&!Es(s))return s;if(eh(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function $T(s){return eh(s.data)?{type:"runnable",data:{id:s.data.lc_id,name:s.data.getName()}}:{type:"schema",data:{...xT(s.data.schema),title:s.data.name}}}class Vl{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=Es(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...$T(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const u=n??Dt(),o={id:u,data:e,name:LT(n,e),metadata:r};return this.nodes[u]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,u){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const o={source:e.id,target:n.id,data:r,conditional:u};return this.edges.push(o),o}firstNode(){return Nb(this)}lastNode(){return Cb(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(p=>p.id).every(Es)&&(r="");const o=p=>r?`${r}:${p}`:p;Object.entries(e.nodes).forEach(([p,y])=>{this.nodes[o(p)]={...y,id:o(p)}});const c=e.edges.map(p=>({...p,source:o(p.source),target:o(p.target)}));this.edges=[...this.edges,...c];const d=e.firstNode(),m=e.lastNode();return[d?{id:o(d.id),data:d.data}:void 0,m?{id:o(m.id),data:m.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&Nb(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&Cb(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(u=>[u.id,u.name])),n=new Map;Object.values(e).forEach(u=>{n.set(u,(n.get(u)||0)+1)});const r=u=>{const o=e[u];return Es(u)&&n.get(o)===1?o:u};return new Vl({nodes:Object.fromEntries(Object.entries(this.nodes).map(([u,o])=>[r(u),{...o,id:r(u)}])),edges:this.edges.map(u=>({...u,source:r(u.source),target:r(u.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:u={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},c=this.reid(),d=c.firstNode(),m=c.lastNode();return jT(c.nodes,c.edges,{firstNode:d==null?void 0:d.id,lastNode:m==null?void 0:m.id,withStyles:n,curveStyle:r,nodeColors:u,wrapLabelNWords:o})}async drawMermaidPng(e){const n=this.drawMermaid(e);return kT(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function Nb(s,e=[]){const n=new Set(s.edges.filter(u=>!e.includes(u.source)).map(u=>u.target)),r=[];for(const u of Object.values(s.nodes))!e.includes(u.id)&&!n.has(u.id)&&r.push(u);return r.length===1?r[0]:void 0}function Cb(s,e=[]){const n=new Set(s.edges.filter(u=>!e.includes(u.target)).map(u=>u.source)),r=[];for(const u of Object.values(s.nodes))!e.includes(u.id)&&!n.has(u.id)&&r.push(u);return r.length===1?r[0]:void 0}function DT(s){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const u of s)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(u)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Yt.fromReadableStream(n)}function jb(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.iterator]=="function"&&typeof s.next=="function"}const MT=s=>s!=null&&typeof s=="object"&&"next"in s&&typeof s.next=="function";function Ud(s){return typeof s=="object"&&s!==null&&typeof s[Symbol.asyncIterator]=="function"}function*kb(s,e){for(;;){const{value:n,done:r}=Un.runWithConfig(di(s),e.next.bind(e),!0);if(r)break;yield n}}async function*Pd(s,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:u}=await Un.runWithConfig(di(s),n.next.bind(e),!0);if(u)break;yield r}}function ot(s,e){return s&&!Array.isArray(s)&&!(s instanceof Date)&&typeof s=="object"?s:{[e]:s}}class xt extends kn{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}bind(e){return new dr({bound:this,kwargs:e,config:{}})}map(){return new Ul({bound:this})}withRetry(e){return new UT({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new dr({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new zT({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(Me);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([u])=>u!=="runId"));return Array.from({length:n},(u,o)=>Me(o===0?e:r))}return Array.from({length:n},()=>Me(e))}async batch(e,n,r){var m;const u=this._getOptionsList(n??{},e.length),o=((m=u[0])==null?void 0:m.maxConcurrency)??(r==null?void 0:r.maxConcurrency),c=new Wd({maxConcurrency:o,onFailedAttempt:p=>{throw p}}),d=e.map((p,y)=>c.call(async()=>{try{return await this.invoke(p,u[y])}catch(b){if(r!=null&&r.returnExceptions)return b;throw b}}));return Promise.all(d)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=Me(n),u=new mi({generator:this._streamIterator(e,r),config:r});return await u.setup,Yt.fromAsyncGenerator(u)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=Me(e):n=Me({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const u=Me(r),o=await ba(u),c=await(o==null?void 0:o.handleChainStart(this.toJSON(),ot(n,"input"),u.runId,u==null?void 0:u.runType,void 0,void 0,(u==null?void 0:u.runName)??this.getName()));delete u.runId;let d;try{const m=e.call(this,n,u,c);d=await Pn(m,r==null?void 0:r.signal)}catch(m){throw await(c==null?void 0:c.handleChainError(m)),m}return await(c==null?void 0:c.handleChainEnd(ot(d,"output"))),d}async _batchWithConfig(e,n,r,u){var p;const o=this._getOptionsList(r??{},n.length),c=await Promise.all(o.map(ba)),d=await Promise.all(c.map(async(y,b)=>{const v=await(y==null?void 0:y.handleChainStart(this.toJSON(),ot(n[b],"input"),o[b].runId,o[b].runType,void 0,void 0,o[b].runName??this.getName()));return delete o[b].runId,v}));let m;try{const y=e.call(this,n,o,d,u);m=await Pn(y,(p=o==null?void 0:o[0])==null?void 0:p.signal)}catch(y){throw await Promise.all(d.map(b=>b==null?void 0:b.handleChainError(y))),y}return await Promise.all(d.map(y=>y==null?void 0:y.handleChainEnd(ot(m,"output")))),m}async*_transformStreamWithConfig(e,n,r){let u,o=!0,c,d=!0;const m=Me(r),p=await ba(m);async function*y(){for await(const v of e){if(o)if(u===void 0)u=v;else try{u=Na(u,v)}catch{u=void 0,o=!1}yield v}}let b;try{const v=await D1(n.bind(this),y(),async()=>p==null?void 0:p.handleChainStart(this.toJSON(),{input:""},m.runId,m.runType,void 0,void 0,m.runName??this.getName()),r==null?void 0:r.signal,m);delete m.runId,b=v.setup;const w=b==null?void 0:b.handlers.find(P1);let E=v.output;w!==void 0&&b!==void 0&&(E=w.tapOutputIterable(b.runId,E));const O=b==null?void 0:b.handlers.find(M1);O!==void 0&&b!==void 0&&(E=O.tapOutputIterable(b.runId,E));for await(const x of E)if(yield x,d)if(c===void 0)c=x;else try{c=Na(c,x)}catch{c=void 0,d=!1}}catch(v){throw await(b==null?void 0:b.handleChainError(v,void 0,void 0,void 0,{inputs:ot(u,"input")})),v}await(b==null?void 0:b.handleChainEnd(c??{},void 0,void 0,void 0,{inputs:ot(u,"input")}))}getGraph(e){const n=new Vl,r=n.addNode({name:`${this.getName()}Input`,schema:ws.any()}),u=n.addNode(this),o=n.addNode({name:`${this.getName()}Output`,schema:ws.any()});return n.addEdge(r,u),n.addEdge(u,o),n}pipe(e){return new lr({first:this,last:or(e)})}pick(e){return this.pipe(new BT(e))}assign(e){return this.pipe(new IT(new Qs({steps:e})))}async*transform(e,n){let r;for await(const u of e)r===void 0?r=u:r=Na(r,u);yield*this._streamIterator(r,Me(n))}async*streamLog(e,n,r){const u=new Ob({...r,autoClose:!1,_schemaFormat:"original"}),o=Me(n);yield*this._streamLog(e,u,o)}async*_streamLog(e,n,r){const{callbacks:u}=r;if(u===void 0)r.callbacks=[n];else if(Array.isArray(u))r.callbacks=u.concat([n]);else{const m=u.copy();m.addHandler(n,!0),r.callbacks=m}const o=this.stream(e,r);async function c(){try{const m=await o;for await(const p of m){const y=new Nn({ops:[{op:"add",path:"/streamed_output/-",value:p}]});await n.writer.write(y)}}finally{await n.writer.close()}}const d=c();try{for await(const m of n)yield m}finally{await d}}streamEvents(e,n,r){let u;if(n.version==="v1")u=this._streamEventsV1(e,n,r);else if(n.version==="v2")u=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?DT(u):Yt.fromAsyncGenerator(u)}async*_streamEventsV2(e,n,r){var E;const u=new z1({...r,autoClose:!1}),o=Me(n),c=o.runId??Dt();o.runId=c;const d=o.callbacks;if(d===void 0)o.callbacks=[u];else if(Array.isArray(d))o.callbacks=d.concat(u);else{const O=d.copy();O.addHandler(u,!0),o.callbacks=O}const m=new AbortController,p=this;async function y(){try{let O;n!=null&&n.signal?"any"in AbortSignal?O=AbortSignal.any([m.signal,n.signal]):(O=n.signal,n.signal.addEventListener("abort",()=>{m.abort()},{once:!0})):O=m.signal;const x=await p.stream(e,{...o,signal:O}),k=u.tapOutputIterable(c,x);for await(const z of k)if(m.signal.aborted)break}finally{await u.finish()}}const b=y();let v=!1,w;try{for await(const O of u){if(!v){O.data.input=e,v=!0,w=O.run_id,yield O;continue}O.run_id===w&&O.event.endsWith("_end")&&(E=O.data)!=null&&E.input&&delete O.data.input,yield O}}finally{m.abort(),await b}}async*_streamEventsV1(e,n,r){let u,o=!1;const c=Me(n),d=c.tags??[],m=c.metadata??{},p=c.runName??this.getName(),y=new Ob({...r,autoClose:!1,_schemaFormat:"streaming_events"}),b=new H1({...r}),v=this._streamLog(e,y,c);for await(const E of v){if(u?u=u.concat(E):u=Hs.fromRunLogPatch(E),u.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const z={...u.state},L={run_id:z.id,event:`on_${z.type}_start`,name:p,tags:d,metadata:m,data:{input:e}};b.includeEvent(L,z.type)&&(yield L)}const O=E.ops.filter(z=>z.path.startsWith("/logs/")).map(z=>z.path.split("/")[2]),x=[...new Set(O)];for(const z of x){let L,ae={};const I=u.state.logs[z];if(I.end_time===void 0?I.streamed_output.length>0?L="stream":L="start":L="end",L==="start")I.inputs!==void 0&&(ae.input=I.inputs);else if(L==="end")I.inputs!==void 0&&(ae.input=I.inputs),ae.output=I.final_output;else if(L==="stream"){const W=I.streamed_output.length;if(W!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${W} instead. Encountered in: "${I.name}"`);ae={chunk:I.streamed_output[0]},I.streamed_output=[]}yield{event:`on_${I.type}_${L}`,name:I.name,run_id:I.id,tags:I.tags,metadata:I.metadata,data:ae}}const{state:k}=u;if(k.streamed_output.length>0){const z=k.streamed_output.length;if(z!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${z} instead. Encountered in: "${k.name}"`);const L={chunk:k.streamed_output[0]};k.streamed_output=[];const ae={event:`on_${k.type}_stream`,run_id:k.id,tags:d,metadata:m,name:p,data:L};b.includeEvent(ae,k.type)&&(yield ae)}}const w=u==null?void 0:u.state;if(w!==void 0){const E={event:`on_${w.type}_end`,name:p,run_id:w.id,tags:d,metadata:m,data:{output:w.final_output}};b.includeEvent(E,w.type)&&(yield E)}}static isRunnable(e){return eh(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new dr({bound:this,config:{},configFactories:[u=>({callbacks:[new cv({config:u,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return HT(this,e)}}class dr extends xt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=Eb(this.config,...e);return Eb(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(Me(n),this.kwargs))}async batch(e,n,r){const u=Array.isArray(n)?await Promise.all(n.map(async o=>this._mergeConfig(Me(o),this.kwargs))):await this._mergeConfig(Me(n),this.kwargs);return this.bound.batch(e,u,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(Me(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(Me(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(Me(n),this.kwargs))}streamEvents(e,n,r){const u=this,o=async function*(){yield*u.bound.streamEvents(e,{...await u._mergeConfig(Me(n),u.kwargs),version:n.version},r)};return Yt.fromAsyncGenerator(o())}static isRunnableBinding(e){return e.bound&&xt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new dr({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[u=>({callbacks:[new cv({config:u,onStart:e,onEnd:n,onError:r})]})]})}}class Ul extends xt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Ul({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,wt(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new Ul({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class UT extends dr{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const u=e>1?`retry:attempt:${e}`:void 0;return wt(n,{callbacks:r==null?void 0:r.getChild(u)})}async _invoke(e,n,r){return Cl(u=>super.invoke(e,this._patchConfigForRetry(u,n,r)),{onFailedAttempt:u=>this.onFailedAttempt(u,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,u){const o={};try{await Cl(async c=>{const d=e.map((v,w)=>w).filter(v=>o[v.toString()]===void 0||o[v.toString()]instanceof Error),m=d.map(v=>e[v]),p=d.map(v=>this._patchConfigForRetry(c,n==null?void 0:n[v],r==null?void 0:r[v])),y=await super.batch(m,p,{...u,returnExceptions:!0});let b;for(let v=0;v<y.length;v+=1){const w=y[v],E=d[v];w instanceof Error&&b===void 0&&(b=w,b.input=m[v]),o[E.toString()]=w}if(b)throw b;return y},{onFailedAttempt:c=>this.onFailedAttempt(c,c.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(c){if((u==null?void 0:u.returnExceptions)!==!0)throw c}return Object.keys(o).sort((c,d)=>parseInt(c,10)-parseInt(d,10)).map(c=>o[parseInt(c,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class lr extends xt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var m;const r=Me(n),u=await ba(r),o=await(u==null?void 0:u.handleChainStart(this.toJSON(),ot(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let c=e,d;try{const p=[this.first,...this.middle];for(let y=0;y<p.length;y+=1){const v=p[y].invoke(c,wt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${y+1}`)}));c=await Pn(v,n==null?void 0:n.signal)}if((m=n==null?void 0:n.signal)!=null&&m.aborted)throw new Error("Aborted");d=await this.last.invoke(c,wt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(p){throw await(o==null?void 0:o.handleChainError(p)),p}return await(o==null?void 0:o.handleChainEnd(ot(d,"output"))),d}async batch(e,n,r){var m;const u=this._getOptionsList(n??{},e.length),o=await Promise.all(u.map(ba)),c=await Promise.all(o.map(async(p,y)=>{const b=await(p==null?void 0:p.handleChainStart(this.toJSON(),ot(e[y],"input"),u[y].runId,void 0,void 0,void 0,u[y].runName));return delete u[y].runId,b}));let d=e;try{for(let p=0;p<this.steps.length;p+=1){const b=this.steps[p].batch(d,c.map((v,w)=>{const E=v==null?void 0:v.getChild(this.omitSequenceTags?void 0:`seq:step:${p+1}`);return wt(u[w],{callbacks:E})}),r);d=await Pn(b,(m=u[0])==null?void 0:m.signal)}}catch(p){throw await Promise.all(c.map(y=>y==null?void 0:y.handleChainError(p))),p}return await Promise.all(c.map(p=>p==null?void 0:p.handleChainEnd(ot(d,"output")))),d}async*_streamIterator(e,n){var b;const r=await ba(n),{runId:u,...o}=n??{},c=await(r==null?void 0:r.handleChainStart(this.toJSON(),ot(e,"input"),u,void 0,void 0,void 0,o==null?void 0:o.runName)),d=[this.first,...this.middle,this.last];let m=!0,p;async function*y(){yield e}try{let v=d[0].transform(y(),wt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let w=1;w<d.length;w+=1)v=await d[w].transform(v,wt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${w+1}`)}));for await(const w of v)if((b=n==null?void 0:n.signal)==null||b.throwIfAborted(),yield w,m)if(p===void 0)p=w;else try{p=Na(p,w)}catch{p=void 0,m=!1}}catch(v){throw await(c==null?void 0:c.handleChainError(v)),v}await(c==null?void 0:c.handleChainEnd(ot(p,"output")))}getGraph(e){const n=new Vl;let r=null;return this.steps.forEach((u,o)=>{const c=u.getGraph(e);o!==0&&c.trimFirstNode(),o!==this.steps.length-1&&c.trimLastNode(),n.extend(c);const d=c.firstNode();if(!d)throw new Error(`Runnable ${u} has no first node`);r&&n.addEdge(r,d),r=c.lastNode()}),n}pipe(e){return lr.isRunnableSequence(e)?new lr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new lr({first:this.first,middle:[...this.middle,this.last],last:or(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&xt.isRunnable(e)}static from([e,...n],r){let u={};return typeof r=="string"?u.name=r:r!==void 0&&(u=r),new lr({...u,first:or(e),middle:n.slice(0,-1).map(or),last:or(n[n.length-1])})}}class Qs extends xt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=or(r)}static from(e){return new Qs({steps:e})}async invoke(e,n){const r=Me(n),u=await ba(r),o=await(u==null?void 0:u.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const c={};try{const d=Object.entries(this.steps).map(async([m,p])=>{c[m]=await p.invoke(e,wt(r,{callbacks:o==null?void 0:o.getChild(`map:key:${m}`)}))});await Pn(Promise.all(d),n==null?void 0:n.signal)}catch(d){throw await(o==null?void 0:o.handleChainError(d)),d}return await(o==null?void 0:o.handleChainEnd(c)),c}async*_transform(e,n,r){const u={...this.steps},o=ov(e,Object.keys(u).length),c=new Map(Object.entries(u).map(([d,m],p)=>{const y=m.transform(o[p],wt(r,{callbacks:n==null?void 0:n.getChild(`map:key:${d}`)}));return[d,y.next().then(b=>({key:d,gen:y,result:b}))]}));for(;c.size;){const d=Promise.race(c.values()),{key:m,result:p,gen:y}=await Pn(d,r==null?void 0:r.signal);c.delete(m),p.done||(yield{[m]:p.value},c.set(m,y.next().then(b=>({key:m,gen:y,result:b}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const u=Me(n),o=new mi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class th extends xt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!Kd(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n??{},1),u=await ba(r),o=this.func(wt(r,{callbacks:u}),e);return Pn(o,r==null?void 0:r.signal)}async*_streamIterator(e,n){var o,c;const[r]=this._getOptionsList(n??{},1),u=await this.invoke(e,n);if(Ud(u)){for await(const d of u)(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield d;return}if(MT(u)){for(;;){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const d=u.next();if(d.done)break;yield d.value}return}yield u}static from(e){return new th({func:e})}}function PT(s){if(Kd(s))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class Yl extends xt{static lc_name(){return"RunnableLambda"}constructor(e){if(Kd(e.func))return th.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),PT(e.func),this.func=e.func}static from(e){return new Yl({func:e})}async _invoke(e,n,r){return new Promise((u,o)=>{const c=wt(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??_d)-1});Un.runWithConfig(di(c),async()=>{var d,m;try{let p=await this.func(e,{...c});if(p&&xt.isRunnable(p)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");p=await p.invoke(e,{...c,recursionLimit:(c.recursionLimit??_d)-1})}else if(Ud(p)){let y;for await(const b of Pd(c,p))if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),y===void 0)y=b;else try{y=Na(y,b)}catch{y=b}p=y}else if(jb(p)){let y;for(const b of kb(c,p))if((m=n==null?void 0:n.signal)==null||m.throwIfAborted(),y===void 0)y=b;else try{y=Na(y,b)}catch{y=b}p=y}u(p)}catch(p){o(p)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var d,m;let u;for await(const p of e)if(u===void 0)u=p;else try{u=Na(u,p)}catch{u=p}const o=wt(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??_d)-1}),c=await new Promise((p,y)=>{Un.runWithConfig(di(o),async()=>{try{const b=await this.func(u,{...o,config:o});p(b)}catch(b){y(b)}})});if(c&&xt.isRunnable(c)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const p=await c.stream(u,o);for await(const y of p)yield y}else if(Ud(c))for await(const p of Pd(o,c))(d=r==null?void 0:r.signal)==null||d.throwIfAborted(),yield p;else if(jb(c))for(const p of kb(o,c))(m=r==null?void 0:r.signal)==null||m.throwIfAborted(),yield p;else yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const u=Me(n),o=new mi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class zT extends xt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=Me(n),u=await ba(r),{runId:o,...c}=r,d=await(u==null?void 0:u.handleChainStart(this.toJSON(),ot(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName)),m=wt(c,{callbacks:d==null?void 0:d.getChild()});return await Un.runWithConfig(m,async()=>{var b;let y;for(const v of this.runnables()){(b=r==null?void 0:r.signal)==null||b.throwIfAborted();try{const w=await v.invoke(e,m);return await(d==null?void 0:d.handleChainEnd(ot(w,"output"))),w}catch(w){y===void 0&&(y=w)}}throw y===void 0?new Error("No error stored at end of fallback."):(await(d==null?void 0:d.handleChainError(y)),y)})}async*_streamIterator(e,n){var b;const r=Me(n),u=await ba(r),{runId:o,...c}=r,d=await(u==null?void 0:u.handleChainStart(this.toJSON(),ot(e,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName));let m,p;for(const v of this.runnables()){(b=r==null?void 0:r.signal)==null||b.throwIfAborted();const w=wt(c,{callbacks:d==null?void 0:d.getChild()});try{const E=await v.stream(e,w);p=Pd(w,E);break}catch(E){m===void 0&&(m=E)}}if(p===void 0){const v=m??new Error("No error stored at end of fallback.");throw await(d==null?void 0:d.handleChainError(v)),v}let y;try{for await(const v of p){yield v;try{y=y===void 0?y:Na(y,v)}catch{y=void 0}}}catch(v){throw await(d==null?void 0:d.handleChainError(v)),v}await(d==null?void 0:d.handleChainEnd(ot(y,"output")))}async batch(e,n,r){var m;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const u=this._getOptionsList(n??{},e.length),o=await Promise.all(u.map(p=>ba(p))),c=await Promise.all(o.map(async(p,y)=>{const b=await(p==null?void 0:p.handleChainStart(this.toJSON(),ot(e[y],"input"),u[y].runId,void 0,void 0,void 0,u[y].runName));return delete u[y].runId,b}));let d;for(const p of this.runnables()){(m=u[0].signal)==null||m.throwIfAborted();try{const y=await p.batch(e,c.map((b,v)=>wt(u[v],{callbacks:b==null?void 0:b.getChild()})),r);return await Promise.all(c.map((b,v)=>b==null?void 0:b.handleChainEnd(ot(y[v],"output")))),y}catch(y){d===void 0&&(d=y)}}throw d?(await Promise.all(c.map(p=>p==null?void 0:p.handleChainError(d))),d):new Error("No error stored at end of fallbacks.")}}function or(s){if(typeof s=="function")return new Yl({func:s});if(xt.isRunnable(s))return s;if(!Array.isArray(s)&&typeof s=="object"){const e={};for(const[n,r]of Object.entries(s))e[n]=or(r);return new Qs({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class IT extends xt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Qs&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const u=this.mapper.getStepsKeys(),[o,c]=ov(e),d=this.mapper.transform(c,wt(r,{callbacks:n==null?void 0:n.getChild()})),m=d.next();for await(const p of o){if(typeof p!="object"||Array.isArray(p))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof p}`);const y=Object.fromEntries(Object.entries(p).filter(([b])=>!u.includes(b)));Object.keys(y).length>0&&(yield y)}yield(await m).value;for await(const p of d)yield p}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const u=Me(n),o=new mi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class BT extends xt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const u=Me(n),o=new mi({generator:this.transform(r(),u),config:u});return await o.setup,Yt.fromAsyncGenerator(o)}}class Lb extends dr{constructor(e){const n=lr.from([Yl.from(async r=>{let u;if(zb(r))try{u=await this.schema.parseAsync(r.args)}catch{throw new _w("Received tool input did not match expected schema",JSON.stringify(r.args))}else u=r;return u}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function HT(s,e){var u;const n=e.name??s.getName(),r=e.description??((u=e.schema)==null?void 0:u.description);return e.schema.constructor===ws.ZodString?new Lb({name:n,description:r,schema:ws.object({input:ws.string()}).transform(o=>o.input),bound:s}):new Lb({name:n,description:r,schema:e.schema,bound:s})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var qT=typeof window=="object"?window:{},_e="0123456789abcdef".split(""),ZT=[-2147483648,8388608,32768,128],ma=[24,16,8,0],lt=[];function _a(s){s?(lt[0]=lt[16]=lt[1]=lt[2]=lt[3]=lt[4]=lt[5]=lt[6]=lt[7]=lt[8]=lt[9]=lt[10]=lt[11]=lt[12]=lt[13]=lt[14]=lt[15]=0,this.blocks=lt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}_a.prototype.update=function(s){if(!this.finalized){var e=typeof s!="string";e&&s.constructor===qT.ArrayBuffer&&(s=new Uint8Array(s));for(var n,r=0,u,o=s.length||0,c=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(u=this.start;r<o&&u<64;++r)c[u>>2]|=s[r]<<ma[u++&3];else for(u=this.start;r<o&&u<64;++r)n=s.charCodeAt(r),n<128?c[u>>2]|=n<<ma[u++&3]:n<2048?(c[u>>2]|=(192|n>>6)<<ma[u++&3],c[u>>2]|=(128|n&63)<<ma[u++&3]):n<55296||n>=57344?(c[u>>2]|=(224|n>>12)<<ma[u++&3],c[u>>2]|=(128|n>>6&63)<<ma[u++&3],c[u>>2]|=(128|n&63)<<ma[u++&3]):(n=65536+((n&1023)<<10|s.charCodeAt(++r)&1023),c[u>>2]|=(240|n>>18)<<ma[u++&3],c[u>>2]|=(128|n>>12&63)<<ma[u++&3],c[u>>2]|=(128|n>>6&63)<<ma[u++&3],c[u>>2]|=(128|n&63)<<ma[u++&3]);this.lastByteIndex=u,this.bytes+=u-this.start,u>=64?(this.block=c[16],this.start=u-64,this.hash(),this.hashed=!0):this.start=u}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};_a.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,e=this.lastByteIndex;s[16]=this.block,s[e>>2]|=ZT[e&3],this.block=s[16],e>=56&&(this.hashed||this.hash(),s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.hBytes<<3|this.bytes>>>29,s[15]=this.bytes<<3,this.hash()}};_a.prototype.hash=function(){var s=this.h0,e=this.h1,n=this.h2,r=this.h3,u=this.h4,o,c,d,m=this.blocks;for(c=16;c<80;++c)d=m[c-3]^m[c-8]^m[c-14]^m[c-16],m[c]=d<<1|d>>>31;for(c=0;c<20;c+=5)o=e&n|~e&r,d=s<<5|s>>>27,u=d+o+u+1518500249+m[c]<<0,e=e<<30|e>>>2,o=s&e|~s&n,d=u<<5|u>>>27,r=d+o+r+1518500249+m[c+1]<<0,s=s<<30|s>>>2,o=u&s|~u&e,d=r<<5|r>>>27,n=d+o+n+1518500249+m[c+2]<<0,u=u<<30|u>>>2,o=r&u|~r&s,d=n<<5|n>>>27,e=d+o+e+1518500249+m[c+3]<<0,r=r<<30|r>>>2,o=n&r|~n&u,d=e<<5|e>>>27,s=d+o+s+1518500249+m[c+4]<<0,n=n<<30|n>>>2;for(;c<40;c+=5)o=e^n^r,d=s<<5|s>>>27,u=d+o+u+1859775393+m[c]<<0,e=e<<30|e>>>2,o=s^e^n,d=u<<5|u>>>27,r=d+o+r+1859775393+m[c+1]<<0,s=s<<30|s>>>2,o=u^s^e,d=r<<5|r>>>27,n=d+o+n+1859775393+m[c+2]<<0,u=u<<30|u>>>2,o=r^u^s,d=n<<5|n>>>27,e=d+o+e+1859775393+m[c+3]<<0,r=r<<30|r>>>2,o=n^r^u,d=e<<5|e>>>27,s=d+o+s+1859775393+m[c+4]<<0,n=n<<30|n>>>2;for(;c<60;c+=5)o=e&n|e&r|n&r,d=s<<5|s>>>27,u=d+o+u-1894007588+m[c]<<0,e=e<<30|e>>>2,o=s&e|s&n|e&n,d=u<<5|u>>>27,r=d+o+r-1894007588+m[c+1]<<0,s=s<<30|s>>>2,o=u&s|u&e|s&e,d=r<<5|r>>>27,n=d+o+n-1894007588+m[c+2]<<0,u=u<<30|u>>>2,o=r&u|r&s|u&s,d=n<<5|n>>>27,e=d+o+e-1894007588+m[c+3]<<0,r=r<<30|r>>>2,o=n&r|n&u|r&u,d=e<<5|e>>>27,s=d+o+s-1894007588+m[c+4]<<0,n=n<<30|n>>>2;for(;c<80;c+=5)o=e^n^r,d=s<<5|s>>>27,u=d+o+u-899497514+m[c]<<0,e=e<<30|e>>>2,o=s^e^n,d=u<<5|u>>>27,r=d+o+r-899497514+m[c+1]<<0,s=s<<30|s>>>2,o=u^s^e,d=r<<5|r>>>27,n=d+o+n-899497514+m[c+2]<<0,u=u<<30|u>>>2,o=r^u^s,d=n<<5|n>>>27,e=d+o+e-899497514+m[c+3]<<0,r=r<<30|r>>>2,o=n^r^u,d=e<<5|e>>>27,s=d+o+s-899497514+m[c+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+s<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+u<<0};_a.prototype.hex=function(){this.finalize();var s=this.h0,e=this.h1,n=this.h2,r=this.h3,u=this.h4;return _e[s>>28&15]+_e[s>>24&15]+_e[s>>20&15]+_e[s>>16&15]+_e[s>>12&15]+_e[s>>8&15]+_e[s>>4&15]+_e[s&15]+_e[e>>28&15]+_e[e>>24&15]+_e[e>>20&15]+_e[e>>16&15]+_e[e>>12&15]+_e[e>>8&15]+_e[e>>4&15]+_e[e&15]+_e[n>>28&15]+_e[n>>24&15]+_e[n>>20&15]+_e[n>>16&15]+_e[n>>12&15]+_e[n>>8&15]+_e[n>>4&15]+_e[n&15]+_e[r>>28&15]+_e[r>>24&15]+_e[r>>20&15]+_e[r>>16&15]+_e[r>>12&15]+_e[r>>8&15]+_e[r>>4&15]+_e[r&15]+_e[u>>28&15]+_e[u>>24&15]+_e[u>>20&15]+_e[u>>16&15]+_e[u>>12&15]+_e[u>>8&15]+_e[u>>4&15]+_e[u&15]};_a.prototype.toString=_a.prototype.hex;_a.prototype.digest=function(){this.finalize();var s=this.h0,e=this.h1,n=this.h2,r=this.h3,u=this.h4;return[s>>24&255,s>>16&255,s>>8&255,s&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,u>>24&255,u>>16&255,u>>8&255,u&255]};_a.prototype.array=_a.prototype.digest;_a.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(20),e=new DataView(s);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),s};const GT=s=>new _a(!0).update(s).hex(),$b=(...s)=>GT(s.join("_"));class VT{}const YT=new Map;class ah extends VT{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get($b(e,n))??null)}async update(e,n,r){this.cache.set($b(e,n),r)}static global(){return new ah(YT)}}class yv extends kn{}class XT extends yv{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Gs(this.value)]}}class FT extends yv{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return qd(this.messages)}toChatMessages(){return this.messages}}var bs={},Db;function QT(){if(Db)return bs;Db=1,bs.byteLength=d,bs.toByteArray=p,bs.fromByteArray=v;for(var s=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,o=r.length;u<o;++u)s[u]=r[u],e[r.charCodeAt(u)]=u;e[45]=62,e[95]=63;function c(w){var E=w.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=w.indexOf("=");O===-1&&(O=E);var x=O===E?0:4-O%4;return[O,x]}function d(w){var E=c(w),O=E[0],x=E[1];return(O+x)*3/4-x}function m(w,E,O){return(E+O)*3/4-O}function p(w){var E,O=c(w),x=O[0],k=O[1],z=new n(m(w,x,k)),L=0,ae=k>0?x-4:x,I;for(I=0;I<ae;I+=4)E=e[w.charCodeAt(I)]<<18|e[w.charCodeAt(I+1)]<<12|e[w.charCodeAt(I+2)]<<6|e[w.charCodeAt(I+3)],z[L++]=E>>16&255,z[L++]=E>>8&255,z[L++]=E&255;return k===2&&(E=e[w.charCodeAt(I)]<<2|e[w.charCodeAt(I+1)]>>4,z[L++]=E&255),k===1&&(E=e[w.charCodeAt(I)]<<10|e[w.charCodeAt(I+1)]<<4|e[w.charCodeAt(I+2)]>>2,z[L++]=E>>8&255,z[L++]=E&255),z}function y(w){return s[w>>18&63]+s[w>>12&63]+s[w>>6&63]+s[w&63]}function b(w,E,O){for(var x,k=[],z=E;z<O;z+=3)x=(w[z]<<16&16711680)+(w[z+1]<<8&65280)+(w[z+2]&255),k.push(y(x));return k.join("")}function v(w){for(var E,O=w.length,x=O%3,k=[],z=16383,L=0,ae=O-x;L<ae;L+=z)k.push(b(w,L,L+z>ae?ae:L+z));return x===1?(E=w[O-1],k.push(s[E>>2]+s[E<<4&63]+"==")):x===2&&(E=(w[O-2]<<8)+w[O-1],k.push(s[E>>10]+s[E>>4&63]+s[E<<2&63]+"=")),k.join("")}return bs}var KT=QT();const JT=qs(KT);var WT=Object.defineProperty,eO=(s,e,n)=>e in s?WT(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,tO=(s,e,n)=>(eO(s,e+"",n),n);function aO(s,e){let n=Array.from({length:s.length},(r,u)=>({start:u,end:u+1}));for(;n.length>1;){let r=null;for(let u=0;u<n.length-1;u++){const o=s.slice(n[u].start,n[u+1].end),c=e.get(o.join(","));c!=null&&(r==null||c<r[0])&&(r=[c,u])}if(r!=null){const u=r[1];n[u]={start:n[u].start,end:n[u+1].end},n.splice(u+1,1)}else break}return n}function nO(s,e){return s.length===1?[e.get(s.join(","))]:aO(s,e).map(n=>e.get(s.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function rO(s){return s.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var zd=class{constructor(s,e){An(this,"specialTokens");An(this,"inverseSpecialTokens");An(this,"patStr");An(this,"textEncoder",new TextEncoder);An(this,"textDecoder",new TextDecoder("utf-8"));An(this,"rankMap",new Map);An(this,"textMap",new Map);this.patStr=s.pat_str;const n=s.bpe_ranks.split(`
`).filter(Boolean).reduce((r,u)=>{const[o,c,...d]=u.split(" "),m=Number.parseInt(c,10);return d.forEach((p,y)=>r[p]=m+y),r},{});for(const[r,u]of Object.entries(n)){const o=JT.toByteArray(r);this.rankMap.set(o.join(","),u),this.textMap.set(u,o)}this.specialTokens={...s.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[u,o])=>(r[o]=this.textEncoder.encode(u),r),{})}encode(s,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),u=zd.specialTokenRegex(Object.keys(this.specialTokens)),o=[],c=new Set(e==="all"?Object.keys(this.specialTokens):e),d=new Set(n==="all"?Object.keys(this.specialTokens).filter(p=>!c.has(p)):n);if(d.size>0){const p=zd.specialTokenRegex([...d]),y=s.match(p);if(y!=null)throw new Error(`The text contains a special token that is not allowed: ${y[0]}`)}let m=0;for(;;){let p=null,y=m;for(;u.lastIndex=y,p=u.exec(s),!(p==null||c.has(p[0]));)y=p.index+1;const b=(p==null?void 0:p.index)??s.length;for(const w of s.substring(m,b).matchAll(r)){const E=this.textEncoder.encode(w[0]),O=this.rankMap.get(E.join(","));if(O!=null){o.push(O);continue}o.push(...nO(E,this.rankMap))}if(p==null)break;let v=this.specialTokens[p[0]];o.push(v),m=p.index+p[0].length}return o}decode(s){const e=[];let n=0;for(let o=0;o<s.length;++o){const c=s[o],d=this.textMap.get(c)??this.inverseSpecialTokens[c];d!=null&&(e.push(d),n+=d.length)}const r=new Uint8Array(n);let u=0;for(const o of e)r.set(o,u),u+=o.length;return this.textDecoder.decode(r)}},gv=zd;tO(gv,"specialTokenRegex",s=>new RegExp(s.map(e=>rO(e)).join("|"),"g"));function iO(s){switch(s){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"o3-mini":case"o3-mini-2025-01-31":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}const vl={},sO=new Wd({});async function uO(s){return s in vl||(vl[s]=sO.fetch(`https://tiktoken.pages.dev/js/${s}.json`).then(e=>e.json()).then(e=>new gv(e)).catch(e=>{throw delete vl[s],e})),await vl[s]}async function lO(s){return uO(iO(s))}const oO=s=>s.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":s.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":s.startsWith("gpt-4-32k")?"gpt-4-32k":s.startsWith("gpt-4-")?"gpt-4":s.startsWith("gpt-4o")?"gpt-4o":s,cO=()=>!1;class fO extends xt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??cO(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class dO extends fO{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){const{cache:u,...o}=r;super({callbacks:e??n,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof u=="object"?this.cache=u:u?this.cache=ah.global():this.cache=void 0,this.caller=new Wd(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let n=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await lO("modelName"in this?oO(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new XT(e):Array.isArray(e)?new FT(e.map(Sw)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([c,d])=>d!==void 0).map(([c,d])=>`${c}:${JSON.stringify(d)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}var yt=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},Rt={searchParams:"URLSearchParams"in yt,iterable:"Symbol"in yt&&"iterator"in Symbol,blob:"FileReader"in yt&&"Blob"in yt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in yt,arrayBuffer:"ArrayBuffer"in yt};function hO(s){return s&&DataView.prototype.isPrototypeOf(s)}if(Rt.arrayBuffer)var mO=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],pO=ArrayBuffer.isView||function(s){return s&&mO.indexOf(Object.prototype.toString.call(s))>-1};function pi(s){if(typeof s!="string"&&(s=String(s)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(s)||s==="")throw new TypeError('Invalid character in header field name: "'+s+'"');return s.toLowerCase()}function nh(s){return typeof s!="string"&&(s=String(s)),s}function rh(s){var e={next:function(){var n=s.shift();return{done:n===void 0,value:n}}};return Rt.iterable&&(e[Symbol.iterator]=function(){return e}),e}function nt(s){this.map={},s instanceof nt?s.forEach(function(e,n){this.append(n,e)},this):Array.isArray(s)?s.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):s&&Object.getOwnPropertyNames(s).forEach(function(e){this.append(e,s[e])},this)}nt.prototype.append=function(s,e){s=pi(s),e=nh(e);var n=this.map[s];this.map[s]=n?n+", "+e:e};nt.prototype.delete=function(s){delete this.map[pi(s)]};nt.prototype.get=function(s){return s=pi(s),this.has(s)?this.map[s]:null};nt.prototype.has=function(s){return this.map.hasOwnProperty(pi(s))};nt.prototype.set=function(s,e){this.map[pi(s)]=nh(e)};nt.prototype.forEach=function(s,e){for(var n in this.map)this.map.hasOwnProperty(n)&&s.call(e,this.map[n],n,this)};nt.prototype.keys=function(){var s=[];return this.forEach(function(e,n){s.push(n)}),rh(s)};nt.prototype.values=function(){var s=[];return this.forEach(function(e){s.push(e)}),rh(s)};nt.prototype.entries=function(){var s=[];return this.forEach(function(e,n){s.push([n,e])}),rh(s)};Rt.iterable&&(nt.prototype[Symbol.iterator]=nt.prototype.entries);function Td(s){if(!s._noBody){if(s.bodyUsed)return Promise.reject(new TypeError("Already read"));s.bodyUsed=!0}}function bv(s){return new Promise(function(e,n){s.onload=function(){e(s.result)},s.onerror=function(){n(s.error)}})}function yO(s){var e=new FileReader,n=bv(e);return e.readAsArrayBuffer(s),n}function gO(s){var e=new FileReader,n=bv(e),r=/charset=([A-Za-z0-9_-]+)/.exec(s.type),u=r?r[1]:"utf-8";return e.readAsText(s,u),n}function bO(s){for(var e=new Uint8Array(s),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function Mb(s){if(s.slice)return s.slice(0);var e=new Uint8Array(s.byteLength);return e.set(new Uint8Array(s)),e.buffer}function vv(){return this.bodyUsed=!1,this._initBody=function(s){this.bodyUsed=this.bodyUsed,this._bodyInit=s,s?typeof s=="string"?this._bodyText=s:Rt.blob&&Blob.prototype.isPrototypeOf(s)?this._bodyBlob=s:Rt.formData&&FormData.prototype.isPrototypeOf(s)?this._bodyFormData=s:Rt.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)?this._bodyText=s.toString():Rt.arrayBuffer&&Rt.blob&&hO(s)?(this._bodyArrayBuffer=Mb(s.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Rt.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(s)||pO(s))?this._bodyArrayBuffer=Mb(s):this._bodyText=s=Object.prototype.toString.call(s):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof s=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Rt.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Rt.blob&&(this.blob=function(){var s=Td(this);if(s)return s;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var s=Td(this);return s||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Rt.blob)return this.blob().then(yO);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var s=Td(this);if(s)return s;if(this._bodyBlob)return gO(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(bO(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Rt.formData&&(this.formData=function(){return this.text().then(wO)}),this.json=function(){return this.text().then(JSON.parse)},this}var vO=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function _O(s){var e=s.toUpperCase();return vO.indexOf(e)>-1?e:s}function gr(s,e){if(!(this instanceof gr))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(s instanceof gr){if(s.bodyUsed)throw new TypeError("Already read");this.url=s.url,this.credentials=s.credentials,e.headers||(this.headers=new nt(s.headers)),this.method=s.method,this.mode=s.mode,this.signal=s.signal,!n&&s._bodyInit!=null&&(n=s._bodyInit,s.bodyUsed=!0)}else this.url=String(s);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new nt(e.headers)),this.method=_O(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in yt){var o=new AbortController;return o.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var u=/\?/;this.url+=(u.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}gr.prototype.clone=function(){return new gr(this,{body:this._bodyInit})};function wO(s){var e=new FormData;return s.trim().split("&").forEach(function(n){if(n){var r=n.split("="),u=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(u),decodeURIComponent(o))}}),e}function EO(s){var e=new nt,n=s.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var u=r.split(":"),o=u.shift().trim();if(o){var c=u.join(":").trim();try{e.append(o,c)}catch(d){console.warn("Response "+d.message)}}}),e}vv.call(gr.prototype);function ka(s,e){if(!(this instanceof ka))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new nt(e.headers),this.url=e.url||"",this._initBody(s)}vv.call(ka.prototype);ka.prototype.clone=function(){return new ka(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new nt(this.headers),url:this.url})};ka.error=function(){var s=new ka(null,{status:200,statusText:""});return s.ok=!1,s.status=0,s.type="error",s};var SO=[301,302,303,307,308];ka.redirect=function(s,e){if(SO.indexOf(e)===-1)throw new RangeError("Invalid status code");return new ka(null,{status:e,headers:{location:s}})};var ur=yt.DOMException;try{new ur}catch{ur=function(e,n){this.message=e,this.name=n;var r=Error(e);this.stack=r.stack},ur.prototype=Object.create(Error.prototype),ur.prototype.constructor=ur}function _v(s,e){return new Promise(function(n,r){var u=new gr(s,e);if(u.signal&&u.signal.aborted)return r(new ur("Aborted","AbortError"));var o=new XMLHttpRequest;function c(){o.abort()}o.onload=function(){var p={statusText:o.statusText,headers:EO(o.getAllResponseHeaders()||"")};u.url.indexOf("file://")===0&&(o.status<200||o.status>599)?p.status=200:p.status=o.status,p.url="responseURL"in o?o.responseURL:p.headers.get("X-Request-URL");var y="response"in o?o.response:o.responseText;setTimeout(function(){n(new ka(y,p))},0)},o.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request timed out"))},0)},o.onabort=function(){setTimeout(function(){r(new ur("Aborted","AbortError"))},0)};function d(p){try{return p===""&&yt.location.href?yt.location.href:p}catch{return p}}if(o.open(u.method,d(u.url),!0),u.credentials==="include"?o.withCredentials=!0:u.credentials==="omit"&&(o.withCredentials=!1),"responseType"in o&&(Rt.blob?o.responseType="blob":Rt.arrayBuffer&&(o.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof nt||yt.Headers&&e.headers instanceof yt.Headers)){var m=[];Object.getOwnPropertyNames(e.headers).forEach(function(p){m.push(pi(p)),o.setRequestHeader(p,nh(e.headers[p]))}),u.headers.forEach(function(p,y){m.indexOf(y)===-1&&o.setRequestHeader(y,p)})}else u.headers.forEach(function(p,y){o.setRequestHeader(y,p)});u.signal&&(u.signal.addEventListener("abort",c),o.onreadystatechange=function(){o.readyState===4&&u.signal.removeEventListener("abort",c)}),o.send(typeof u._bodyInit>"u"?null:u._bodyInit)})}_v.polyfill=!0;yt.fetch||(yt.fetch=_v,yt.Headers=nt,yt.Request=gr,yt.Response=ka);const TO="0.5.14",wv="11434",Ev=`http://127.0.0.1:${wv}`;var OO=Object.defineProperty,AO=(s,e,n)=>e in s?OO(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Od=(s,e,n)=>(AO(s,typeof e!="symbol"?e+"":e,n),n);class ih extends Error{constructor(e,n){super(e),this.error=e,this.status_code=n,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,ih)}}class RO{constructor(e,n,r){Od(this,"abortController"),Od(this,"itr"),Od(this,"doneCallback"),this.abortController=e,this.itr=n,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(const e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}}const sh=async s=>{var r;if(s.ok)return;let e=`Error ${s.status}: ${s.statusText}`,n=null;if((r=s.headers.get("content-type"))!=null&&r.includes("application/json"))try{n=await s.json(),e=n.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await s.text()||e}catch{console.log("Failed to get text from error response")}throw new ih(e,s.status)};function xO(){var s;if(typeof window<"u"&&window.navigator){const e=navigator;return"userAgentData"in e&&((s=e.userAgentData)!=null&&s.platform)?`${e.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function NO(s){if(s instanceof Headers){const e={};return s.forEach((n,r)=>{e[r]=n}),e}else return Array.isArray(s)?Object.fromEntries(s):s||{}}const uh=async(s,e,n={})=>{const r={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${TO} (${xO()})`};n.headers=NO(n.headers);const u=Object.fromEntries(Object.entries(n.headers).filter(([o])=>!Object.keys(r).some(c=>c.toLowerCase()===o.toLowerCase())));return n.headers={...r,...u},s(e,n)},Ub=async(s,e,n)=>{const r=await uh(s,e,{headers:n==null?void 0:n.headers});return await sh(r),r},ei=async(s,e,n,r)=>{const o=(d=>d!==null&&typeof d=="object"&&!Array.isArray(d))(n)?JSON.stringify(n):n,c=await uh(s,e,{method:"POST",body:o,signal:r==null?void 0:r.signal,headers:r==null?void 0:r.headers});return await sh(c),c},CO=async(s,e,n,r)=>{const u=await uh(s,e,{method:"DELETE",body:JSON.stringify(n),headers:r==null?void 0:r.headers});return await sh(u),u},jO=async function*(s){const e=new TextDecoder("utf-8");let n="";const r=s.getReader();for(;;){const{done:u,value:o}=await r.read();if(u)break;n+=e.decode(o);const c=n.split(`
`);n=c.pop()??"";for(const d of c)try{yield JSON.parse(d)}catch{console.warn("invalid json: ",d)}}for(const u of n.split(`
`).filter(o=>o!==""))try{yield JSON.parse(u)}catch{console.warn("invalid json: ",u)}},kO=s=>{if(!s)return Ev;let e=s.includes("://");s.startsWith(":")&&(s=`http://127.0.0.1${s}`,e=!0),e||(s=`http://${s}`);const n=new URL(s);let r=n.port;r||(e?r=n.protocol==="https:"?"443":"80":r=wv);let u=`${n.protocol}//${n.hostname}:${r}${n.pathname}`;return u.endsWith("/")&&(u=u.slice(0,-1)),u};var LO=Object.defineProperty,$O=(s,e,n)=>e in s?LO(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Ad=(s,e,n)=>($O(s,typeof e!="symbol"?e+"":e,n),n);let Sv=class{constructor(e){Ad(this,"config"),Ad(this,"fetch"),Ad(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e==null?void 0:e.headers},e!=null&&e.proxy||(this.config.host=kO((e==null?void 0:e.host)??Ev)),this.fetch=(e==null?void 0:e.fetch)??fetch}abort(){for(const e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,n){n.stream=n.stream??!1;const r=`${this.config.host}/api/${e}`;if(n.stream){const o=new AbortController,c=await ei(this.fetch,r,n,{signal:o.signal,headers:this.config.headers});if(!c.body)throw new Error("Missing body");const d=jO(c.body),m=new RO(o,d,()=>{const p=this.ongoingStreamedRequests.indexOf(m);p>-1&&this.ongoingStreamedRequests.splice(p,1)});return this.ongoingStreamedRequests.push(m),m}return await(await ei(this.fetch,r,n,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){const n=new Uint8Array(e);let r="";const u=n.byteLength;for(let o=0;o<u;o++)r+=String.fromCharCode(n[o]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(const n of e.messages)n.images&&(n.images=await Promise.all(n.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await CO(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await ei(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await Ub(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await ei(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await ei(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await ei(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await Ub(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}};new Sv;class ii extends dO{constructor({concurrency:e,...n}){super(e?{maxConcurrency:e,...n}:n),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,n){const r=ii._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=n.signal,[n,r]}async*_streamIterator(e,n){if(this._streamResponseChunks===ii.prototype._streamResponseChunks)yield this.invoke(e,n);else{const r=ii._convertInputToPromptValue(e),[u,o]=this._separateRunnableConfigFromCallOptionsCompat(n),c=await Mt.configure(u.callbacks,this.callbacks,u.tags,this.tags,u.metadata,this.metadata,{verbose:this.verbose}),d={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},m=await(c==null?void 0:c.handleLLMStart(this.toJSON(),[r.toString()],u.runId,void 0,d,void 0,void 0,u.runName));let p=new yr({text:""});try{for await(const y of this._streamResponseChunks(r.toString(),o,m==null?void 0:m[0]))p?p=p.concat(y):p=y,typeof y.text=="string"&&(yield y.text)}catch(y){throw await Promise.all((m??[]).map(b=>b==null?void 0:b.handleLLMError(y))),y}await Promise.all((m??[]).map(y=>y==null?void 0:y.handleLLMEnd({generations:[[p]]})))}}async generatePrompt(e,n,r){const u=e.map(o=>o.toString());return this.generate(u,n,r)}invocationParams(e){return{}}_flattenLLMResult(e){const n=[];for(let r=0;r<e.generations.length;r+=1){const u=e.generations[r];if(r===0)n.push({generations:[u],llmOutput:e.llmOutput});else{const o=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;n.push({generations:[u],llmOutput:o})}}return n}async _generateUncached(e,n,r,u){let o;if(u!==void 0&&u.length===e.length)o=u;else{const p=await Mt.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),y={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:e.length};o=await(p==null?void 0:p.handleLLMStart(this.toJSON(),e,r.runId,void 0,y,void 0,void 0,r==null?void 0:r.runName))}const c=!!(o!=null&&o[0].handlers.find(m1));let d;if(c&&e.length===1&&this._streamResponseChunks!==ii.prototype._streamResponseChunks)try{const p=await this._streamResponseChunks(e[0],n,o==null?void 0:o[0]);let y;for await(const b of p)y===void 0?y=b:y=Na(y,b);if(y===void 0)throw new Error("Received empty response from chat model call.");d={generations:[[y]],llmOutput:{}},await(o==null?void 0:o[0].handleLLMEnd(d))}catch(p){throw await(o==null?void 0:o[0].handleLLMError(p)),p}else{try{d=await this._generate(e,n,o==null?void 0:o[0])}catch(y){throw await Promise.all((o??[]).map(b=>b==null?void 0:b.handleLLMError(y))),y}const p=this._flattenLLMResult(d);await Promise.all((o??[]).map((y,b)=>y==null?void 0:y.handleLLMEnd(p[b])))}const m=(o==null?void 0:o.map(p=>p.runId))||void 0;return Object.defineProperty(d,Ab,{value:m?{runIds:m}:void 0,configurable:!0}),d}async _generateCached({prompts:e,cache:n,llmStringKey:r,parsedOptions:u,handledOptions:o,runId:c}){const d=await Mt.configure(o.callbacks,this.callbacks,o.tags,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),m={options:u,invocation_params:this==null?void 0:this.invocationParams(u),batch_size:e.length},p=await(d==null?void 0:d.handleLLMStart(this.toJSON(),e,c,void 0,m,void 0,void 0,o==null?void 0:o.runName)),y=[],v=(await Promise.allSettled(e.map(async(O,x)=>{const k=await n.lookup(O,r);return k==null&&y.push(x),k}))).map((O,x)=>({result:O,runManager:p==null?void 0:p[x]})).filter(({result:O})=>O.status==="fulfilled"&&O.value!=null||O.status==="rejected"),w=[];await Promise.all(v.map(async({result:O,runManager:x},k)=>{if(O.status==="fulfilled"){const z=O.value;return w[k]=z.map(L=>(L.generationInfo={...L.generationInfo,tokenUsage:{}},L)),z.length&&await(x==null?void 0:x.handleLLMNewToken(z[0].text)),x==null?void 0:x.handleLLMEnd({generations:[z]},void 0,void 0,void 0,{cached:!0})}else return await(x==null?void 0:x.handleLLMError(O.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(O.reason)}));const E={generations:w,missingPromptIndices:y,startedRunManagers:p};return Object.defineProperty(E,Ab,{value:p?{runIds:p==null?void 0:p.map(O=>O.runId)}:void 0,configurable:!0}),E}async generate(e,n,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let u;Array.isArray(n)?u={stop:n}:u=n;const[o,c]=this._separateRunnableConfigFromCallOptionsCompat(u);if(o.callbacks=o.callbacks??r,!this.cache)return this._generateUncached(e,c,o);const{cache:d}=this,m=this._getSerializedCacheKeyParametersForCall(c),{generations:p,missingPromptIndices:y,startedRunManagers:b}=await this._generateCached({prompts:e,cache:d,llmStringKey:m,parsedOptions:c,handledOptions:o,runId:o.runId});let v={};if(y.length>0){const w=await this._generateUncached(y.map(E=>e[E]),c,o,b!==void 0?y.map(E=>b==null?void 0:b[E]):void 0);await Promise.all(w.generations.map(async(E,O)=>{const x=y[O];return p[x]=E,d.update(e[x],m,E)})),v=w.llmOutput??{}}return{generations:p,llmOutput:v}}async call(e,n,r){const{generations:u}=await this.generate([e],n,r);return u[0][0].text}async predict(e,n,r){return this.call(e,n,r)}async predictMessages(e,n,r){const u=qd(e),o=await this.call(u,n,r);return new ui(o)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}}class DO extends ii{async _generate(e,n,r){return{generations:await Promise.all(e.map((o,c)=>this._call(o,{...n,promptIndex:c},r).then(d=>[{text:d}])))}}}class MO extends DO{static lc_name(){return"Ollama"}constructor(e){var n;super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16KV",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=(e==null?void 0:e.model)??this.model,this.baseUrl=(n=e==null?void 0:e.baseUrl)!=null&&n.endsWith("/")?e==null?void 0:e.baseUrl.slice(0,-1):(e==null?void 0:e.baseUrl)??this.baseUrl,this.client=new Sv({host:this.baseUrl,headers:e==null?void 0:e.headers}),this.keepAlive=e==null?void 0:e.keepAlive,this.embeddingOnly=e==null?void 0:e.embeddingOnly,this.f16KV=e==null?void 0:e.f16Kv,this.frequencyPenalty=e==null?void 0:e.frequencyPenalty,this.logitsAll=e==null?void 0:e.logitsAll,this.lowVram=e==null?void 0:e.lowVram,this.mainGpu=e==null?void 0:e.mainGpu,this.mirostat=e==null?void 0:e.mirostat,this.mirostatEta=e==null?void 0:e.mirostatEta,this.mirostatTau=e==null?void 0:e.mirostatTau,this.numBatch=e==null?void 0:e.numBatch,this.numCtx=e==null?void 0:e.numCtx,this.numGpu=e==null?void 0:e.numGpu,this.numKeep=e==null?void 0:e.numKeep,this.numPredict=e==null?void 0:e.numPredict,this.numThread=e==null?void 0:e.numThread,this.penalizeNewline=e==null?void 0:e.penalizeNewline,this.presencePenalty=e==null?void 0:e.presencePenalty,this.repeatLastN=e==null?void 0:e.repeatLastN,this.repeatPenalty=e==null?void 0:e.repeatPenalty,this.temperature=e==null?void 0:e.temperature,this.stop=e==null?void 0:e.stop,this.tfsZ=e==null?void 0:e.tfsZ,this.topK=e==null?void 0:e.topK,this.topP=e==null?void 0:e.topP,this.typicalP=e==null?void 0:e.typicalP,this.useMLock=e==null?void 0:e.useMlock,this.useMMap=e==null?void 0:e.useMmap,this.vocabOnly=e==null?void 0:e.vocabOnly,this.format=e==null?void 0:e.format}_llmType(){return"ollama"}invocationParams(e){return{model:this.model,format:this.format,keep_alive:this.keepAlive,images:e==null?void 0:e.images,options:{embedding_only:this.embeddingOnly,f16_kv:this.f16KV,frequency_penalty:this.frequencyPenalty,logits_all:this.logitsAll,low_vram:this.lowVram,main_gpu:this.mainGpu,mirostat:this.mirostat,mirostat_eta:this.mirostatEta,mirostat_tau:this.mirostatTau,num_batch:this.numBatch,num_ctx:this.numCtx,num_gpu:this.numGpu,num_keep:this.numKeep,num_predict:this.numPredict,num_thread:this.numThread,penalize_newline:this.penalizeNewline,presence_penalty:this.presencePenalty,repeat_last_n:this.repeatLastN,repeat_penalty:this.repeatPenalty,temperature:this.temperature,stop:(e==null?void 0:e.stop)??this.stop,tfs_z:this.tfsZ,top_k:this.topK,top_p:this.topP,typical_p:this.typicalP,use_mlock:this.useMLock,use_mmap:this.useMMap,vocab_only:this.vocabOnly}}}async*_streamResponseChunks(e,n,r){var o;const u=await this.caller.call(async()=>this.client.generate({...this.invocationParams(n),prompt:e,stream:!0}));for await(const c of u){if((o=n.signal)!=null&&o.aborted)throw new Error("This operation was aborted");c.done?yield new yr({text:"",generationInfo:{model:c.model,total_duration:c.total_duration,load_duration:c.load_duration,prompt_eval_count:c.prompt_eval_count,prompt_eval_duration:c.prompt_eval_duration,eval_count:c.eval_count,eval_duration:c.eval_duration}}):(yield new yr({text:c.response,generationInfo:{...c,response:void 0}}),await(r==null?void 0:r.handleLLMNewToken(c.response??"")))}}async _call(e,n,r){const u=[];for await(const o of this._streamResponseChunks(e,n,r))u.push(o.text);return u.join("")}}class UO extends kn{addUserMessage(e){return this.addMessage(new Gs(e))}addAIChatMessage(e){return this.addMessage(new ui(e))}addAIMessage(e){return this.addMessage(new ui(e))}async addMessages(e){for(const n of e)await this.addMessage(n)}clear(){throw new Error("Not implemented.")}}class PO extends UO{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}}const zO=new MO({model:"llama3.2"}),Rd=new PO,IO=async({input_message:s})=>{await Rd.addMessage(new Gs(s));const e=await Rd.getMessages(),n=await zO.invoke(e);return await Rd.addMessage(new ui(n)),n},BO=()=>{const[s,e]=Bd.useState([]),n=(r,u)=>{r.trim()!==""&&e(o=>[...o,{text:r,sender:u}])};return ct.jsxs("div",{className:"Chatbot",children:[ct.jsx(HO,{messages:s}),ct.jsx(qO,{addMessage:n})]})},HO=({messages:s})=>ct.jsxs("div",{className:"chatBody",children:[ct.jsx("div",{className:"titleBar",children:ct.jsx("h2",{children:"Winter's AI Chat"})}),ct.jsx("div",{className:"responseBox",children:s.map((e,n)=>ct.jsx(ZO,{message:e},n))})]}),qO=({addMessage:s})=>{const[e,n]=Bd.useState(""),r=()=>{s(e,"user"),n(""),IO({input_message:e}).then(u=>{s(u,"ai")}).catch(u=>console.error("Error generating reply:",u))};return ct.jsxs("div",{className:"userInput",children:[ct.jsx("input",{placeholder:"Enter Your Prompt",value:e,onChange:u=>n(u.target.value),onKeyDown:u=>u.key==="Enter"&&r()}),ct.jsx("div",{className:"submitButton",onClick:r,children:ct.jsx("h2",{children:"Enter"})})]})},ZO=({message:s})=>ct.jsx("div",{className:`Message ${s.sender}`,children:ct.jsx("p",{children:s.text})});function GO(){return ct.jsx("div",{className:"App",children:ct.jsx(BO,{})})}nw.createRoot(document.getElementById("root")).render(ct.jsx(Bd.StrictMode,{children:ct.jsx(GO,{})}));
